DATA SCHEME
-- WARNING: This schema is for context only and is not meant to be run.
-- Table order and constraints may not be valid for execution.

CREATE TABLE public.accounts (
  account_id text NOT NULL,
  company_name text NOT NULL,
  domain text,
  npwp text,
  industry text,
  address text,
  city text,
  province text,
  country text DEFAULT 'Indonesia'::text,
  postal_code text,
  phone text,
  pic_name text,
  pic_email text,
  pic_phone text,
  owner_user_id uuid,
  tenure_status USER-DEFINED DEFAULT 'Prospect'::account_tenure_status,
  activity_status USER-DEFINED DEFAULT 'Inactive'::account_activity_status,
  first_deal_date timestamp with time zone,
  last_transaction_date timestamp with time zone,
  is_active boolean DEFAULT true,
  tags ARRAY,
  notes text,
  dedupe_key text UNIQUE,
  created_by uuid,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  account_status USER-DEFINED DEFAULT 'calon_account'::account_status,
  first_transaction_date timestamp with time zone,
  lead_id text,
  retry_count integer DEFAULT 0,
  original_lead_id text,
  original_creator_id uuid,
  CONSTRAINT accounts_pkey PRIMARY KEY (account_id),
  CONSTRAINT accounts_owner_user_id_fkey FOREIGN KEY (owner_user_id) REFERENCES public.profiles(user_id),
  CONSTRAINT accounts_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.profiles(user_id),
  CONSTRAINT accounts_original_creator_id_fkey FOREIGN KEY (original_creator_id) REFERENCES public.profiles(user_id),
  CONSTRAINT accounts_lead_id_fkey FOREIGN KEY (lead_id) REFERENCES public.leads(lead_id),
  CONSTRAINT accounts_original_lead_id_fkey FOREIGN KEY (original_lead_id) REFERENCES public.leads(lead_id)
);
CREATE TABLE public.activities (
  activity_id text NOT NULL,
  activity_type USER-DEFINED NOT NULL DEFAULT 'Task'::activity_type_v2,
  subject text NOT NULL,
  description text,
  outcome text,
  status USER-DEFINED NOT NULL DEFAULT 'Planned'::activity_status,
  due_date date NOT NULL,
  due_time time without time zone,
  completed_at timestamp with time zone,
  related_account_id text,
  related_contact_id text,
  related_opportunity_id text,
  related_lead_id text,
  cadence_enrollment_id bigint,
  cadence_step_number integer,
  owner_user_id uuid NOT NULL,
  assigned_to uuid,
  created_by uuid,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT activities_pkey PRIMARY KEY (activity_id),
  CONSTRAINT activities_related_account_id_fkey FOREIGN KEY (related_account_id) REFERENCES public.accounts(account_id),
  CONSTRAINT activities_related_contact_id_fkey FOREIGN KEY (related_contact_id) REFERENCES public.contacts(contact_id),
  CONSTRAINT activities_related_opportunity_id_fkey FOREIGN KEY (related_opportunity_id) REFERENCES public.opportunities(opportunity_id),
  CONSTRAINT activities_related_lead_id_fkey FOREIGN KEY (related_lead_id) REFERENCES public.leads(lead_id),
  CONSTRAINT activities_owner_user_id_fkey FOREIGN KEY (owner_user_id) REFERENCES public.profiles(user_id),
  CONSTRAINT activities_assigned_to_fkey FOREIGN KEY (assigned_to) REFERENCES public.profiles(user_id),
  CONSTRAINT activities_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.profiles(user_id),
  CONSTRAINT activities_cadence_enrollment_fkey FOREIGN KEY (cadence_enrollment_id) REFERENCES public.cadence_enrollments(enrollment_id)
);
CREATE TABLE public.audit_logs (
  log_id bigint NOT NULL DEFAULT nextval('audit_logs_log_id_seq'::regclass),
  user_id uuid,
  module text NOT NULL,
  action text NOT NULL,
  record_id text,
  record_type text,
  before_data jsonb,
  after_data jsonb,
  correlation_id text,
  ip_address text,
  user_agent text,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT audit_logs_pkey PRIMARY KEY (log_id),
  CONSTRAINT audit_logs_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.cadence_enrollments (
  enrollment_id bigint NOT NULL DEFAULT nextval('cadence_enrollments_enrollment_id_seq'::regclass),
  cadence_id integer NOT NULL,
  account_id text,
  contact_id text,
  opportunity_id text,
  current_step integer DEFAULT 1,
  status USER-DEFINED DEFAULT 'Active'::cadence_enrollment_status,
  enrolled_by uuid,
  enrolled_at timestamp with time zone DEFAULT now(),
  completed_at timestamp with time zone,
  stopped_at timestamp with time zone,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT cadence_enrollments_pkey PRIMARY KEY (enrollment_id),
  CONSTRAINT cadence_enrollments_cadence_id_fkey FOREIGN KEY (cadence_id) REFERENCES public.cadences(cadence_id),
  CONSTRAINT cadence_enrollments_account_id_fkey FOREIGN KEY (account_id) REFERENCES public.accounts(account_id),
  CONSTRAINT cadence_enrollments_contact_id_fkey FOREIGN KEY (contact_id) REFERENCES public.contacts(contact_id),
  CONSTRAINT cadence_enrollments_opportunity_id_fkey FOREIGN KEY (opportunity_id) REFERENCES public.opportunities(opportunity_id),
  CONSTRAINT cadence_enrollments_enrolled_by_fkey FOREIGN KEY (enrolled_by) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.cadence_steps (
  step_id integer NOT NULL DEFAULT nextval('cadence_steps_step_id_seq'::regclass),
  cadence_id integer NOT NULL,
  step_number integer NOT NULL,
  activity_type USER-DEFINED NOT NULL,
  subject_template text NOT NULL,
  description_template text,
  delay_days integer NOT NULL DEFAULT 0,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT cadence_steps_pkey PRIMARY KEY (step_id),
  CONSTRAINT cadence_steps_cadence_id_fkey FOREIGN KEY (cadence_id) REFERENCES public.cadences(cadence_id)
);
CREATE TABLE public.cadences (
  cadence_id integer NOT NULL DEFAULT nextval('cadences_cadence_id_seq'::regclass),
  name text NOT NULL,
  description text,
  is_active boolean DEFAULT true,
  owner_user_id uuid,
  created_by uuid,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT cadences_pkey PRIMARY KEY (cadence_id),
  CONSTRAINT cadences_owner_user_id_fkey FOREIGN KEY (owner_user_id) REFERENCES public.profiles(user_id),
  CONSTRAINT cadences_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.contacts (
  contact_id text NOT NULL,
  account_id text NOT NULL,
  first_name text NOT NULL,
  last_name text,
  email text,
  phone text,
  mobile text,
  job_title text,
  department text,
  is_primary boolean DEFAULT false,
  notes text,
  created_by uuid,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT contacts_pkey PRIMARY KEY (contact_id),
  CONSTRAINT contacts_account_id_fkey FOREIGN KEY (account_id) REFERENCES public.accounts(account_id),
  CONSTRAINT contacts_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.crm_idempotency (
  idempotency_key text NOT NULL,
  request_fingerprint text,
  response jsonb,
  expires_at timestamp with time zone NOT NULL,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT crm_idempotency_pkey PRIMARY KEY (idempotency_key)
);
CREATE TABLE public.crm_notification_logs (
  id bigint NOT NULL DEFAULT nextval('crm_notification_logs_id_seq'::regclass),
  entity_type text NOT NULL,
  entity_id text NOT NULL,
  event text NOT NULL,
  threshold integer,
  recipient_emails ARRAY,
  cc_emails ARRAY,
  subject text,
  status text NOT NULL DEFAULT 'sent'::text,
  error_message text,
  metadata jsonb,
  sent_at timestamp with time zone DEFAULT now(),
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT crm_notification_logs_pkey PRIMARY KEY (id)
);
CREATE TABLE public.customer_quotation_items (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  quotation_id uuid NOT NULL,
  component_type USER-DEFINED NOT NULL,
  component_name character varying,
  description text,
  cost_amount numeric NOT NULL DEFAULT 0,
  target_margin_percent numeric DEFAULT 0,
  selling_rate numeric NOT NULL DEFAULT 0,
  unit_price numeric,
  quantity numeric,
  unit character varying,
  sort_order integer DEFAULT 0,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT customer_quotation_items_pkey PRIMARY KEY (id),
  CONSTRAINT customer_quotation_items_quotation_id_fkey FOREIGN KEY (quotation_id) REFERENCES public.customer_quotations(id)
);
CREATE TABLE public.customer_quotation_sequences (
  year integer NOT NULL,
  month integer NOT NULL,
  last_sequence integer DEFAULT 0,
  CONSTRAINT customer_quotation_sequences_pkey PRIMARY KEY (year, month)
);
CREATE TABLE public.customer_quotations (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  ticket_id uuid,
  operational_cost_id uuid,
  quotation_number character varying NOT NULL UNIQUE,
  customer_name character varying NOT NULL,
  customer_company character varying,
  customer_email character varying,
  customer_phone character varying,
  customer_address text,
  service_type character varying,
  service_type_code character varying,
  fleet_type character varying,
  fleet_quantity integer,
  incoterm character varying,
  commodity character varying,
  cargo_description text,
  cargo_weight numeric,
  cargo_weight_unit character varying DEFAULT 'kg'::character varying,
  cargo_volume numeric,
  cargo_volume_unit character varying DEFAULT 'cbm'::character varying,
  cargo_quantity integer,
  cargo_quantity_unit character varying,
  origin_address text,
  origin_city character varying,
  origin_country character varying,
  origin_port character varying,
  destination_address text,
  destination_city character varying,
  destination_country character varying,
  destination_port character varying,
  rate_structure USER-DEFINED NOT NULL DEFAULT 'bundling'::rate_structure_type,
  total_cost numeric,
  target_margin_percent numeric,
  total_selling_rate numeric,
  currency character varying DEFAULT 'IDR'::character varying,
  scope_of_work text,
  terms_includes jsonb DEFAULT '[]'::jsonb,
  terms_excludes jsonb DEFAULT '[]'::jsonb,
  terms_notes text,
  validity_days integer DEFAULT 14,
  valid_until date,
  status USER-DEFINED DEFAULT 'draft'::customer_quotation_status,
  pdf_url text,
  pdf_generated_at timestamp with time zone,
  sent_via character varying,
  sent_at timestamp with time zone,
  sent_to character varying,
  validation_code uuid DEFAULT gen_random_uuid(),
  created_by uuid NOT NULL,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  estimated_leadtime text,
  estimated_cargo_value numeric,
  cargo_value_currency text DEFAULT 'IDR'::text,
  lead_id text,
  opportunity_id text,
  sequence_number integer DEFAULT 1,
  source_type character varying DEFAULT 'ticket'::character varying,
  rejection_reason text,
  CONSTRAINT customer_quotations_pkey PRIMARY KEY (id),
  CONSTRAINT customer_quotations_ticket_id_fkey FOREIGN KEY (ticket_id) REFERENCES public.tickets(id),
  CONSTRAINT customer_quotations_operational_cost_id_fkey FOREIGN KEY (operational_cost_id) REFERENCES public.ticket_rate_quotes(id),
  CONSTRAINT customer_quotations_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.profiles(user_id),
  CONSTRAINT customer_quotations_lead_id_fkey FOREIGN KEY (lead_id) REFERENCES public.leads(lead_id),
  CONSTRAINT customer_quotations_opportunity_id_fkey FOREIGN KEY (opportunity_id) REFERENCES public.opportunities(opportunity_id),
  CONSTRAINT fk_customer_quotations_lead FOREIGN KEY (lead_id) REFERENCES public.leads(lead_id),
  CONSTRAINT fk_customer_quotations_opportunity FOREIGN KEY (opportunity_id) REFERENCES public.opportunities(opportunity_id)
);
CREATE TABLE public.import_batches (
  batch_id bigint NOT NULL DEFAULT nextval('import_batches_batch_id_seq'::regclass),
  entity_type text NOT NULL,
  file_name text,
  file_url text,
  status USER-DEFINED DEFAULT 'pending'::import_batch_status,
  total_rows integer DEFAULT 0,
  processed_rows integer DEFAULT 0,
  success_rows integer DEFAULT 0,
  error_rows integer DEFAULT 0,
  errors jsonb DEFAULT '[]'::jsonb,
  imported_by uuid NOT NULL,
  started_at timestamp with time zone,
  completed_at timestamp with time zone,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT import_batches_pkey PRIMARY KEY (batch_id),
  CONSTRAINT import_batches_imported_by_fkey FOREIGN KEY (imported_by) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.insights_growth (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  scope_key text NOT NULL,
  filters_hash text NOT NULL,
  filters jsonb NOT NULL DEFAULT '{}'::jsonb,
  role_view text NOT NULL,
  generated_by_user_id uuid,
  generated_at timestamp with time zone NOT NULL DEFAULT now(),
  metrics_snapshot jsonb NOT NULL DEFAULT '{}'::jsonb,
  insight_json jsonb NOT NULL DEFAULT '{}'::jsonb,
  model text DEFAULT 'gemini-1.5-flash'::text,
  latency_ms integer,
  tokens_in integer,
  tokens_out integer,
  is_latest boolean NOT NULL DEFAULT true,
  status text NOT NULL DEFAULT 'completed'::text CHECK (status = ANY (ARRAY['pending'::text, 'generating'::text, 'completed'::text, 'failed'::text])),
  error_message text,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  updated_at timestamp with time zone NOT NULL DEFAULT now(),
  CONSTRAINT insights_growth_pkey PRIMARY KEY (id),
  CONSTRAINT insights_growth_generated_by_user_id_fkey FOREIGN KEY (generated_by_user_id) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.lead_handover_pool (
  pool_id bigint NOT NULL DEFAULT nextval('lead_handover_pool_pool_id_seq'::regclass),
  lead_id text NOT NULL UNIQUE,
  handed_over_by uuid NOT NULL,
  handed_over_at timestamp with time zone DEFAULT now(),
  handover_notes text,
  priority integer DEFAULT 0,
  claimed_by uuid,
  claimed_at timestamp with time zone,
  expires_at timestamp with time zone,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT lead_handover_pool_pkey PRIMARY KEY (pool_id),
  CONSTRAINT lead_handover_pool_lead_id_fkey FOREIGN KEY (lead_id) REFERENCES public.leads(lead_id),
  CONSTRAINT lead_handover_pool_handed_over_by_fkey FOREIGN KEY (handed_over_by) REFERENCES public.profiles(user_id),
  CONSTRAINT lead_handover_pool_claimed_by_fkey FOREIGN KEY (claimed_by) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.leads (
  lead_id text NOT NULL,
  company_name text NOT NULL,
  contact_name text,
  contact_email text,
  contact_phone text,
  contact_mobile text,
  job_title text,
  source text,
  source_detail text,
  service_code text,
  service_description text,
  route text,
  origin text,
  destination text,
  volume_estimate text,
  timeline text,
  notes text,
  triage_status USER-DEFINED NOT NULL DEFAULT 'New'::lead_triage_status,
  status USER-DEFINED DEFAULT 'New'::lead_status,
  handover_eligible boolean DEFAULT false,
  marketing_owner_user_id uuid,
  sales_owner_user_id uuid,
  opportunity_id text,
  customer_id text,
  qualified_at timestamp with time zone,
  disqualified_at timestamp with time zone,
  disqualified_reason text,
  handed_over_at timestamp with time zone,
  claimed_at timestamp with time zone,
  converted_at timestamp with time zone,
  dedupe_key text UNIQUE,
  created_by uuid,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  priority integer DEFAULT 2 CHECK (priority >= 1 AND priority <= 4),
  industry text,
  potential_revenue numeric,
  claim_status USER-DEFINED DEFAULT 'unclaimed'::lead_claim_status,
  claimed_by_name text,
  account_id text,
  quotation_status character varying DEFAULT NULL::character varying,
  latest_quotation_id uuid,
  quotation_count integer DEFAULT 0,
  CONSTRAINT leads_pkey PRIMARY KEY (lead_id),
  CONSTRAINT leads_marketing_owner_user_id_fkey FOREIGN KEY (marketing_owner_user_id) REFERENCES public.profiles(user_id),
  CONSTRAINT leads_sales_owner_user_id_fkey FOREIGN KEY (sales_owner_user_id) REFERENCES public.profiles(user_id),
  CONSTRAINT leads_customer_id_fkey FOREIGN KEY (customer_id) REFERENCES public.accounts(account_id),
  CONSTRAINT leads_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.profiles(user_id),
  CONSTRAINT leads_opportunity_id_fkey FOREIGN KEY (opportunity_id) REFERENCES public.opportunities(opportunity_id),
  CONSTRAINT leads_account_id_fkey FOREIGN KEY (account_id) REFERENCES public.accounts(account_id),
  CONSTRAINT leads_latest_quotation_id_fkey FOREIGN KEY (latest_quotation_id) REFERENCES public.customer_quotations(id)
);
CREATE TABLE public.operational_cost_rejection_reasons (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  operational_cost_id uuid NOT NULL,
  reason_type USER-DEFINED NOT NULL,
  suggested_amount numeric,
  currency character varying DEFAULT 'IDR'::character varying,
  notes text,
  created_by uuid NOT NULL,
  created_at timestamp with time zone DEFAULT now(),
  competitor_name text,
  competitor_amount numeric,
  customer_budget numeric,
  CONSTRAINT operational_cost_rejection_reasons_pkey PRIMARY KEY (id),
  CONSTRAINT operational_cost_rejection_reasons_operational_cost_id_fkey FOREIGN KEY (operational_cost_id) REFERENCES public.ticket_rate_quotes(id),
  CONSTRAINT operational_cost_rejection_reasons_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.opportunities (
  opportunity_id text NOT NULL,
  account_id text NOT NULL,
  primary_contact_id text,
  source_lead_id text,
  name text NOT NULL,
  description text,
  service_codes ARRAY,
  route text,
  origin text,
  destination text,
  estimated_value numeric,
  currency text DEFAULT 'IDR'::text,
  probability integer DEFAULT 0 CHECK (probability >= 0 AND probability <= 100),
  stage USER-DEFINED NOT NULL DEFAULT 'Prospecting'::opportunity_stage,
  next_step text NOT NULL,
  next_step_due_date date NOT NULL,
  owner_user_id uuid NOT NULL,
  closed_at timestamp with time zone,
  outcome text,
  lost_reason text,
  competitor text,
  created_by uuid,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  competitor_price numeric,
  customer_budget numeric,
  attempt_number integer DEFAULT 1,
  original_creator_id uuid,
  quotation_status character varying DEFAULT NULL::character varying,
  latest_quotation_id uuid,
  quotation_count integer DEFAULT 0,
  deal_value numeric DEFAULT NULL::numeric,
  CONSTRAINT opportunities_pkey PRIMARY KEY (opportunity_id),
  CONSTRAINT opportunities_account_id_fkey FOREIGN KEY (account_id) REFERENCES public.accounts(account_id),
  CONSTRAINT opportunities_primary_contact_id_fkey FOREIGN KEY (primary_contact_id) REFERENCES public.contacts(contact_id),
  CONSTRAINT opportunities_source_lead_id_fkey FOREIGN KEY (source_lead_id) REFERENCES public.leads(lead_id),
  CONSTRAINT opportunities_owner_user_id_fkey FOREIGN KEY (owner_user_id) REFERENCES public.profiles(user_id),
  CONSTRAINT opportunities_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.profiles(user_id),
  CONSTRAINT opportunities_original_creator_id_fkey FOREIGN KEY (original_creator_id) REFERENCES public.profiles(user_id),
  CONSTRAINT opportunities_latest_quotation_id_fkey FOREIGN KEY (latest_quotation_id) REFERENCES public.customer_quotations(id)
);
CREATE TABLE public.opportunity_stage_history (
  history_id bigint NOT NULL DEFAULT nextval('opportunity_stage_history_history_id_seq'::regclass),
  opportunity_id text NOT NULL,
  from_stage USER-DEFINED,
  to_stage USER-DEFINED NOT NULL,
  changed_by uuid NOT NULL,
  changed_at timestamp with time zone DEFAULT now(),
  reason text,
  notes text,
  old_stage USER-DEFINED,
  new_stage USER-DEFINED NOT NULL,
  CONSTRAINT opportunity_stage_history_pkey PRIMARY KEY (history_id),
  CONSTRAINT opportunity_stage_history_opportunity_id_fkey FOREIGN KEY (opportunity_id) REFERENCES public.opportunities(opportunity_id),
  CONSTRAINT opportunity_stage_history_changed_by_fkey FOREIGN KEY (changed_by) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.pipeline_updates (
  update_id text NOT NULL DEFAULT (('PU'::text || to_char(now(), 'YYYYMMDD'::text)) || upper(SUBSTRING(md5((random())::text) FROM 1 FOR 8))),
  opportunity_id text NOT NULL,
  updated_at timestamp with time zone DEFAULT now(),
  notes text,
  approach_method USER-DEFINED NOT NULL,
  evidence_url text,
  evidence_file_name text,
  location_lat numeric,
  location_lng numeric,
  location_address text,
  old_stage USER-DEFINED,
  new_stage USER-DEFINED NOT NULL,
  updated_by uuid,
  created_at timestamp with time zone DEFAULT now(),
  evidence_original_url text,
  CONSTRAINT pipeline_updates_pkey PRIMARY KEY (update_id),
  CONSTRAINT pipeline_updates_opportunity_id_fkey FOREIGN KEY (opportunity_id) REFERENCES public.opportunities(opportunity_id),
  CONSTRAINT pipeline_updates_updated_by_fkey FOREIGN KEY (updated_by) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.profiles (
  user_id uuid NOT NULL,
  email text NOT NULL,
  name text NOT NULL,
  role USER-DEFINED NOT NULL DEFAULT 'salesperson'::user_role,
  department text,
  avatar_url text,
  is_active boolean DEFAULT true,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  phone text,
  CONSTRAINT profiles_pkey PRIMARY KEY (user_id),
  CONSTRAINT profiles_user_id_fkey FOREIGN KEY (user_id) REFERENCES auth.users(id)
);
CREATE TABLE public.quotation_rejection_reasons (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  quotation_id uuid NOT NULL,
  reason_type USER-DEFINED NOT NULL,
  competitor_name text,
  competitor_amount numeric,
  customer_budget numeric,
  currency character varying DEFAULT 'IDR'::character varying,
  notes text,
  created_by uuid NOT NULL,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT quotation_rejection_reasons_pkey PRIMARY KEY (id),
  CONSTRAINT quotation_rejection_reasons_quotation_id_fkey FOREIGN KEY (quotation_id) REFERENCES public.customer_quotations(id),
  CONSTRAINT quotation_rejection_reasons_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.quotation_term_templates (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  term_type character varying NOT NULL CHECK (term_type::text = ANY (ARRAY['include'::character varying, 'exclude'::character varying]::text[])),
  term_text text NOT NULL,
  is_default boolean DEFAULT false,
  sort_order integer DEFAULT 0,
  is_active boolean DEFAULT true,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT quotation_term_templates_pkey PRIMARY KEY (id)
);
CREATE TABLE public.sales_plans (
  plan_id text NOT NULL,
  plan_type USER-DEFINED NOT NULL,
  company_name text NOT NULL,
  pic_name text,
  pic_phone text,
  pic_email text,
  source_account_id text,
  planned_date date NOT NULL,
  planned_activity_method USER-DEFINED NOT NULL,
  plan_notes text,
  status text NOT NULL DEFAULT 'planned'::text CHECK (status = ANY (ARRAY['planned'::text, 'completed'::text, 'cancelled'::text])),
  realized_at timestamp with time zone,
  actual_activity_method USER-DEFINED,
  method_change_reason text,
  realization_notes text,
  evidence_url text,
  evidence_file_name text,
  evidence_original_url text,
  location_lat numeric,
  location_lng numeric,
  location_address text,
  potential_status USER-DEFINED DEFAULT 'pending'::potential_status,
  not_potential_reason text,
  created_lead_id text,
  created_account_id text,
  created_opportunity_id text,
  owner_user_id uuid NOT NULL,
  created_by uuid,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT sales_plans_pkey PRIMARY KEY (plan_id),
  CONSTRAINT sales_plans_source_account_id_fkey FOREIGN KEY (source_account_id) REFERENCES public.accounts(account_id),
  CONSTRAINT sales_plans_created_lead_id_fkey FOREIGN KEY (created_lead_id) REFERENCES public.leads(lead_id),
  CONSTRAINT sales_plans_created_account_id_fkey FOREIGN KEY (created_account_id) REFERENCES public.accounts(account_id),
  CONSTRAINT sales_plans_created_opportunity_id_fkey FOREIGN KEY (created_opportunity_id) REFERENCES public.opportunities(opportunity_id),
  CONSTRAINT sales_plans_owner_user_id_fkey FOREIGN KEY (owner_user_id) REFERENCES public.profiles(user_id),
  CONSTRAINT sales_plans_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.service_types (
  id integer NOT NULL DEFAULT nextval('service_types_id_seq'::regclass),
  service_code text NOT NULL UNIQUE,
  service_name text NOT NULL,
  department USER-DEFINED NOT NULL,
  description text,
  is_active boolean DEFAULT true,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT service_types_pkey PRIMARY KEY (id)
);
CREATE TABLE public.shipment_attachments (
  attachment_id text NOT NULL,
  shipment_detail_id text NOT NULL,
  file_name text NOT NULL,
  file_path text NOT NULL,
  file_size integer,
  file_type text,
  uploaded_by uuid,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT shipment_attachments_pkey PRIMARY KEY (attachment_id),
  CONSTRAINT shipment_attachments_shipment_detail_id_fkey FOREIGN KEY (shipment_detail_id) REFERENCES public.shipment_details(shipment_detail_id),
  CONSTRAINT shipment_attachments_uploaded_by_fkey FOREIGN KEY (uploaded_by) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.shipment_details (
  shipment_detail_id text NOT NULL,
  lead_id text NOT NULL,
  service_type_id integer,
  service_type_code text,
  department USER-DEFINED,
  fleet_type USER-DEFINED,
  fleet_quantity integer DEFAULT 1,
  incoterm USER-DEFINED,
  cargo_category USER-DEFINED DEFAULT 'General Cargo'::cargo_category,
  cargo_description text,
  origin_address text,
  origin_city text,
  origin_country text DEFAULT 'Indonesia'::text,
  destination_address text,
  destination_city text,
  destination_country text DEFAULT 'Indonesia'::text,
  quantity integer DEFAULT 1,
  unit_of_measure USER-DEFINED DEFAULT 'Boxes'::unit_of_measure,
  weight_per_unit_kg numeric,
  weight_total_kg numeric,
  length_cm numeric,
  width_cm numeric,
  height_cm numeric,
  volume_total_cbm numeric,
  scope_of_work text,
  additional_services ARRAY,
  notes text,
  created_by uuid,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT shipment_details_pkey PRIMARY KEY (shipment_detail_id),
  CONSTRAINT shipment_details_lead_id_fkey FOREIGN KEY (lead_id) REFERENCES public.leads(lead_id),
  CONSTRAINT shipment_details_service_type_id_fkey FOREIGN KEY (service_type_id) REFERENCES public.service_types(id),
  CONSTRAINT shipment_details_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.sla_business_hours (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  day_of_week integer NOT NULL UNIQUE CHECK (day_of_week >= 0 AND day_of_week <= 6),
  is_working_day boolean DEFAULT true,
  start_time time without time zone NOT NULL DEFAULT '08:00:00'::time without time zone,
  end_time time without time zone NOT NULL DEFAULT '18:00:00'::time without time zone,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT sla_business_hours_pkey PRIMARY KEY (id)
);
CREATE TABLE public.sla_holidays (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  holiday_date date NOT NULL UNIQUE,
  name character varying NOT NULL,
  description text,
  is_recurring boolean DEFAULT false,
  created_by uuid,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT sla_holidays_pkey PRIMARY KEY (id),
  CONSTRAINT sla_holidays_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.ticket_assignments (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  ticket_id uuid NOT NULL,
  assigned_to uuid NOT NULL,
  assigned_by uuid NOT NULL,
  assigned_at timestamp with time zone DEFAULT now(),
  notes text,
  CONSTRAINT ticket_assignments_pkey PRIMARY KEY (id),
  CONSTRAINT ticket_assignments_assigned_by_fkey FOREIGN KEY (assigned_by) REFERENCES public.profiles(user_id),
  CONSTRAINT ticket_assignments_ticket_id_fkey FOREIGN KEY (ticket_id) REFERENCES public.tickets(id),
  CONSTRAINT ticket_assignments_assigned_to_fkey FOREIGN KEY (assigned_to) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.ticket_attachments (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  ticket_id uuid NOT NULL,
  comment_id uuid,
  file_name character varying NOT NULL,
  file_url text NOT NULL,
  file_type character varying NOT NULL,
  file_size integer NOT NULL,
  uploaded_by uuid NOT NULL,
  created_at timestamp with time zone DEFAULT now(),
  file_path text,
  CONSTRAINT ticket_attachments_pkey PRIMARY KEY (id),
  CONSTRAINT ticket_attachments_ticket_id_fkey FOREIGN KEY (ticket_id) REFERENCES public.tickets(id),
  CONSTRAINT ticket_attachments_comment_id_fkey FOREIGN KEY (comment_id) REFERENCES public.ticket_comments(id),
  CONSTRAINT ticket_attachments_uploaded_by_fkey FOREIGN KEY (uploaded_by) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.ticket_comments (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  ticket_id uuid NOT NULL,
  user_id uuid NOT NULL,
  content text NOT NULL,
  is_internal boolean DEFAULT false,
  response_time_seconds integer,
  response_direction character varying,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT ticket_comments_pkey PRIMARY KEY (id),
  CONSTRAINT ticket_comments_ticket_id_fkey FOREIGN KEY (ticket_id) REFERENCES public.tickets(id),
  CONSTRAINT ticket_comments_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.ticket_events (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  ticket_id uuid NOT NULL,
  event_type USER-DEFINED NOT NULL,
  actor_user_id uuid NOT NULL,
  old_value jsonb,
  new_value jsonb,
  notes text,
  ip_address character varying,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT ticket_events_pkey PRIMARY KEY (id),
  CONSTRAINT ticket_events_ticket_id_fkey FOREIGN KEY (ticket_id) REFERENCES public.tickets(id),
  CONSTRAINT ticket_events_actor_user_id_fkey FOREIGN KEY (actor_user_id) REFERENCES public.profiles(user_id)
);
CREATE TABLE public.ticket_rate_quote_items (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  quote_id uuid NOT NULL,
  component_type character varying NOT NULL,
  component_name character varying,
  description text,
  cost_amount numeric NOT NULL DEFAULT 0,
  quantity numeric,
  unit character varying,
  sort_order integer DEFAULT 0,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT ticket_rate_quote_items_pkey PRIMARY KEY (id),
  CONSTRAINT ticket_rate_quote_items_quote_id_fkey FOREIGN KEY (quote_id) REFERENCES public.ticket_rate_quotes(id)
);
CREATE TABLE public.ticket_rate_quotes (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  ticket_id uuid NOT NULL,
  quote_number character varying NOT NULL UNIQUE,
  amount numeric NOT NULL,
  currency character varying DEFAULT 'IDR'::character varying,
  valid_until date NOT NULL,
  terms text,
  status USER-DEFINED DEFAULT 'draft'::quote_status,
  created_by uuid NOT NULL,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  rate_structure character varying DEFAULT 'bundling'::character varying CHECK (rate_structure::text = ANY (ARRAY['bundling'::character varying, 'breakdown'::character varying]::text[])),
  customer_quotation_id uuid,
  lead_id text,
  opportunity_id text,
  CONSTRAINT ticket_rate_quotes_pkey PRIMARY KEY (id),
  CONSTRAINT ticket_rate_quotes_ticket_id_fkey FOREIGN KEY (ticket_id) REFERENCES public.tickets(id),
  CONSTRAINT ticket_rate_quotes_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.profiles(user_id),
  CONSTRAINT ticket_rate_quotes_customer_quotation_id_fkey FOREIGN KEY (customer_quotation_id) REFERENCES public.customer_quotations(id),
  CONSTRAINT ticket_rate_quotes_lead_id_fkey FOREIGN KEY (lead_id) REFERENCES public.leads(lead_id),
  CONSTRAINT ticket_rate_quotes_opportunity_id_fkey FOREIGN KEY (opportunity_id) REFERENCES public.opportunities(opportunity_id),
  CONSTRAINT fk_ticket_rate_quotes_lead FOREIGN KEY (lead_id) REFERENCES public.leads(lead_id),
  CONSTRAINT fk_ticket_rate_quotes_opportunity FOREIGN KEY (opportunity_id) REFERENCES public.opportunities(opportunity_id),
  CONSTRAINT fk_ticket_rate_quotes_customer_quotation FOREIGN KEY (customer_quotation_id) REFERENCES public.customer_quotations(id)
);
CREATE TABLE public.ticket_response_exchanges (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  ticket_id uuid NOT NULL,
  responder_user_id uuid NOT NULL,
  responder_type USER-DEFINED NOT NULL,
  comment_id uuid,
  previous_response_at timestamp with time zone,
  responded_at timestamp with time zone NOT NULL DEFAULT now(),
  raw_response_seconds integer,
  business_response_seconds integer,
  exchange_number integer NOT NULL,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT ticket_response_exchanges_pkey PRIMARY KEY (id),
  CONSTRAINT ticket_response_exchanges_ticket_id_fkey FOREIGN KEY (ticket_id) REFERENCES public.tickets(id),
  CONSTRAINT ticket_response_exchanges_responder_user_id_fkey FOREIGN KEY (responder_user_id) REFERENCES public.profiles(user_id),
  CONSTRAINT ticket_response_exchanges_comment_id_fkey FOREIGN KEY (comment_id) REFERENCES public.ticket_comments(id)
);
CREATE TABLE public.ticket_response_metrics (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  ticket_id uuid NOT NULL UNIQUE,
  creator_total_responses integer DEFAULT 0,
  creator_avg_response_seconds integer DEFAULT 0,
  creator_avg_business_response_seconds integer DEFAULT 0,
  assignee_total_responses integer DEFAULT 0,
  assignee_avg_response_seconds integer DEFAULT 0,
  assignee_avg_business_response_seconds integer DEFAULT 0,
  assignee_first_response_seconds integer,
  assignee_first_response_business_seconds integer,
  time_to_first_quote_seconds integer,
  time_to_first_quote_business_seconds integer,
  time_to_resolution_seconds integer,
  time_to_resolution_business_seconds integer,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT ticket_response_metrics_pkey PRIMARY KEY (id),
  CONSTRAINT ticket_response_metrics_ticket_id_fkey FOREIGN KEY (ticket_id) REFERENCES public.tickets(id)
);
CREATE TABLE public.ticket_responses (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  ticket_id uuid NOT NULL,
  user_id uuid NOT NULL,
  responder_role character varying NOT NULL CHECK (responder_role::text = ANY (ARRAY['creator'::character varying, 'assignee'::character varying, 'ops'::character varying, 'admin'::character varying]::text[])),
  ticket_stage character varying,
  responded_at timestamp with time zone DEFAULT now(),
  response_time_seconds integer,
  comment_id uuid,
  sla_target_seconds integer,
  sla_met boolean,
  created_at timestamp with time zone DEFAULT now(),
  CONSTRAINT ticket_responses_pkey PRIMARY KEY (id),
  CONSTRAINT ticket_responses_ticket_id_fkey FOREIGN KEY (ticket_id) REFERENCES public.tickets(id),
  CONSTRAINT ticket_responses_user_id_fkey FOREIGN KEY (user_id) REFERENCES public.profiles(user_id),
  CONSTRAINT ticket_responses_comment_id_fkey FOREIGN KEY (comment_id) REFERENCES public.ticket_comments(id)
);
CREATE TABLE public.ticket_sequences (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  ticket_type USER-DEFINED NOT NULL,
  department USER-DEFINED NOT NULL,
  date_key character varying NOT NULL,
  last_sequence integer DEFAULT 0,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT ticket_sequences_pkey PRIMARY KEY (id)
);
CREATE TABLE public.ticket_sla_tracking (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  ticket_id uuid NOT NULL UNIQUE,
  first_response_at timestamp with time zone,
  first_response_sla_hours integer NOT NULL,
  first_response_met boolean,
  resolution_at timestamp with time zone,
  resolution_sla_hours integer NOT NULL,
  resolution_met boolean,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT ticket_sla_tracking_pkey PRIMARY KEY (id),
  CONSTRAINT ticket_sla_tracking_ticket_id_fkey FOREIGN KEY (ticket_id) REFERENCES public.tickets(id)
);
CREATE TABLE public.ticketing_sla_config (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  department USER-DEFINED NOT NULL,
  ticket_type USER-DEFINED NOT NULL,
  first_response_hours integer DEFAULT 24,
  resolution_hours integer DEFAULT 72,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  CONSTRAINT ticketing_sla_config_pkey PRIMARY KEY (id)
);
CREATE TABLE public.tickets (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  ticket_code character varying NOT NULL UNIQUE,
  ticket_type USER-DEFINED NOT NULL,
  status USER-DEFINED DEFAULT 'open'::ticket_status,
  priority USER-DEFINED DEFAULT 'medium'::ticket_priority,
  subject character varying NOT NULL,
  description text,
  department USER-DEFINED NOT NULL,
  account_id text,
  contact_id text,
  created_by uuid NOT NULL,
  assigned_to uuid,
  rfq_data jsonb,
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  first_response_at timestamp with time zone,
  resolved_at timestamp with time zone,
  closed_at timestamp with time zone,
  close_outcome USER-DEFINED,
  close_reason text,
  competitor_name character varying,
  competitor_cost numeric,
  pending_response_from USER-DEFINED DEFAULT 'assignee'::response_owner,
  sender_name character varying,
  sender_email character varying,
  sender_phone character varying,
  show_sender_to_ops boolean DEFAULT true,
  lead_id text,
  opportunity_id text,
  origin_department USER-DEFINED,
  origin_dept USER-DEFINED,
  target_dept USER-DEFINED,
  CONSTRAINT tickets_pkey PRIMARY KEY (id),
  CONSTRAINT tickets_account_id_fkey FOREIGN KEY (account_id) REFERENCES public.accounts(account_id),
  CONSTRAINT tickets_contact_id_fkey FOREIGN KEY (contact_id) REFERENCES public.contacts(contact_id),
  CONSTRAINT tickets_created_by_fkey FOREIGN KEY (created_by) REFERENCES public.profiles(user_id),
  CONSTRAINT tickets_assigned_to_fkey FOREIGN KEY (assigned_to) REFERENCES public.profiles(user_id),
  CONSTRAINT tickets_opportunity_id_fkey FOREIGN KEY (opportunity_id) REFERENCES public.opportunities(opportunity_id),
  CONSTRAINT tickets_lead_id_fkey FOREIGN KEY (lead_id) REFERENCES public.leads(lead_id),
  CONSTRAINT fk_tickets_lead FOREIGN KEY (lead_id) REFERENCES public.leads(lead_id),
  CONSTRAINT fk_tickets_opportunity FOREIGN KEY (opportunity_id) REFERENCES public.opportunities(opportunity_id)
);


DATA TABEL
| table_schema | table_name                         | ordinal_position | column_name                              | data_type                   | is_nullable | column_default                                                                                             | foreign_keys                                                                                                                                                                  |
| ------------ | ---------------------------------- | ---------------- | ---------------------------------------- | --------------------------- | ----------- | ---------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| auth         | audit_log_entries                  | 1                | instance_id                              | uuid                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | audit_log_entries                  | 2                | id                                       | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | audit_log_entries                  | 3                | payload                                  | json                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | audit_log_entries                  | 4                | created_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | audit_log_entries                  | 5                | ip_address                               | character varying(64)       | NO          | ''::character varying                                                                                      |                                                                                                                                                                               |
| auth         | flow_state                         | 1                | id                                       | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | flow_state                         | 2                | user_id                                  | uuid                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | flow_state                         | 3                | auth_code                                | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | flow_state                         | 4                | code_challenge_method                    | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | flow_state                         | 5                | code_challenge                           | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | flow_state                         | 6                | provider_type                            | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | flow_state                         | 7                | provider_access_token                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | flow_state                         | 8                | provider_refresh_token                   | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | flow_state                         | 9                | created_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | flow_state                         | 10               | updated_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | flow_state                         | 11               | authentication_method                    | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | flow_state                         | 12               | auth_code_issued_at                      | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | identities                         | 1                | provider_id                              | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | identities                         | 2                | user_id                                  | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | identities                         | 3                | identity_data                            | jsonb                       | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | identities                         | 4                | provider                                 | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | identities                         | 5                | last_sign_in_at                          | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | identities                         | 6                | created_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | identities                         | 7                | updated_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | identities                         | 8                | email                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | identities                         | 9                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| auth         | instances                          | 1                | id                                       | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | instances                          | 2                | uuid                                     | uuid                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | instances                          | 3                | raw_base_config                          | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | instances                          | 4                | created_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | instances                          | 5                | updated_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_amr_claims                     | 1                | session_id                               | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_amr_claims                     | 2                | created_at                               | timestamp with time zone    | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_amr_claims                     | 3                | updated_at                               | timestamp with time zone    | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_amr_claims                     | 4                | authentication_method                    | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_amr_claims                     | 5                | id                                       | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_challenges                     | 1                | id                                       | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_challenges                     | 2                | factor_id                                | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_challenges                     | 3                | created_at                               | timestamp with time zone    | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_challenges                     | 4                | verified_at                              | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_challenges                     | 5                | ip_address                               | inet                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_challenges                     | 6                | otp_code                                 | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_challenges                     | 7                | web_authn_session_data                   | jsonb                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_factors                        | 1                | id                                       | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_factors                        | 2                | user_id                                  | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_factors                        | 3                | friendly_name                            | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_factors                        | 4                | factor_type                              | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_factors                        | 5                | status                                   | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_factors                        | 6                | created_at                               | timestamp with time zone    | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_factors                        | 7                | updated_at                               | timestamp with time zone    | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_factors                        | 8                | secret                                   | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_factors                        | 9                | phone                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_factors                        | 10               | last_challenged_at                       | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_factors                        | 11               | web_authn_credential                     | jsonb                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_factors                        | 12               | web_authn_aaguid                         | uuid                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | mfa_factors                        | 13               | last_webauthn_challenge_data             | jsonb                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_authorizations               | 1                | id                                       | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_authorizations               | 2                | authorization_id                         | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_authorizations               | 3                | client_id                                | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_authorizations               | 4                | user_id                                  | uuid                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_authorizations               | 5                | redirect_uri                             | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_authorizations               | 6                | scope                                    | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_authorizations               | 7                | state                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_authorizations               | 8                | resource                                 | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_authorizations               | 9                | code_challenge                           | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_authorizations               | 10               | code_challenge_method                    | USER-DEFINED                | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_authorizations               | 11               | response_type                            | USER-DEFINED                | NO          | 'code'::auth.oauth_response_type                                                                           |                                                                                                                                                                               |
| auth         | oauth_authorizations               | 12               | status                                   | USER-DEFINED                | NO          | 'pending'::auth.oauth_authorization_status                                                                 |                                                                                                                                                                               |
| auth         | oauth_authorizations               | 13               | authorization_code                       | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_authorizations               | 14               | created_at                               | timestamp with time zone    | NO          | now()                                                                                                      |                                                                                                                                                                               |
| auth         | oauth_authorizations               | 15               | expires_at                               | timestamp with time zone    | NO          | (now() + '00:03:00'::interval)                                                                             |                                                                                                                                                                               |
| auth         | oauth_authorizations               | 16               | approved_at                              | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_authorizations               | 17               | nonce                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_client_states                | 1                | id                                       | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_client_states                | 2                | provider_type                            | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_client_states                | 3                | code_verifier                            | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_client_states                | 4                | created_at                               | timestamp with time zone    | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_clients                      | 1                | id                                       | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_clients                      | 3                | client_secret_hash                       | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_clients                      | 4                | registration_type                        | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_clients                      | 5                | redirect_uris                            | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_clients                      | 6                | grant_types                              | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_clients                      | 7                | client_name                              | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_clients                      | 8                | client_uri                               | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_clients                      | 9                | logo_uri                                 | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_clients                      | 10               | created_at                               | timestamp with time zone    | NO          | now()                                                                                                      |                                                                                                                                                                               |
| auth         | oauth_clients                      | 11               | updated_at                               | timestamp with time zone    | NO          | now()                                                                                                      |                                                                                                                                                                               |
| auth         | oauth_clients                      | 12               | deleted_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_clients                      | 13               | client_type                              | USER-DEFINED                | NO          | 'confidential'::auth.oauth_client_type                                                                     |                                                                                                                                                                               |
| auth         | oauth_consents                     | 1                | id                                       | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_consents                     | 2                | user_id                                  | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_consents                     | 3                | client_id                                | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_consents                     | 4                | scopes                                   | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | oauth_consents                     | 5                | granted_at                               | timestamp with time zone    | NO          | now()                                                                                                      |                                                                                                                                                                               |
| auth         | oauth_consents                     | 6                | revoked_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | one_time_tokens                    | 1                | id                                       | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | one_time_tokens                    | 2                | user_id                                  | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | one_time_tokens                    | 3                | token_type                               | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | one_time_tokens                    | 4                | token_hash                               | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | one_time_tokens                    | 5                | relates_to                               | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | one_time_tokens                    | 6                | created_at                               | timestamp without time zone | NO          | now()                                                                                                      |                                                                                                                                                                               |
| auth         | one_time_tokens                    | 7                | updated_at                               | timestamp without time zone | NO          | now()                                                                                                      |                                                                                                                                                                               |
| auth         | refresh_tokens                     | 1                | instance_id                              | uuid                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | refresh_tokens                     | 2                | id                                       | bigint(64)                  | NO          | nextval('auth.refresh_tokens_id_seq'::regclass)                                                            |                                                                                                                                                                               |
| auth         | refresh_tokens                     | 3                | token                                    | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | refresh_tokens                     | 4                | user_id                                  | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | refresh_tokens                     | 5                | revoked                                  | boolean                     | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | refresh_tokens                     | 6                | created_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | refresh_tokens                     | 7                | updated_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | refresh_tokens                     | 8                | parent                                   | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | refresh_tokens                     | 9                | session_id                               | uuid                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | saml_providers                     | 1                | id                                       | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | saml_providers                     | 2                | sso_provider_id                          | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | saml_providers                     | 3                | entity_id                                | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | saml_providers                     | 4                | metadata_xml                             | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | saml_providers                     | 5                | metadata_url                             | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | saml_providers                     | 6                | attribute_mapping                        | jsonb                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | saml_providers                     | 7                | created_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | saml_providers                     | 8                | updated_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | saml_providers                     | 9                | name_id_format                           | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | saml_relay_states                  | 1                | id                                       | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | saml_relay_states                  | 2                | sso_provider_id                          | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | saml_relay_states                  | 3                | request_id                               | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | saml_relay_states                  | 4                | for_email                                | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | saml_relay_states                  | 5                | redirect_to                              | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | saml_relay_states                  | 7                | created_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | saml_relay_states                  | 8                | updated_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | saml_relay_states                  | 9                | flow_state_id                            | uuid                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | schema_migrations                  | 1                | version                                  | character varying(255)      | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | sessions                           | 1                | id                                       | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | sessions                           | 2                | user_id                                  | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | sessions                           | 3                | created_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | sessions                           | 4                | updated_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | sessions                           | 5                | factor_id                                | uuid                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | sessions                           | 6                | aal                                      | USER-DEFINED                | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | sessions                           | 7                | not_after                                | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | sessions                           | 8                | refreshed_at                             | timestamp without time zone | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | sessions                           | 9                | user_agent                               | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | sessions                           | 10               | ip                                       | inet                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | sessions                           | 11               | tag                                      | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | sessions                           | 12               | oauth_client_id                          | uuid                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | sessions                           | 13               | refresh_token_hmac_key                   | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | sessions                           | 14               | refresh_token_counter                    | bigint(64)                  | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | sessions                           | 15               | scopes                                   | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | sso_domains                        | 1                | id                                       | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | sso_domains                        | 2                | sso_provider_id                          | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | sso_domains                        | 3                | domain                                   | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | sso_domains                        | 4                | created_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | sso_domains                        | 5                | updated_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | sso_providers                      | 1                | id                                       | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | sso_providers                      | 2                | resource_id                              | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | sso_providers                      | 3                | created_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | sso_providers                      | 4                | updated_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | sso_providers                      | 5                | disabled                                 | boolean                     | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 1                | instance_id                              | uuid                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 2                | id                                       | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 3                | aud                                      | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 4                | role                                     | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 5                | email                                    | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 6                | encrypted_password                       | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 7                | email_confirmed_at                       | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 8                | invited_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 9                | confirmation_token                       | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 10               | confirmation_sent_at                     | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 11               | recovery_token                           | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 12               | recovery_sent_at                         | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 13               | email_change_token_new                   | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 14               | email_change                             | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 15               | email_change_sent_at                     | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 16               | last_sign_in_at                          | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 17               | raw_app_meta_data                        | jsonb                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 18               | raw_user_meta_data                       | jsonb                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 19               | is_super_admin                           | boolean                     | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 20               | created_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 21               | updated_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 22               | phone                                    | text                        | YES         | NULL::character varying                                                                                    |                                                                                                                                                                               |
| auth         | users                              | 23               | phone_confirmed_at                       | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 24               | phone_change                             | text                        | YES         | ''::character varying                                                                                      |                                                                                                                                                                               |
| auth         | users                              | 25               | phone_change_token                       | character varying(255)      | YES         | ''::character varying                                                                                      |                                                                                                                                                                               |
| auth         | users                              | 26               | phone_change_sent_at                     | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 27               | confirmed_at                             | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 28               | email_change_token_current               | character varying(255)      | YES         | ''::character varying                                                                                      |                                                                                                                                                                               |
| auth         | users                              | 29               | email_change_confirm_status              | smallint(16)                | YES         | 0                                                                                                          |                                                                                                                                                                               |
| auth         | users                              | 30               | banned_until                             | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 31               | reauthentication_token                   | character varying(255)      | YES         | ''::character varying                                                                                      |                                                                                                                                                                               |
| auth         | users                              | 32               | reauthentication_sent_at                 | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 33               | is_sso_user                              | boolean                     | NO          | false                                                                                                      |                                                                                                                                                                               |
| auth         | users                              | 34               | deleted_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| auth         | users                              | 35               | is_anonymous                             | boolean                     | NO          | false                                                                                                      |                                                                                                                                                                               |
| public       | accounts                           | 1                | account_id                               | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 2                | company_name                             | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 3                | domain                                   | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 4                | npwp                                     | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 5                | industry                                 | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 6                | address                                  | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 7                | city                                     | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 8                | province                                 | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 9                | country                                  | text                        | YES         | 'Indonesia'::text                                                                                          |                                                                                                                                                                               |
| public       | accounts                           | 10               | postal_code                              | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 11               | phone                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 12               | pic_name                                 | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 13               | pic_email                                | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 14               | pic_phone                                | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 15               | owner_user_id                            | uuid                        | YES         | null                                                                                                       | accounts_owner_user_id_fkey: references public.profiles(user_id)                                                                                                              |
| public       | accounts                           | 16               | tenure_status                            | USER-DEFINED                | YES         | 'Prospect'::account_tenure_status                                                                          |                                                                                                                                                                               |
| public       | accounts                           | 17               | activity_status                          | USER-DEFINED                | YES         | 'Inactive'::account_activity_status                                                                        |                                                                                                                                                                               |
| public       | accounts                           | 18               | first_deal_date                          | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 19               | last_transaction_date                    | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 20               | is_active                                | boolean                     | YES         | true                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 21               | tags                                     | ARRAY                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 22               | notes                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 23               | dedupe_key                               | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 24               | created_by                               | uuid                        | YES         | null                                                                                                       | accounts_created_by_fkey: references public.profiles(user_id)                                                                                                                 |
| public       | accounts                           | 25               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | accounts                           | 26               | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | accounts                           | 27               | account_status                           | USER-DEFINED                | YES         | 'calon_account'::account_status                                                                            |                                                                                                                                                                               |
| public       | accounts                           | 28               | first_transaction_date                   | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | accounts                           | 29               | lead_id                                  | text                        | YES         | null                                                                                                       | accounts_lead_id_fkey: references public.leads(lead_id)                                                                                                                       |
| public       | accounts                           | 30               | retry_count                              | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | accounts                           | 31               | original_lead_id                         | text                        | YES         | null                                                                                                       | accounts_original_lead_id_fkey: references public.leads(lead_id)                                                                                                              |
| public       | accounts                           | 32               | original_creator_id                      | uuid                        | YES         | null                                                                                                       | accounts_original_creator_id_fkey: references public.profiles(user_id)                                                                                                        |
| public       | activities                         | 1                | activity_id                              | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | activities                         | 2                | activity_type                            | USER-DEFINED                | NO          | 'Task'::activity_type_v2                                                                                   |                                                                                                                                                                               |
| public       | activities                         | 3                | subject                                  | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | activities                         | 4                | description                              | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | activities                         | 5                | outcome                                  | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | activities                         | 6                | status                                   | USER-DEFINED                | NO          | 'Planned'::activity_status                                                                                 |                                                                                                                                                                               |
| public       | activities                         | 7                | due_date                                 | date                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | activities                         | 8                | due_time                                 | time without time zone      | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | activities                         | 9                | completed_at                             | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | activities                         | 10               | related_account_id                       | text                        | YES         | null                                                                                                       | activities_related_account_id_fkey: references public.accounts(account_id)                                                                                                    |
| public       | activities                         | 11               | related_contact_id                       | text                        | YES         | null                                                                                                       | activities_related_contact_id_fkey: references public.contacts(contact_id)                                                                                                    |
| public       | activities                         | 12               | related_opportunity_id                   | text                        | YES         | null                                                                                                       | activities_related_opportunity_id_fkey: references public.opportunities(opportunity_id)                                                                                       |
| public       | activities                         | 13               | related_lead_id                          | text                        | YES         | null                                                                                                       | activities_related_lead_id_fkey: references public.leads(lead_id)                                                                                                             |
| public       | activities                         | 15               | cadence_enrollment_id                    | bigint(64)                  | YES         | null                                                                                                       | activities_cadence_enrollment_fkey: references public.cadence_enrollments(enrollment_id)                                                                                      |
| public       | activities                         | 16               | cadence_step_number                      | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | activities                         | 17               | owner_user_id                            | uuid                        | NO          | null                                                                                                       | activities_owner_user_id_fkey: references public.profiles(user_id)                                                                                                            |
| public       | activities                         | 18               | assigned_to                              | uuid                        | YES         | null                                                                                                       | activities_assigned_to_fkey: references public.profiles(user_id)                                                                                                              |
| public       | activities                         | 19               | created_by                               | uuid                        | YES         | null                                                                                                       | activities_created_by_fkey: references public.profiles(user_id)                                                                                                               |
| public       | activities                         | 20               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | activities                         | 21               | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | audit_logs                         | 1                | log_id                                   | bigint(64)                  | NO          | nextval('audit_logs_log_id_seq'::regclass)                                                                 |                                                                                                                                                                               |
| public       | audit_logs                         | 2                | user_id                                  | uuid                        | YES         | null                                                                                                       | audit_logs_user_id_fkey: references public.profiles(user_id)                                                                                                                  |
| public       | audit_logs                         | 3                | module                                   | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | audit_logs                         | 4                | action                                   | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | audit_logs                         | 5                | record_id                                | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | audit_logs                         | 6                | record_type                              | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | audit_logs                         | 7                | before_data                              | jsonb                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | audit_logs                         | 8                | after_data                               | jsonb                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | audit_logs                         | 9                | correlation_id                           | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | audit_logs                         | 10               | ip_address                               | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | audit_logs                         | 11               | user_agent                               | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | audit_logs                         | 12               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | cadence_enrollments                | 1                | enrollment_id                            | bigint(64)                  | NO          | nextval('cadence_enrollments_enrollment_id_seq'::regclass)                                                 |                                                                                                                                                                               |
| public       | cadence_enrollments                | 2                | cadence_id                               | integer(32)                 | NO          | null                                                                                                       | cadence_enrollments_cadence_id_fkey: references public.cadences(cadence_id)                                                                                                   |
| public       | cadence_enrollments                | 3                | account_id                               | text                        | YES         | null                                                                                                       | cadence_enrollments_account_id_fkey: references public.accounts(account_id)                                                                                                   |
| public       | cadence_enrollments                | 4                | contact_id                               | text                        | YES         | null                                                                                                       | cadence_enrollments_contact_id_fkey: references public.contacts(contact_id)                                                                                                   |
| public       | cadence_enrollments                | 5                | opportunity_id                           | text                        | YES         | null                                                                                                       | cadence_enrollments_opportunity_id_fkey: references public.opportunities(opportunity_id)                                                                                      |
| public       | cadence_enrollments                | 7                | current_step                             | integer(32)                 | YES         | 1                                                                                                          |                                                                                                                                                                               |
| public       | cadence_enrollments                | 8                | status                                   | USER-DEFINED                | YES         | 'Active'::cadence_enrollment_status                                                                        |                                                                                                                                                                               |
| public       | cadence_enrollments                | 9                | enrolled_by                              | uuid                        | YES         | null                                                                                                       | cadence_enrollments_enrolled_by_fkey: references public.profiles(user_id)                                                                                                     |
| public       | cadence_enrollments                | 10               | enrolled_at                              | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | cadence_enrollments                | 11               | completed_at                             | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | cadence_enrollments                | 12               | stopped_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | cadence_enrollments                | 13               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | cadence_enrollments                | 14               | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | cadence_steps                      | 1                | step_id                                  | integer(32)                 | NO          | nextval('cadence_steps_step_id_seq'::regclass)                                                             |                                                                                                                                                                               |
| public       | cadence_steps                      | 2                | cadence_id                               | integer(32)                 | NO          | null                                                                                                       | cadence_steps_cadence_id_fkey: references public.cadences(cadence_id)                                                                                                         |
| public       | cadence_steps                      | 3                | step_number                              | integer(32)                 | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | cadence_steps                      | 4                | activity_type                            | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | cadence_steps                      | 5                | subject_template                         | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | cadence_steps                      | 6                | description_template                     | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | cadence_steps                      | 7                | delay_days                               | integer(32)                 | NO          | 0                                                                                                          |                                                                                                                                                                               |
| public       | cadence_steps                      | 8                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | cadences                           | 1                | cadence_id                               | integer(32)                 | NO          | nextval('cadences_cadence_id_seq'::regclass)                                                               |                                                                                                                                                                               |
| public       | cadences                           | 2                | name                                     | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | cadences                           | 3                | description                              | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | cadences                           | 4                | is_active                                | boolean                     | YES         | true                                                                                                       |                                                                                                                                                                               |
| public       | cadences                           | 5                | owner_user_id                            | uuid                        | YES         | null                                                                                                       | cadences_owner_user_id_fkey: references public.profiles(user_id)                                                                                                              |
| public       | cadences                           | 6                | created_by                               | uuid                        | YES         | null                                                                                                       | cadences_created_by_fkey: references public.profiles(user_id)                                                                                                                 |
| public       | cadences                           | 7                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | cadences                           | 8                | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | contacts                           | 1                | contact_id                               | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | contacts                           | 2                | account_id                               | text                        | NO          | null                                                                                                       | contacts_account_id_fkey: references public.accounts(account_id)                                                                                                              |
| public       | contacts                           | 3                | first_name                               | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | contacts                           | 4                | last_name                                | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | contacts                           | 5                | email                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | contacts                           | 6                | phone                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | contacts                           | 7                | mobile                                   | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | contacts                           | 8                | job_title                                | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | contacts                           | 9                | department                               | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | contacts                           | 10               | is_primary                               | boolean                     | YES         | false                                                                                                      |                                                                                                                                                                               |
| public       | contacts                           | 11               | notes                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | contacts                           | 12               | created_by                               | uuid                        | YES         | null                                                                                                       | contacts_created_by_fkey: references public.profiles(user_id)                                                                                                                 |
| public       | contacts                           | 13               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | contacts                           | 14               | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | crm_idempotency                    | 1                | idempotency_key                          | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | crm_idempotency                    | 2                | request_fingerprint                      | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | crm_idempotency                    | 3                | response                                 | jsonb                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | crm_idempotency                    | 4                | expires_at                               | timestamp with time zone    | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | crm_idempotency                    | 5                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | crm_notification_logs              | 1                | id                                       | bigint(64)                  | NO          | nextval('crm_notification_logs_id_seq'::regclass)                                                          |                                                                                                                                                                               |
| public       | crm_notification_logs              | 2                | entity_type                              | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | crm_notification_logs              | 3                | entity_id                                | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | crm_notification_logs              | 4                | event                                    | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | crm_notification_logs              | 5                | threshold                                | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | crm_notification_logs              | 6                | recipient_emails                         | ARRAY                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | crm_notification_logs              | 7                | cc_emails                                | ARRAY                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | crm_notification_logs              | 8                | subject                                  | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | crm_notification_logs              | 9                | status                                   | text                        | NO          | 'sent'::text                                                                                               |                                                                                                                                                                               |
| public       | crm_notification_logs              | 10               | error_message                            | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | crm_notification_logs              | 11               | metadata                                 | jsonb                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | crm_notification_logs              | 12               | sent_at                                  | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | crm_notification_logs              | 13               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | customer_quotation_items           | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | customer_quotation_items           | 2                | quotation_id                             | uuid                        | NO          | null                                                                                                       | customer_quotation_items_quotation_id_fkey: references public.customer_quotations(id)                                                                                         |
| public       | customer_quotation_items           | 3                | component_type                           | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotation_items           | 4                | component_name                           | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotation_items           | 5                | description                              | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotation_items           | 6                | cost_amount                              | numeric(15)                 | NO          | 0                                                                                                          |                                                                                                                                                                               |
| public       | customer_quotation_items           | 7                | target_margin_percent                    | numeric(5)                  | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | customer_quotation_items           | 8                | selling_rate                             | numeric(15)                 | NO          | 0                                                                                                          |                                                                                                                                                                               |
| public       | customer_quotation_items           | 9                | unit_price                               | numeric(15)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotation_items           | 10               | quantity                                 | numeric(10)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotation_items           | 11               | unit                                     | character varying(50)       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotation_items           | 12               | sort_order                               | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | customer_quotation_items           | 13               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | customer_quotation_items           | 14               | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | customer_quotation_sequences       | 1                | year                                     | integer(32)                 | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotation_sequences       | 2                | month                                    | integer(32)                 | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotation_sequences       | 3                | last_sequence                            | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | customer_quotations                | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | customer_quotations                | 2                | ticket_id                                | uuid                        | YES         | null                                                                                                       | customer_quotations_ticket_id_fkey: references public.tickets(id)                                                                                                             |
| public       | customer_quotations                | 3                | operational_cost_id                      | uuid                        | YES         | null                                                                                                       | customer_quotations_operational_cost_id_fkey: references public.ticket_rate_quotes(id)                                                                                        |
| public       | customer_quotations                | 4                | quotation_number                         | character varying(50)       | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 5                | customer_name                            | character varying(255)      | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 6                | customer_company                         | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 7                | customer_email                           | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 8                | customer_phone                           | character varying(50)       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 9                | customer_address                         | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 10               | service_type                             | character varying(100)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 11               | service_type_code                        | character varying(20)       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 12               | fleet_type                               | character varying(100)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 13               | fleet_quantity                           | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 14               | incoterm                                 | character varying(20)       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 15               | commodity                                | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 16               | cargo_description                        | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 17               | cargo_weight                             | numeric(15)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 18               | cargo_weight_unit                        | character varying(10)       | YES         | 'kg'::character varying                                                                                    |                                                                                                                                                                               |
| public       | customer_quotations                | 19               | cargo_volume                             | numeric(15)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 20               | cargo_volume_unit                        | character varying(10)       | YES         | 'cbm'::character varying                                                                                   |                                                                                                                                                                               |
| public       | customer_quotations                | 21               | cargo_quantity                           | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 22               | cargo_quantity_unit                      | character varying(50)       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 23               | origin_address                           | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 24               | origin_city                              | character varying(100)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 25               | origin_country                           | character varying(100)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 26               | origin_port                              | character varying(100)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 27               | destination_address                      | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 28               | destination_city                         | character varying(100)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 29               | destination_country                      | character varying(100)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 30               | destination_port                         | character varying(100)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 31               | rate_structure                           | USER-DEFINED                | NO          | 'bundling'::rate_structure_type                                                                            |                                                                                                                                                                               |
| public       | customer_quotations                | 32               | total_cost                               | numeric(15)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 33               | target_margin_percent                    | numeric(5)                  | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 34               | total_selling_rate                       | numeric(15)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 35               | currency                                 | character varying(3)        | YES         | 'IDR'::character varying                                                                                   |                                                                                                                                                                               |
| public       | customer_quotations                | 36               | scope_of_work                            | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 37               | terms_includes                           | jsonb                       | YES         | '[]'::jsonb                                                                                                |                                                                                                                                                                               |
| public       | customer_quotations                | 38               | terms_excludes                           | jsonb                       | YES         | '[]'::jsonb                                                                                                |                                                                                                                                                                               |
| public       | customer_quotations                | 39               | terms_notes                              | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 40               | validity_days                            | integer(32)                 | YES         | 14                                                                                                         |                                                                                                                                                                               |
| public       | customer_quotations                | 41               | valid_until                              | date                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 42               | status                                   | USER-DEFINED                | YES         | 'draft'::customer_quotation_status                                                                         |                                                                                                                                                                               |
| public       | customer_quotations                | 43               | pdf_url                                  | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 44               | pdf_generated_at                         | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 45               | sent_via                                 | character varying(20)       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 46               | sent_at                                  | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 47               | sent_to                                  | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 48               | validation_code                          | uuid                        | YES         | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | customer_quotations                | 49               | created_by                               | uuid                        | NO          | null                                                                                                       | customer_quotations_created_by_fkey: references public.profiles(user_id)                                                                                                      |
| public       | customer_quotations                | 50               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | customer_quotations                | 51               | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | customer_quotations                | 52               | estimated_leadtime                       | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 53               | estimated_cargo_value                    | numeric                     | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | customer_quotations                | 54               | cargo_value_currency                     | text                        | YES         | 'IDR'::text                                                                                                |                                                                                                                                                                               |
| public       | customer_quotations                | 55               | lead_id                                  | text                        | YES         | null                                                                                                       | customer_quotations_lead_id_fkey: references public.leads(lead_id); fk_customer_quotations_lead: references public.leads(lead_id)                                             |
| public       | customer_quotations                | 56               | opportunity_id                           | text                        | YES         | null                                                                                                       | customer_quotations_opportunity_id_fkey: references public.opportunities(opportunity_id); fk_customer_quotations_opportunity: references public.opportunities(opportunity_id) |
| public       | customer_quotations                | 57               | sequence_number                          | integer(32)                 | YES         | 1                                                                                                          |                                                                                                                                                                               |
| public       | customer_quotations                | 58               | source_type                              | character varying(20)       | YES         | 'ticket'::character varying                                                                                |                                                                                                                                                                               |
| public       | customer_quotations                | 59               | rejection_reason                         | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | import_batches                     | 1                | batch_id                                 | bigint(64)                  | NO          | nextval('import_batches_batch_id_seq'::regclass)                                                           |                                                                                                                                                                               |
| public       | import_batches                     | 2                | entity_type                              | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | import_batches                     | 3                | file_name                                | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | import_batches                     | 4                | file_url                                 | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | import_batches                     | 5                | status                                   | USER-DEFINED                | YES         | 'pending'::import_batch_status                                                                             |                                                                                                                                                                               |
| public       | import_batches                     | 6                | total_rows                               | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | import_batches                     | 7                | processed_rows                           | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | import_batches                     | 8                | success_rows                             | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | import_batches                     | 9                | error_rows                               | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | import_batches                     | 10               | errors                                   | jsonb                       | YES         | '[]'::jsonb                                                                                                |                                                                                                                                                                               |
| public       | import_batches                     | 11               | imported_by                              | uuid                        | NO          | null                                                                                                       | import_batches_imported_by_fkey: references public.profiles(user_id)                                                                                                          |
| public       | import_batches                     | 12               | started_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | import_batches                     | 13               | completed_at                             | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | import_batches                     | 14               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | insights_growth                    | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | insights_growth                    | 2                | scope_key                                | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | insights_growth                    | 3                | filters_hash                             | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | insights_growth                    | 4                | filters                                  | jsonb                       | NO          | '{}'::jsonb                                                                                                |                                                                                                                                                                               |
| public       | insights_growth                    | 5                | role_view                                | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | insights_growth                    | 6                | generated_by_user_id                     | uuid                        | YES         | null                                                                                                       | insights_growth_generated_by_user_id_fkey: references public.profiles(user_id)                                                                                                |
| public       | insights_growth                    | 7                | generated_at                             | timestamp with time zone    | NO          | now()                                                                                                      |                                                                                                                                                                               |
| public       | insights_growth                    | 8                | metrics_snapshot                         | jsonb                       | NO          | '{}'::jsonb                                                                                                |                                                                                                                                                                               |
| public       | insights_growth                    | 9                | insight_json                             | jsonb                       | NO          | '{}'::jsonb                                                                                                |                                                                                                                                                                               |
| public       | insights_growth                    | 10               | model                                    | text                        | YES         | 'gemini-1.5-flash'::text                                                                                   |                                                                                                                                                                               |
| public       | insights_growth                    | 11               | latency_ms                               | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | insights_growth                    | 12               | tokens_in                                | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | insights_growth                    | 13               | tokens_out                               | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | insights_growth                    | 14               | is_latest                                | boolean                     | NO          | true                                                                                                       |                                                                                                                                                                               |
| public       | insights_growth                    | 15               | status                                   | text                        | NO          | 'completed'::text                                                                                          |                                                                                                                                                                               |
| public       | insights_growth                    | 16               | error_message                            | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | insights_growth                    | 17               | created_at                               | timestamp with time zone    | NO          | now()                                                                                                      |                                                                                                                                                                               |
| public       | insights_growth                    | 18               | updated_at                               | timestamp with time zone    | NO          | now()                                                                                                      |                                                                                                                                                                               |
| public       | lead_handover_pool                 | 1                | pool_id                                  | bigint(64)                  | NO          | nextval('lead_handover_pool_pool_id_seq'::regclass)                                                        |                                                                                                                                                                               |
| public       | lead_handover_pool                 | 2                | lead_id                                  | text                        | NO          | null                                                                                                       | lead_handover_pool_lead_id_fkey: references public.leads(lead_id)                                                                                                             |
| public       | lead_handover_pool                 | 3                | handed_over_by                           | uuid                        | NO          | null                                                                                                       | lead_handover_pool_handed_over_by_fkey: references public.profiles(user_id)                                                                                                   |
| public       | lead_handover_pool                 | 4                | handed_over_at                           | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | lead_handover_pool                 | 5                | handover_notes                           | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | lead_handover_pool                 | 6                | priority                                 | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | lead_handover_pool                 | 7                | claimed_by                               | uuid                        | YES         | null                                                                                                       | lead_handover_pool_claimed_by_fkey: references public.profiles(user_id)                                                                                                       |
| public       | lead_handover_pool                 | 8                | claimed_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | lead_handover_pool                 | 9                | expires_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | lead_handover_pool                 | 10               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | leads                              | 1                | lead_id                                  | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 2                | company_name                             | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 3                | contact_name                             | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 4                | contact_email                            | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 5                | contact_phone                            | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 6                | contact_mobile                           | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 7                | job_title                                | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 8                | source                                   | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 9                | source_detail                            | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 10               | service_code                             | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 11               | service_description                      | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 12               | route                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 13               | origin                                   | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 14               | destination                              | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 15               | volume_estimate                          | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 16               | timeline                                 | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 17               | notes                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 18               | triage_status                            | USER-DEFINED                | NO          | 'New'::lead_triage_status                                                                                  |                                                                                                                                                                               |
| public       | leads                              | 19               | status                                   | USER-DEFINED                | YES         | 'New'::lead_status                                                                                         |                                                                                                                                                                               |
| public       | leads                              | 20               | handover_eligible                        | boolean                     | YES         | false                                                                                                      |                                                                                                                                                                               |
| public       | leads                              | 21               | marketing_owner_user_id                  | uuid                        | YES         | null                                                                                                       | leads_marketing_owner_user_id_fkey: references public.profiles(user_id)                                                                                                       |
| public       | leads                              | 22               | sales_owner_user_id                      | uuid                        | YES         | null                                                                                                       | leads_sales_owner_user_id_fkey: references public.profiles(user_id)                                                                                                           |
| public       | leads                              | 23               | opportunity_id                           | text                        | YES         | null                                                                                                       | leads_opportunity_id_fkey: references public.opportunities(opportunity_id)                                                                                                    |
| public       | leads                              | 24               | customer_id                              | text                        | YES         | null                                                                                                       | leads_customer_id_fkey: references public.accounts(account_id)                                                                                                                |
| public       | leads                              | 25               | qualified_at                             | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 26               | disqualified_at                          | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 27               | disqualified_reason                      | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 28               | handed_over_at                           | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 29               | claimed_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 30               | converted_at                             | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 31               | dedupe_key                               | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 32               | created_by                               | uuid                        | YES         | null                                                                                                       | leads_created_by_fkey: references public.profiles(user_id)                                                                                                                    |
| public       | leads                              | 33               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | leads                              | 34               | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | leads                              | 35               | priority                                 | integer(32)                 | YES         | 2                                                                                                          |                                                                                                                                                                               |
| public       | leads                              | 36               | industry                                 | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 37               | potential_revenue                        | numeric(15)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 38               | claim_status                             | USER-DEFINED                | YES         | 'unclaimed'::lead_claim_status                                                                             |                                                                                                                                                                               |
| public       | leads                              | 39               | claimed_by_name                          | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | leads                              | 40               | account_id                               | text                        | YES         | null                                                                                                       | leads_account_id_fkey: references public.accounts(account_id)                                                                                                                 |
| public       | leads                              | 41               | quotation_status                         | character varying(50)       | YES         | NULL::character varying                                                                                    |                                                                                                                                                                               |
| public       | leads                              | 42               | latest_quotation_id                      | uuid                        | YES         | null                                                                                                       | leads_latest_quotation_id_fkey: references public.customer_quotations(id)                                                                                                     |
| public       | leads                              | 43               | quotation_count                          | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | operational_cost_rejection_reasons | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | operational_cost_rejection_reasons | 2                | operational_cost_id                      | uuid                        | NO          | null                                                                                                       | operational_cost_rejection_reasons_operational_cost_id_fkey: references public.ticket_rate_quotes(id)                                                                         |
| public       | operational_cost_rejection_reasons | 3                | reason_type                              | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | operational_cost_rejection_reasons | 4                | suggested_amount                         | numeric(15)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | operational_cost_rejection_reasons | 5                | currency                                 | character varying(3)        | YES         | 'IDR'::character varying                                                                                   |                                                                                                                                                                               |
| public       | operational_cost_rejection_reasons | 6                | notes                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | operational_cost_rejection_reasons | 7                | created_by                               | uuid                        | NO          | null                                                                                                       | operational_cost_rejection_reasons_created_by_fkey: references public.profiles(user_id)                                                                                       |
| public       | operational_cost_rejection_reasons | 8                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | operational_cost_rejection_reasons | 9                | competitor_name                          | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | operational_cost_rejection_reasons | 10               | competitor_amount                        | numeric(15)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | operational_cost_rejection_reasons | 11               | customer_budget                          | numeric(15)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunities                      | 1                | opportunity_id                           | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunities                      | 2                | account_id                               | text                        | NO          | null                                                                                                       | opportunities_account_id_fkey: references public.accounts(account_id)                                                                                                         |
| public       | opportunities                      | 3                | primary_contact_id                       | text                        | YES         | null                                                                                                       | opportunities_primary_contact_id_fkey: references public.contacts(contact_id)                                                                                                 |
| public       | opportunities                      | 4                | source_lead_id                           | text                        | YES         | null                                                                                                       | opportunities_source_lead_id_fkey: references public.leads(lead_id)                                                                                                           |
| public       | opportunities                      | 6                | name                                     | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunities                      | 7                | description                              | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunities                      | 8                | service_codes                            | ARRAY                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunities                      | 9                | route                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunities                      | 10               | origin                                   | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunities                      | 11               | destination                              | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunities                      | 12               | estimated_value                          | numeric(15)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunities                      | 13               | currency                                 | text                        | YES         | 'IDR'::text                                                                                                |                                                                                                                                                                               |
| public       | opportunities                      | 14               | probability                              | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | opportunities                      | 15               | stage                                    | USER-DEFINED                | NO          | 'Prospecting'::opportunity_stage                                                                           |                                                                                                                                                                               |
| public       | opportunities                      | 16               | next_step                                | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunities                      | 17               | next_step_due_date                       | date                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunities                      | 18               | owner_user_id                            | uuid                        | NO          | null                                                                                                       | opportunities_owner_user_id_fkey: references public.profiles(user_id)                                                                                                         |
| public       | opportunities                      | 19               | closed_at                                | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunities                      | 20               | outcome                                  | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunities                      | 21               | lost_reason                              | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunities                      | 22               | competitor                               | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunities                      | 23               | created_by                               | uuid                        | YES         | null                                                                                                       | opportunities_created_by_fkey: references public.profiles(user_id)                                                                                                            |
| public       | opportunities                      | 24               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | opportunities                      | 25               | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | opportunities                      | 26               | competitor_price                         | numeric(15)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunities                      | 27               | customer_budget                          | numeric(15)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunities                      | 28               | attempt_number                           | integer(32)                 | YES         | 1                                                                                                          |                                                                                                                                                                               |
| public       | opportunities                      | 29               | original_creator_id                      | uuid                        | YES         | null                                                                                                       | opportunities_original_creator_id_fkey: references public.profiles(user_id)                                                                                                   |
| public       | opportunities                      | 30               | quotation_status                         | character varying(50)       | YES         | NULL::character varying                                                                                    |                                                                                                                                                                               |
| public       | opportunities                      | 31               | latest_quotation_id                      | uuid                        | YES         | null                                                                                                       | opportunities_latest_quotation_id_fkey: references public.customer_quotations(id)                                                                                             |
| public       | opportunities                      | 32               | quotation_count                          | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | opportunities                      | 33               | deal_value                               | numeric(15)                 | YES         | NULL::numeric                                                                                              |                                                                                                                                                                               |
| public       | opportunity_stage_history          | 1                | history_id                               | bigint(64)                  | NO          | nextval('opportunity_stage_history_history_id_seq'::regclass)                                              |                                                                                                                                                                               |
| public       | opportunity_stage_history          | 2                | opportunity_id                           | text                        | NO          | null                                                                                                       | opportunity_stage_history_opportunity_id_fkey: references public.opportunities(opportunity_id)                                                                                |
| public       | opportunity_stage_history          | 3                | from_stage                               | USER-DEFINED                | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunity_stage_history          | 4                | to_stage                                 | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunity_stage_history          | 5                | changed_by                               | uuid                        | NO          | null                                                                                                       | opportunity_stage_history_changed_by_fkey: references public.profiles(user_id)                                                                                                |
| public       | opportunity_stage_history          | 6                | changed_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | opportunity_stage_history          | 7                | reason                                   | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunity_stage_history          | 8                | notes                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunity_stage_history          | 9                | old_stage                                | USER-DEFINED                | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | opportunity_stage_history          | 10               | new_stage                                | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | pipeline_updates                   | 1                | update_id                                | text                        | NO          | (('PU'::text || to_char(now(), 'YYYYMMDD'::text)) || upper(SUBSTRING(md5((random())::text) FROM 1 FOR 8))) |                                                                                                                                                                               |
| public       | pipeline_updates                   | 2                | opportunity_id                           | text                        | NO          | null                                                                                                       | pipeline_updates_opportunity_id_fkey: references public.opportunities(opportunity_id)                                                                                         |
| public       | pipeline_updates                   | 3                | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | pipeline_updates                   | 4                | notes                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | pipeline_updates                   | 5                | approach_method                          | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | pipeline_updates                   | 6                | evidence_url                             | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | pipeline_updates                   | 7                | evidence_file_name                       | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | pipeline_updates                   | 8                | location_lat                             | numeric(10)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | pipeline_updates                   | 9                | location_lng                             | numeric(11)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | pipeline_updates                   | 10               | location_address                         | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | pipeline_updates                   | 11               | old_stage                                | USER-DEFINED                | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | pipeline_updates                   | 12               | new_stage                                | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | pipeline_updates                   | 13               | updated_by                               | uuid                        | YES         | null                                                                                                       | pipeline_updates_updated_by_fkey: references public.profiles(user_id)                                                                                                         |
| public       | pipeline_updates                   | 14               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | pipeline_updates                   | 15               | evidence_original_url                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | profiles                           | 1                | user_id                                  | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | profiles                           | 2                | email                                    | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | profiles                           | 3                | name                                     | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | profiles                           | 4                | role                                     | USER-DEFINED                | NO          | 'salesperson'::user_role                                                                                   |                                                                                                                                                                               |
| public       | profiles                           | 5                | department                               | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | profiles                           | 6                | avatar_url                               | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | profiles                           | 7                | is_active                                | boolean                     | YES         | true                                                                                                       |                                                                                                                                                                               |
| public       | profiles                           | 8                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | profiles                           | 9                | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | profiles                           | 10               | phone                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | quotation_rejection_reasons        | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | quotation_rejection_reasons        | 2                | quotation_id                             | uuid                        | NO          | null                                                                                                       | quotation_rejection_reasons_quotation_id_fkey: references public.customer_quotations(id)                                                                                      |
| public       | quotation_rejection_reasons        | 3                | reason_type                              | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | quotation_rejection_reasons        | 4                | competitor_name                          | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | quotation_rejection_reasons        | 5                | competitor_amount                        | numeric(15)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | quotation_rejection_reasons        | 6                | customer_budget                          | numeric(15)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | quotation_rejection_reasons        | 7                | currency                                 | character varying(3)        | YES         | 'IDR'::character varying                                                                                   |                                                                                                                                                                               |
| public       | quotation_rejection_reasons        | 8                | notes                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | quotation_rejection_reasons        | 9                | created_by                               | uuid                        | NO          | null                                                                                                       | quotation_rejection_reasons_created_by_fkey: references public.profiles(user_id)                                                                                              |
| public       | quotation_rejection_reasons        | 10               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | quotation_term_templates           | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | quotation_term_templates           | 2                | term_type                                | character varying(20)       | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | quotation_term_templates           | 3                | term_text                                | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | quotation_term_templates           | 4                | is_default                               | boolean                     | YES         | false                                                                                                      |                                                                                                                                                                               |
| public       | quotation_term_templates           | 5                | sort_order                               | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | quotation_term_templates           | 6                | is_active                                | boolean                     | YES         | true                                                                                                       |                                                                                                                                                                               |
| public       | quotation_term_templates           | 7                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | sales_plans                        | 1                | plan_id                                  | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 2                | plan_type                                | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 3                | company_name                             | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 4                | pic_name                                 | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 5                | pic_phone                                | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 6                | pic_email                                | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 7                | source_account_id                        | text                        | YES         | null                                                                                                       | sales_plans_source_account_id_fkey: references public.accounts(account_id)                                                                                                    |
| public       | sales_plans                        | 8                | planned_date                             | date                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 9                | planned_activity_method                  | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 10               | plan_notes                               | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 11               | status                                   | text                        | NO          | 'planned'::text                                                                                            |                                                                                                                                                                               |
| public       | sales_plans                        | 12               | realized_at                              | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 13               | actual_activity_method                   | USER-DEFINED                | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 14               | method_change_reason                     | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 15               | realization_notes                        | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 16               | evidence_url                             | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 17               | evidence_file_name                       | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 18               | evidence_original_url                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 19               | location_lat                             | numeric(10)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 20               | location_lng                             | numeric(11)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 21               | location_address                         | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 22               | potential_status                         | USER-DEFINED                | YES         | 'pending'::potential_status                                                                                |                                                                                                                                                                               |
| public       | sales_plans                        | 23               | not_potential_reason                     | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | sales_plans                        | 24               | created_lead_id                          | text                        | YES         | null                                                                                                       | sales_plans_created_lead_id_fkey: references public.leads(lead_id)                                                                                                            |
| public       | sales_plans                        | 25               | created_account_id                       | text                        | YES         | null                                                                                                       | sales_plans_created_account_id_fkey: references public.accounts(account_id)                                                                                                   |
| public       | sales_plans                        | 26               | created_opportunity_id                   | text                        | YES         | null                                                                                                       | sales_plans_created_opportunity_id_fkey: references public.opportunities(opportunity_id)                                                                                      |
| public       | sales_plans                        | 27               | owner_user_id                            | uuid                        | NO          | null                                                                                                       | sales_plans_owner_user_id_fkey: references public.profiles(user_id)                                                                                                           |
| public       | sales_plans                        | 28               | created_by                               | uuid                        | YES         | null                                                                                                       | sales_plans_created_by_fkey: references public.profiles(user_id)                                                                                                              |
| public       | sales_plans                        | 29               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | sales_plans                        | 30               | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | service_types                      | 1                | id                                       | integer(32)                 | NO          | nextval('service_types_id_seq'::regclass)                                                                  |                                                                                                                                                                               |
| public       | service_types                      | 2                | service_code                             | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | service_types                      | 3                | service_name                             | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | service_types                      | 4                | department                               | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | service_types                      | 5                | description                              | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | service_types                      | 6                | is_active                                | boolean                     | YES         | true                                                                                                       |                                                                                                                                                                               |
| public       | service_types                      | 7                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | shipment_attachments               | 1                | attachment_id                            | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_attachments               | 2                | shipment_detail_id                       | text                        | NO          | null                                                                                                       | shipment_attachments_shipment_detail_id_fkey: references public.shipment_details(shipment_detail_id)                                                                          |
| public       | shipment_attachments               | 3                | file_name                                | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_attachments               | 4                | file_path                                | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_attachments               | 5                | file_size                                | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_attachments               | 6                | file_type                                | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_attachments               | 7                | uploaded_by                              | uuid                        | YES         | null                                                                                                       | shipment_attachments_uploaded_by_fkey: references public.profiles(user_id)                                                                                                    |
| public       | shipment_attachments               | 8                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | shipment_details                   | 1                | shipment_detail_id                       | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 2                | lead_id                                  | text                        | NO          | null                                                                                                       | shipment_details_lead_id_fkey: references public.leads(lead_id)                                                                                                               |
| public       | shipment_details                   | 3                | service_type_id                          | integer(32)                 | YES         | null                                                                                                       | shipment_details_service_type_id_fkey: references public.service_types(id)                                                                                                    |
| public       | shipment_details                   | 4                | service_type_code                        | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 5                | department                               | USER-DEFINED                | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 6                | fleet_type                               | USER-DEFINED                | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 7                | fleet_quantity                           | integer(32)                 | YES         | 1                                                                                                          |                                                                                                                                                                               |
| public       | shipment_details                   | 8                | incoterm                                 | USER-DEFINED                | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 9                | cargo_category                           | USER-DEFINED                | YES         | 'General Cargo'::cargo_category                                                                            |                                                                                                                                                                               |
| public       | shipment_details                   | 10               | cargo_description                        | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 11               | origin_address                           | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 12               | origin_city                              | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 13               | origin_country                           | text                        | YES         | 'Indonesia'::text                                                                                          |                                                                                                                                                                               |
| public       | shipment_details                   | 14               | destination_address                      | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 15               | destination_city                         | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 16               | destination_country                      | text                        | YES         | 'Indonesia'::text                                                                                          |                                                                                                                                                                               |
| public       | shipment_details                   | 17               | quantity                                 | integer(32)                 | YES         | 1                                                                                                          |                                                                                                                                                                               |
| public       | shipment_details                   | 18               | unit_of_measure                          | USER-DEFINED                | YES         | 'Boxes'::unit_of_measure                                                                                   |                                                                                                                                                                               |
| public       | shipment_details                   | 19               | weight_per_unit_kg                       | numeric(10)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 20               | weight_total_kg                          | numeric(10)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 21               | length_cm                                | numeric(10)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 22               | width_cm                                 | numeric(10)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 23               | height_cm                                | numeric(10)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 24               | volume_total_cbm                         | numeric(10)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 25               | scope_of_work                            | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 26               | additional_services                      | ARRAY                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 27               | notes                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | shipment_details                   | 28               | created_by                               | uuid                        | YES         | null                                                                                                       | shipment_details_created_by_fkey: references public.profiles(user_id)                                                                                                         |
| public       | shipment_details                   | 29               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | shipment_details                   | 30               | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | sla_business_hours                 | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | sla_business_hours                 | 2                | day_of_week                              | integer(32)                 | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | sla_business_hours                 | 3                | is_working_day                           | boolean                     | YES         | true                                                                                                       |                                                                                                                                                                               |
| public       | sla_business_hours                 | 4                | start_time                               | time without time zone      | NO          | '08:00:00'::time without time zone                                                                         |                                                                                                                                                                               |
| public       | sla_business_hours                 | 5                | end_time                                 | time without time zone      | NO          | '18:00:00'::time without time zone                                                                         |                                                                                                                                                                               |
| public       | sla_business_hours                 | 6                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | sla_business_hours                 | 7                | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | sla_holidays                       | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | sla_holidays                       | 2                | holiday_date                             | date                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | sla_holidays                       | 3                | name                                     | character varying(255)      | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | sla_holidays                       | 4                | description                              | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | sla_holidays                       | 5                | is_recurring                             | boolean                     | YES         | false                                                                                                      |                                                                                                                                                                               |
| public       | sla_holidays                       | 6                | created_by                               | uuid                        | YES         | null                                                                                                       | sla_holidays_created_by_fkey: references public.profiles(user_id)                                                                                                             |
| public       | sla_holidays                       | 7                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | sla_holidays                       | 8                | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_assignments                 | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | ticket_assignments                 | 2                | ticket_id                                | uuid                        | NO          | null                                                                                                       | ticket_assignments_ticket_id_fkey: references public.tickets(id)                                                                                                              |
| public       | ticket_assignments                 | 3                | assigned_to                              | uuid                        | NO          | null                                                                                                       | ticket_assignments_assigned_to_fkey: references public.profiles(user_id)                                                                                                      |
| public       | ticket_assignments                 | 4                | assigned_by                              | uuid                        | NO          | null                                                                                                       | ticket_assignments_assigned_by_fkey: references public.profiles(user_id)                                                                                                      |
| public       | ticket_assignments                 | 5                | assigned_at                              | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_assignments                 | 6                | notes                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_attachments                 | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | ticket_attachments                 | 2                | ticket_id                                | uuid                        | NO          | null                                                                                                       | ticket_attachments_ticket_id_fkey: references public.tickets(id)                                                                                                              |
| public       | ticket_attachments                 | 3                | comment_id                               | uuid                        | YES         | null                                                                                                       | ticket_attachments_comment_id_fkey: references public.ticket_comments(id)                                                                                                     |
| public       | ticket_attachments                 | 4                | file_name                                | character varying(255)      | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_attachments                 | 5                | file_url                                 | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_attachments                 | 6                | file_type                                | character varying(100)      | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_attachments                 | 7                | file_size                                | integer(32)                 | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_attachments                 | 8                | uploaded_by                              | uuid                        | NO          | null                                                                                                       | ticket_attachments_uploaded_by_fkey: references public.profiles(user_id)                                                                                                      |
| public       | ticket_attachments                 | 9                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_attachments                 | 10               | file_path                                | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_comments                    | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | ticket_comments                    | 2                | ticket_id                                | uuid                        | NO          | null                                                                                                       | ticket_comments_ticket_id_fkey: references public.tickets(id)                                                                                                                 |
| public       | ticket_comments                    | 3                | user_id                                  | uuid                        | NO          | null                                                                                                       | ticket_comments_user_id_fkey: references public.profiles(user_id)                                                                                                             |
| public       | ticket_comments                    | 4                | content                                  | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_comments                    | 5                | is_internal                              | boolean                     | YES         | false                                                                                                      |                                                                                                                                                                               |
| public       | ticket_comments                    | 6                | response_time_seconds                    | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_comments                    | 7                | response_direction                       | character varying(20)       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_comments                    | 8                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_comments                    | 9                | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_events                      | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | ticket_events                      | 2                | ticket_id                                | uuid                        | NO          | null                                                                                                       | ticket_events_ticket_id_fkey: references public.tickets(id)                                                                                                                   |
| public       | ticket_events                      | 3                | event_type                               | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_events                      | 4                | actor_user_id                            | uuid                        | NO          | null                                                                                                       | ticket_events_actor_user_id_fkey: references public.profiles(user_id)                                                                                                         |
| public       | ticket_events                      | 5                | old_value                                | jsonb                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_events                      | 6                | new_value                                | jsonb                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_events                      | 7                | notes                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_events                      | 8                | ip_address                               | character varying(45)       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_events                      | 9                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_rate_quote_items            | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | ticket_rate_quote_items            | 2                | quote_id                                 | uuid                        | NO          | null                                                                                                       | ticket_rate_quote_items_quote_id_fkey: references public.ticket_rate_quotes(id)                                                                                               |
| public       | ticket_rate_quote_items            | 3                | component_type                           | character varying(100)      | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_rate_quote_items            | 4                | component_name                           | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_rate_quote_items            | 5                | description                              | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_rate_quote_items            | 6                | cost_amount                              | numeric(15)                 | NO          | 0                                                                                                          |                                                                                                                                                                               |
| public       | ticket_rate_quote_items            | 7                | quantity                                 | numeric(10)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_rate_quote_items            | 8                | unit                                     | character varying(50)       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_rate_quote_items            | 9                | sort_order                               | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | ticket_rate_quote_items            | 10               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_rate_quote_items            | 11               | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_rate_quotes                 | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | ticket_rate_quotes                 | 2                | ticket_id                                | uuid                        | NO          | null                                                                                                       | ticket_rate_quotes_ticket_id_fkey: references public.tickets(id)                                                                                                              |
| public       | ticket_rate_quotes                 | 3                | quote_number                             | character varying(30)       | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_rate_quotes                 | 4                | amount                                   | numeric(15)                 | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_rate_quotes                 | 5                | currency                                 | character varying(3)        | YES         | 'IDR'::character varying                                                                                   |                                                                                                                                                                               |
| public       | ticket_rate_quotes                 | 6                | valid_until                              | date                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_rate_quotes                 | 7                | terms                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_rate_quotes                 | 8                | status                                   | USER-DEFINED                | YES         | 'draft'::quote_status                                                                                      |                                                                                                                                                                               |
| public       | ticket_rate_quotes                 | 9                | created_by                               | uuid                        | NO          | null                                                                                                       | ticket_rate_quotes_created_by_fkey: references public.profiles(user_id)                                                                                                       |
| public       | ticket_rate_quotes                 | 10               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_rate_quotes                 | 11               | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_rate_quotes                 | 12               | rate_structure                           | character varying(20)       | YES         | 'bundling'::character varying                                                                              |                                                                                                                                                                               |
| public       | ticket_rate_quotes                 | 13               | customer_quotation_id                    | uuid                        | YES         | null                                                                                                       | fk_ticket_rate_quotes_customer_quotation: references public.customer_quotations(id); ticket_rate_quotes_customer_quotation_id_fkey: references public.customer_quotations(id) |
| public       | ticket_rate_quotes                 | 14               | lead_id                                  | text                        | YES         | null                                                                                                       | fk_ticket_rate_quotes_lead: references public.leads(lead_id); ticket_rate_quotes_lead_id_fkey: references public.leads(lead_id)                                               |
| public       | ticket_rate_quotes                 | 15               | opportunity_id                           | text                        | YES         | null                                                                                                       | fk_ticket_rate_quotes_opportunity: references public.opportunities(opportunity_id); ticket_rate_quotes_opportunity_id_fkey: references public.opportunities(opportunity_id)   |
| public       | ticket_response_exchanges          | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | ticket_response_exchanges          | 2                | ticket_id                                | uuid                        | NO          | null                                                                                                       | ticket_response_exchanges_ticket_id_fkey: references public.tickets(id)                                                                                                       |
| public       | ticket_response_exchanges          | 3                | responder_user_id                        | uuid                        | NO          | null                                                                                                       | ticket_response_exchanges_responder_user_id_fkey: references public.profiles(user_id)                                                                                         |
| public       | ticket_response_exchanges          | 4                | responder_type                           | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_response_exchanges          | 5                | comment_id                               | uuid                        | YES         | null                                                                                                       | ticket_response_exchanges_comment_id_fkey: references public.ticket_comments(id)                                                                                              |
| public       | ticket_response_exchanges          | 6                | previous_response_at                     | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_response_exchanges          | 7                | responded_at                             | timestamp with time zone    | NO          | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_response_exchanges          | 8                | raw_response_seconds                     | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_response_exchanges          | 9                | business_response_seconds                | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_response_exchanges          | 10               | exchange_number                          | integer(32)                 | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_response_exchanges          | 11               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_response_metrics            | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | ticket_response_metrics            | 2                | ticket_id                                | uuid                        | NO          | null                                                                                                       | ticket_response_metrics_ticket_id_fkey: references public.tickets(id)                                                                                                         |
| public       | ticket_response_metrics            | 3                | creator_total_responses                  | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | ticket_response_metrics            | 4                | creator_avg_response_seconds             | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | ticket_response_metrics            | 5                | creator_avg_business_response_seconds    | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | ticket_response_metrics            | 6                | assignee_total_responses                 | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | ticket_response_metrics            | 7                | assignee_avg_response_seconds            | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | ticket_response_metrics            | 8                | assignee_avg_business_response_seconds   | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | ticket_response_metrics            | 9                | assignee_first_response_seconds          | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_response_metrics            | 10               | assignee_first_response_business_seconds | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_response_metrics            | 11               | time_to_first_quote_seconds              | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_response_metrics            | 12               | time_to_first_quote_business_seconds     | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_response_metrics            | 13               | time_to_resolution_seconds               | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_response_metrics            | 14               | time_to_resolution_business_seconds      | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_response_metrics            | 15               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_response_metrics            | 16               | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_responses                   | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | ticket_responses                   | 2                | ticket_id                                | uuid                        | NO          | null                                                                                                       | ticket_responses_ticket_id_fkey: references public.tickets(id)                                                                                                                |
| public       | ticket_responses                   | 3                | user_id                                  | uuid                        | NO          | null                                                                                                       | ticket_responses_user_id_fkey: references public.profiles(user_id)                                                                                                            |
| public       | ticket_responses                   | 4                | responder_role                           | character varying(20)       | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_responses                   | 5                | ticket_stage                             | character varying(50)       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_responses                   | 6                | responded_at                             | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_responses                   | 7                | response_time_seconds                    | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_responses                   | 8                | comment_id                               | uuid                        | YES         | null                                                                                                       | ticket_responses_comment_id_fkey: references public.ticket_comments(id)                                                                                                       |
| public       | ticket_responses                   | 9                | sla_target_seconds                       | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_responses                   | 10               | sla_met                                  | boolean                     | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_responses                   | 11               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_sequences                   | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | ticket_sequences                   | 2                | ticket_type                              | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_sequences                   | 3                | department                               | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_sequences                   | 4                | date_key                                 | character varying(6)        | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_sequences                   | 5                | last_sequence                            | integer(32)                 | YES         | 0                                                                                                          |                                                                                                                                                                               |
| public       | ticket_sequences                   | 6                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_sequences                   | 7                | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_sla_tracking                | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | ticket_sla_tracking                | 2                | ticket_id                                | uuid                        | NO          | null                                                                                                       | ticket_sla_tracking_ticket_id_fkey: references public.tickets(id)                                                                                                             |
| public       | ticket_sla_tracking                | 3                | first_response_at                        | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_sla_tracking                | 4                | first_response_sla_hours                 | integer(32)                 | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_sla_tracking                | 5                | first_response_met                       | boolean                     | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_sla_tracking                | 6                | resolution_at                            | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_sla_tracking                | 7                | resolution_sla_hours                     | integer(32)                 | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_sla_tracking                | 8                | resolution_met                           | boolean                     | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | ticket_sla_tracking                | 9                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticket_sla_tracking                | 10               | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticketing_sla_config               | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | ticketing_sla_config               | 2                | department                               | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticketing_sla_config               | 3                | ticket_type                              | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | ticketing_sla_config               | 4                | first_response_hours                     | integer(32)                 | YES         | 24                                                                                                         |                                                                                                                                                                               |
| public       | ticketing_sla_config               | 5                | resolution_hours                         | integer(32)                 | YES         | 72                                                                                                         |                                                                                                                                                                               |
| public       | ticketing_sla_config               | 6                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | ticketing_sla_config               | 7                | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | tickets                            | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| public       | tickets                            | 2                | ticket_code                              | character varying(20)       | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 3                | ticket_type                              | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 4                | status                                   | USER-DEFINED                | YES         | 'open'::ticket_status                                                                                      |                                                                                                                                                                               |
| public       | tickets                            | 5                | priority                                 | USER-DEFINED                | YES         | 'medium'::ticket_priority                                                                                  |                                                                                                                                                                               |
| public       | tickets                            | 6                | subject                                  | character varying(255)      | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 7                | description                              | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 8                | department                               | USER-DEFINED                | NO          | null                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 9                | account_id                               | text                        | YES         | null                                                                                                       | tickets_account_id_fkey: references public.accounts(account_id)                                                                                                               |
| public       | tickets                            | 10               | contact_id                               | text                        | YES         | null                                                                                                       | tickets_contact_id_fkey: references public.contacts(contact_id)                                                                                                               |
| public       | tickets                            | 11               | created_by                               | uuid                        | NO          | null                                                                                                       | tickets_created_by_fkey: references public.profiles(user_id)                                                                                                                  |
| public       | tickets                            | 12               | assigned_to                              | uuid                        | YES         | null                                                                                                       | tickets_assigned_to_fkey: references public.profiles(user_id)                                                                                                                 |
| public       | tickets                            | 13               | rfq_data                                 | jsonb                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 14               | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | tickets                            | 15               | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| public       | tickets                            | 16               | first_response_at                        | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 17               | resolved_at                              | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 18               | closed_at                                | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 19               | close_outcome                            | USER-DEFINED                | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 20               | close_reason                             | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 21               | competitor_name                          | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 22               | competitor_cost                          | numeric(15)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 23               | pending_response_from                    | USER-DEFINED                | YES         | 'assignee'::response_owner                                                                                 |                                                                                                                                                                               |
| public       | tickets                            | 24               | sender_name                              | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 25               | sender_email                             | character varying(255)      | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 26               | sender_phone                             | character varying(50)       | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 27               | show_sender_to_ops                       | boolean                     | YES         | true                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 28               | lead_id                                  | text                        | YES         | null                                                                                                       | fk_tickets_lead: references public.leads(lead_id); tickets_lead_id_fkey: references public.leads(lead_id)                                                                     |
| public       | tickets                            | 29               | opportunity_id                           | text                        | YES         | null                                                                                                       | fk_tickets_opportunity: references public.opportunities(opportunity_id); tickets_opportunity_id_fkey: references public.opportunities(opportunity_id)                         |
| public       | tickets                            | 30               | origin_department                        | USER-DEFINED                | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 31               | origin_dept                              | USER-DEFINED                | YES         | null                                                                                                       |                                                                                                                                                                               |
| public       | tickets                            | 32               | target_dept                              | USER-DEFINED                | YES         | null                                                                                                       |                                                                                                                                                                               |
| realtime     | messages                           | 3                | topic                                    | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| realtime     | messages                           | 4                | extension                                | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| realtime     | messages                           | 5                | payload                                  | jsonb                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| realtime     | messages                           | 6                | event                                    | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| realtime     | messages                           | 7                | private                                  | boolean                     | YES         | false                                                                                                      |                                                                                                                                                                               |
| realtime     | messages                           | 8                | updated_at                               | timestamp without time zone | NO          | now()                                                                                                      |                                                                                                                                                                               |
| realtime     | messages                           | 9                | inserted_at                              | timestamp without time zone | NO          | now()                                                                                                      |                                                                                                                                                                               |
| realtime     | messages                           | 10               | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| realtime     | schema_migrations                  | 1                | version                                  | bigint(64)                  | NO          | null                                                                                                       |                                                                                                                                                                               |
| realtime     | schema_migrations                  | 2                | inserted_at                              | timestamp without time zone | YES         | null                                                                                                       |                                                                                                                                                                               |
| realtime     | subscription                       | 1                | id                                       | bigint(64)                  | NO          | null                                                                                                       |                                                                                                                                                                               |
| realtime     | subscription                       | 2                | subscription_id                          | uuid                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| realtime     | subscription                       | 4                | entity                                   | regclass                    | NO          | null                                                                                                       |                                                                                                                                                                               |
| realtime     | subscription                       | 5                | filters                                  | ARRAY                       | NO          | '{}'::realtime.user_defined_filter[]                                                                       |                                                                                                                                                                               |
| realtime     | subscription                       | 7                | claims                                   | jsonb                       | NO          | null                                                                                                       |                                                                                                                                                                               |
| realtime     | subscription                       | 8                | claims_role                              | regrole                     | NO          | null                                                                                                       |                                                                                                                                                                               |
| realtime     | subscription                       | 9                | created_at                               | timestamp without time zone | NO          | timezone('utc'::text, now())                                                                               |                                                                                                                                                                               |
| storage      | buckets                            | 1                | id                                       | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | buckets                            | 2                | name                                     | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | buckets                            | 3                | owner                                    | uuid                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| storage      | buckets                            | 4                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| storage      | buckets                            | 5                | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| storage      | buckets                            | 6                | public                                   | boolean                     | YES         | false                                                                                                      |                                                                                                                                                                               |
| storage      | buckets                            | 7                | avif_autodetection                       | boolean                     | YES         | false                                                                                                      |                                                                                                                                                                               |
| storage      | buckets                            | 8                | file_size_limit                          | bigint(64)                  | YES         | null                                                                                                       |                                                                                                                                                                               |
| storage      | buckets                            | 9                | allowed_mime_types                       | ARRAY                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| storage      | buckets                            | 10               | owner_id                                 | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| storage      | buckets                            | 11               | type                                     | USER-DEFINED                | NO          | 'STANDARD'::storage.buckettype                                                                             |                                                                                                                                                                               |
| storage      | buckets_analytics                  | 1                | name                                     | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | buckets_analytics                  | 2                | type                                     | USER-DEFINED                | NO          | 'ANALYTICS'::storage.buckettype                                                                            |                                                                                                                                                                               |
| storage      | buckets_analytics                  | 3                | format                                   | text                        | NO          | 'ICEBERG'::text                                                                                            |                                                                                                                                                                               |
| storage      | buckets_analytics                  | 4                | created_at                               | timestamp with time zone    | NO          | now()                                                                                                      |                                                                                                                                                                               |
| storage      | buckets_analytics                  | 5                | updated_at                               | timestamp with time zone    | NO          | now()                                                                                                      |                                                                                                                                                                               |
| storage      | buckets_analytics                  | 6                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| storage      | buckets_analytics                  | 7                | deleted_at                               | timestamp with time zone    | YES         | null                                                                                                       |                                                                                                                                                                               |
| storage      | buckets_vectors                    | 1                | id                                       | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | buckets_vectors                    | 2                | type                                     | USER-DEFINED                | NO          | 'VECTOR'::storage.buckettype                                                                               |                                                                                                                                                                               |
| storage      | buckets_vectors                    | 3                | created_at                               | timestamp with time zone    | NO          | now()                                                                                                      |                                                                                                                                                                               |
| storage      | buckets_vectors                    | 4                | updated_at                               | timestamp with time zone    | NO          | now()                                                                                                      |                                                                                                                                                                               |
| storage      | migrations                         | 1                | id                                       | integer(32)                 | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | migrations                         | 2                | name                                     | character varying(100)      | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | migrations                         | 3                | hash                                     | character varying(40)       | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | migrations                         | 4                | executed_at                              | timestamp without time zone | YES         | CURRENT_TIMESTAMP                                                                                          |                                                                                                                                                                               |
| storage      | objects                            | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| storage      | objects                            | 2                | bucket_id                                | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| storage      | objects                            | 3                | name                                     | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| storage      | objects                            | 4                | owner                                    | uuid                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| storage      | objects                            | 5                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| storage      | objects                            | 6                | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| storage      | objects                            | 7                | last_accessed_at                         | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| storage      | objects                            | 8                | metadata                                 | jsonb                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| storage      | objects                            | 9                | path_tokens                              | ARRAY                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| storage      | objects                            | 10               | version                                  | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| storage      | objects                            | 11               | owner_id                                 | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| storage      | objects                            | 12               | user_metadata                            | jsonb                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| storage      | objects                            | 13               | level                                    | integer(32)                 | YES         | null                                                                                                       |                                                                                                                                                                               |
| storage      | prefixes                           | 1                | bucket_id                                | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | prefixes                           | 2                | name                                     | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | prefixes                           | 3                | level                                    | integer(32)                 | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | prefixes                           | 4                | created_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| storage      | prefixes                           | 5                | updated_at                               | timestamp with time zone    | YES         | now()                                                                                                      |                                                                                                                                                                               |
| storage      | s3_multipart_uploads               | 1                | id                                       | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | s3_multipart_uploads               | 2                | in_progress_size                         | bigint(64)                  | NO          | 0                                                                                                          |                                                                                                                                                                               |
| storage      | s3_multipart_uploads               | 3                | upload_signature                         | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | s3_multipart_uploads               | 4                | bucket_id                                | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | s3_multipart_uploads               | 5                | key                                      | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | s3_multipart_uploads               | 6                | version                                  | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | s3_multipart_uploads               | 7                | owner_id                                 | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| storage      | s3_multipart_uploads               | 8                | created_at                               | timestamp with time zone    | NO          | now()                                                                                                      |                                                                                                                                                                               |
| storage      | s3_multipart_uploads               | 9                | user_metadata                            | jsonb                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| storage      | s3_multipart_uploads_parts         | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| storage      | s3_multipart_uploads_parts         | 2                | upload_id                                | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | s3_multipart_uploads_parts         | 3                | size                                     | bigint(64)                  | NO          | 0                                                                                                          |                                                                                                                                                                               |
| storage      | s3_multipart_uploads_parts         | 4                | part_number                              | integer(32)                 | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | s3_multipart_uploads_parts         | 5                | bucket_id                                | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | s3_multipart_uploads_parts         | 6                | key                                      | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | s3_multipart_uploads_parts         | 7                | etag                                     | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | s3_multipart_uploads_parts         | 8                | owner_id                                 | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| storage      | s3_multipart_uploads_parts         | 9                | version                                  | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | s3_multipart_uploads_parts         | 10               | created_at                               | timestamp with time zone    | NO          | now()                                                                                                      |                                                                                                                                                                               |
| storage      | vector_indexes                     | 1                | id                                       | text                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| storage      | vector_indexes                     | 2                | name                                     | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | vector_indexes                     | 3                | bucket_id                                | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | vector_indexes                     | 4                | data_type                                | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | vector_indexes                     | 5                | dimension                                | integer(32)                 | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | vector_indexes                     | 6                | distance_metric                          | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| storage      | vector_indexes                     | 7                | metadata_configuration                   | jsonb                       | YES         | null                                                                                                       |                                                                                                                                                                               |
| storage      | vector_indexes                     | 8                | created_at                               | timestamp with time zone    | NO          | now()                                                                                                      |                                                                                                                                                                               |
| storage      | vector_indexes                     | 9                | updated_at                               | timestamp with time zone    | NO          | now()                                                                                                      |                                                                                                                                                                               |
| vault        | secrets                            | 1                | id                                       | uuid                        | NO          | gen_random_uuid()                                                                                          |                                                                                                                                                                               |
| vault        | secrets                            | 2                | name                                     | text                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| vault        | secrets                            | 3                | description                              | text                        | NO          | ''::text                                                                                                   |                                                                                                                                                                               |
| vault        | secrets                            | 4                | secret                                   | text                        | NO          | null                                                                                                       |                                                                                                                                                                               |
| vault        | secrets                            | 5                | key_id                                   | uuid                        | YES         | null                                                                                                       |                                                                                                                                                                               |
| vault        | secrets                            | 6                | nonce                                    | bytea                       | YES         | vault._crypto_aead_det_noncegen()                                                                          |                                                                                                                                                                               |
| vault        | secrets                            | 7                | created_at                               | timestamp with time zone    | NO          | CURRENT_TIMESTAMP                                                                                          |                                                                                                                                                                               |
| vault        | secrets                            | 8                | updated_at                               | timestamp with time zone    | NO          | CURRENT_TIMESTAMP                                                                                          |                                                                                                                                                                               |


DATA VIEW
| view_schema | view_name                               | ordinal_position | column_name                          | data_type                | is_nullable | column_default | referenced_tables                  | foreign_keys                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| ----------- | --------------------------------------- | ---------------- | ------------------------------------ | ------------------------ | ----------- | -------------- | ---------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| extensions  | pg_stat_statements                      | 1                | userid                               | oid                      | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 2                | dbid                                 | oid                      | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 3                | toplevel                             | boolean                  | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 4                | queryid                              | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 5                | query                                | text                     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 6                | plans                                | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 7                | total_plan_time                      | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 8                | min_plan_time                        | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 9                | max_plan_time                        | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 10               | mean_plan_time                       | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 11               | stddev_plan_time                     | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 12               | calls                                | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 13               | total_exec_time                      | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 14               | min_exec_time                        | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 15               | max_exec_time                        | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 16               | mean_exec_time                       | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 17               | stddev_exec_time                     | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 18               | rows                                 | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 19               | shared_blks_hit                      | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 20               | shared_blks_read                     | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 21               | shared_blks_dirtied                  | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 22               | shared_blks_written                  | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 23               | local_blks_hit                       | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 24               | local_blks_read                      | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 25               | local_blks_dirtied                   | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 26               | local_blks_written                   | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 27               | temp_blks_read                       | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 28               | temp_blks_written                    | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 29               | shared_blk_read_time                 | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 30               | shared_blk_write_time                | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 31               | local_blk_read_time                  | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 32               | local_blk_write_time                 | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 33               | temp_blk_read_time                   | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 34               | temp_blk_write_time                  | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 35               | wal_records                          | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 36               | wal_fpi                              | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 37               | wal_bytes                            | numeric                  | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 38               | jit_functions                        | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 39               | jit_generation_time                  | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 40               | jit_inlining_count                   | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 41               | jit_inlining_time                    | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 42               | jit_optimization_count               | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 43               | jit_optimization_time                | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 44               | jit_emission_count                   | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 45               | jit_emission_time                    | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 46               | jit_deform_count                     | bigint(64)               | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 47               | jit_deform_time                      | double precision(53)     | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 48               | stats_since                          | timestamp with time zone | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements                      | 49               | minmax_stats_since                   | timestamp with time zone | YES         | null           | pg_stat_statements                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements_info                 | 1                | dealloc                              | bigint(64)               | YES         | null           | pg_stat_statements_info            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions  | pg_stat_statements_info                 | 2                | stats_reset                          | timestamp with time zone | YES         | null           | pg_stat_statements_info            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 1                | account_id                           | text                     | YES         | null           | profiles                           | cadence_enrollments_account_id_fkey: references public.accounts(account_id); contacts_account_id_fkey: references public.accounts(account_id); leads_account_id_fkey: references public.accounts(account_id); opportunities_account_id_fkey: references public.accounts(account_id); tickets_account_id_fkey: references public.accounts(account_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| public      | v_accounts_enriched                     | 2                | company_name                         | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 3                | domain                               | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 4                | npwp                                 | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 5                | industry                             | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 6                | address                              | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 7                | city                                 | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 8                | province                             | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 9                | country                              | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 10               | postal_code                          | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 11               | phone                                | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 12               | pic_name                             | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 13               | pic_email                            | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 14               | pic_phone                            | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 15               | owner_user_id                        | uuid                     | YES         | null           | profiles                           | accounts_owner_user_id_fkey: references public.profiles(user_id); activities_owner_user_id_fkey: references public.profiles(user_id); cadences_owner_user_id_fkey: references public.profiles(user_id); opportunities_owner_user_id_fkey: references public.profiles(user_id); sales_plans_owner_user_id_fkey: references public.profiles(user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| public      | v_accounts_enriched                     | 16               | tenure_status                        | USER-DEFINED             | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 17               | activity_status                      | USER-DEFINED             | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 18               | account_status                       | USER-DEFINED             | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 19               | first_deal_date                      | timestamp with time zone | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 20               | last_transaction_date                | timestamp with time zone | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 21               | is_active                            | boolean                  | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 22               | tags                                 | ARRAY                    | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 23               | notes                                | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 24               | dedupe_key                           | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 25               | created_by                           | uuid                     | YES         | null           | profiles                           | accounts_created_by_fkey: references public.profiles(user_id); activities_created_by_fkey: references public.profiles(user_id); cadences_created_by_fkey: references public.profiles(user_id); contacts_created_by_fkey: references public.profiles(user_id); customer_quotations_created_by_fkey: references public.profiles(user_id); leads_created_by_fkey: references public.profiles(user_id); operational_cost_rejection_reasons_created_by_fkey: references public.profiles(user_id); opportunities_created_by_fkey: references public.profiles(user_id); quotation_rejection_reasons_created_by_fkey: references public.profiles(user_id); sales_plans_created_by_fkey: references public.profiles(user_id); shipment_details_created_by_fkey: references public.profiles(user_id); sla_holidays_created_by_fkey: references public.profiles(user_id); ticket_rate_quotes_created_by_fkey: references public.profiles(user_id); tickets_created_by_fkey: references public.profiles(user_id) |
| public      | v_accounts_enriched                     | 26               | created_at                           | timestamp with time zone | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 27               | updated_at                           | timestamp with time zone | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 28               | lead_id                              | text                     | YES         | null           | profiles                           | accounts_lead_id_fkey: references public.leads(lead_id); customer_quotations_lead_id_fkey: references public.leads(lead_id); fk_customer_quotations_lead: references public.leads(lead_id); fk_ticket_rate_quotes_lead: references public.leads(lead_id); fk_tickets_lead: references public.leads(lead_id); lead_handover_pool_lead_id_fkey: references public.leads(lead_id); shipment_details_lead_id_fkey: references public.leads(lead_id); ticket_rate_quotes_lead_id_fkey: references public.leads(lead_id); tickets_lead_id_fkey: references public.leads(lead_id)                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public      | v_accounts_enriched                     | 29               | retry_count                          | integer(32)              | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 30               | owner_name                           | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 31               | owner_email                          | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 32               | open_opportunities                   | bigint(64)               | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 33               | pipeline_value                       | numeric                  | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 34               | contact_count                        | bigint(64)               | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 35               | planned_activities                   | bigint(64)               | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 36               | overdue_activities                   | bigint(64)               | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 37               | revenue_total                        | numeric(15)              | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 38               | actual_revenue                       | numeric(15)              | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 39               | total_payment                        | numeric(15)              | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_enriched                     | 40               | total_outstanding                    | numeric(15)              | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 1                | account_id                           | text                     | YES         | null           | opportunities                      | cadence_enrollments_account_id_fkey: references public.accounts(account_id); contacts_account_id_fkey: references public.accounts(account_id); leads_account_id_fkey: references public.accounts(account_id); opportunities_account_id_fkey: references public.accounts(account_id); tickets_account_id_fkey: references public.accounts(account_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| public      | v_accounts_with_status                  | 2                | company_name                         | text                     | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 3                | pic_name                             | text                     | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 4                | pic_email                            | text                     | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 5                | pic_phone                            | text                     | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 6                | industry                             | text                     | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 7                | address                              | text                     | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 8                | city                                 | text                     | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 9                | province                             | text                     | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 10               | country                              | text                     | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 11               | account_status                       | USER-DEFINED             | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 12               | first_transaction_date               | timestamp with time zone | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 13               | last_transaction_date                | timestamp with time zone | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 14               | lead_id                              | text                     | YES         | null           | opportunities                      | accounts_lead_id_fkey: references public.leads(lead_id); customer_quotations_lead_id_fkey: references public.leads(lead_id); fk_customer_quotations_lead: references public.leads(lead_id); fk_ticket_rate_quotes_lead: references public.leads(lead_id); fk_tickets_lead: references public.leads(lead_id); lead_handover_pool_lead_id_fkey: references public.leads(lead_id); shipment_details_lead_id_fkey: references public.leads(lead_id); ticket_rate_quotes_lead_id_fkey: references public.leads(lead_id); tickets_lead_id_fkey: references public.leads(lead_id)                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public      | v_accounts_with_status                  | 15               | owner_user_id                        | uuid                     | YES         | null           | opportunities                      | accounts_owner_user_id_fkey: references public.profiles(user_id); activities_owner_user_id_fkey: references public.profiles(user_id); cadences_owner_user_id_fkey: references public.profiles(user_id); opportunities_owner_user_id_fkey: references public.profiles(user_id); sales_plans_owner_user_id_fkey: references public.profiles(user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| public      | v_accounts_with_status                  | 16               | created_at                           | timestamp with time zone | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 17               | updated_at                           | timestamp with time zone | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 18               | owner_name                           | text                     | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 19               | owner_email                          | text                     | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 20               | opportunity_count                    | bigint(64)               | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 21               | total_pipeline_value                 | numeric                  | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 22               | won_opportunities                    | bigint(64)               | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_accounts_with_status                  | 23               | calculated_status                    | USER-DEFINED             | YES         | null           | opportunities                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_planner                    | 1                | activity_id                          | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_planner                    | 2                | activity_type                        | USER-DEFINED             | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_planner                    | 3                | subject                              | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_planner                    | 4                | description                          | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_planner                    | 5                | outcome                              | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_planner                    | 6                | status                               | USER-DEFINED             | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_planner                    | 7                | due_date                             | date                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_planner                    | 8                | due_time                             | time without time zone   | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_planner                    | 9                | completed_at                         | timestamp with time zone | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_planner                    | 10               | related_account_id                   | text                     | YES         | null           | accounts                           | activities_related_account_id_fkey: references public.accounts(account_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public      | v_activities_planner                    | 11               | related_contact_id                   | text                     | YES         | null           | accounts                           | activities_related_contact_id_fkey: references public.contacts(contact_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public      | v_activities_planner                    | 12               | related_opportunity_id               | text                     | YES         | null           | accounts                           | activities_related_opportunity_id_fkey: references public.opportunities(opportunity_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| public      | v_activities_planner                    | 13               | related_lead_id                      | text                     | YES         | null           | accounts                           | activities_related_lead_id_fkey: references public.leads(lead_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| public      | v_activities_planner                    | 14               | cadence_enrollment_id                | bigint(64)               | YES         | null           | accounts                           | activities_cadence_enrollment_fkey: references public.cadence_enrollments(enrollment_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| public      | v_activities_planner                    | 15               | cadence_step_number                  | integer(32)              | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_planner                    | 16               | owner_user_id                        | uuid                     | YES         | null           | accounts                           | accounts_owner_user_id_fkey: references public.profiles(user_id); activities_owner_user_id_fkey: references public.profiles(user_id); cadences_owner_user_id_fkey: references public.profiles(user_id); opportunities_owner_user_id_fkey: references public.profiles(user_id); sales_plans_owner_user_id_fkey: references public.profiles(user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| public      | v_activities_planner                    | 17               | assigned_to                          | uuid                     | YES         | null           | accounts                           | activities_assigned_to_fkey: references public.profiles(user_id); ticket_assignments_assigned_to_fkey: references public.profiles(user_id); tickets_assigned_to_fkey: references public.profiles(user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| public      | v_activities_planner                    | 18               | created_by                           | uuid                     | YES         | null           | accounts                           | accounts_created_by_fkey: references public.profiles(user_id); activities_created_by_fkey: references public.profiles(user_id); cadences_created_by_fkey: references public.profiles(user_id); contacts_created_by_fkey: references public.profiles(user_id); customer_quotations_created_by_fkey: references public.profiles(user_id); leads_created_by_fkey: references public.profiles(user_id); operational_cost_rejection_reasons_created_by_fkey: references public.profiles(user_id); opportunities_created_by_fkey: references public.profiles(user_id); quotation_rejection_reasons_created_by_fkey: references public.profiles(user_id); sales_plans_created_by_fkey: references public.profiles(user_id); shipment_details_created_by_fkey: references public.profiles(user_id); sla_holidays_created_by_fkey: references public.profiles(user_id); ticket_rate_quotes_created_by_fkey: references public.profiles(user_id); tickets_created_by_fkey: references public.profiles(user_id) |
| public      | v_activities_planner                    | 19               | created_at                           | timestamp with time zone | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_planner                    | 20               | updated_at                           | timestamp with time zone | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_planner                    | 21               | account_name                         | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_planner                    | 22               | opportunity_name                     | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_planner                    | 23               | lead_company                         | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_planner                    | 24               | owner_name                           | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 1                | activity_id                          | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 2                | source_type                          | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 3                | plan_type                            | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 4                | activity_type                        | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 5                | activity_detail                      | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 6                | notes                                | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 7                | status                               | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 8                | scheduled_on                         | timestamp with time zone | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 9                | completed_on                         | timestamp with time zone | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 10               | evidence_url                         | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 11               | evidence_file_name                   | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 12               | location_lat                         | numeric(10)              | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 13               | location_lng                         | numeric(11)              | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 14               | location_address                     | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 15               | owner_user_id                        | uuid                     | YES         | null           | profiles                           | accounts_owner_user_id_fkey: references public.profiles(user_id); activities_owner_user_id_fkey: references public.profiles(user_id); cadences_owner_user_id_fkey: references public.profiles(user_id); opportunities_owner_user_id_fkey: references public.profiles(user_id); sales_plans_owner_user_id_fkey: references public.profiles(user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| public      | v_activities_unified                    | 16               | account_id                           | text                     | YES         | null           | profiles                           | cadence_enrollments_account_id_fkey: references public.accounts(account_id); contacts_account_id_fkey: references public.accounts(account_id); leads_account_id_fkey: references public.accounts(account_id); opportunities_account_id_fkey: references public.accounts(account_id); tickets_account_id_fkey: references public.accounts(account_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| public      | v_activities_unified                    | 17               | opportunity_id                       | text                     | YES         | null           | profiles                           | cadence_enrollments_opportunity_id_fkey: references public.opportunities(opportunity_id); customer_quotations_opportunity_id_fkey: references public.opportunities(opportunity_id); fk_customer_quotations_opportunity: references public.opportunities(opportunity_id); fk_ticket_rate_quotes_opportunity: references public.opportunities(opportunity_id); fk_tickets_opportunity: references public.opportunities(opportunity_id); leads_opportunity_id_fkey: references public.opportunities(opportunity_id); opportunity_stage_history_opportunity_id_fkey: references public.opportunities(opportunity_id); pipeline_updates_opportunity_id_fkey: references public.opportunities(opportunity_id); ticket_rate_quotes_opportunity_id_fkey: references public.opportunities(opportunity_id); tickets_opportunity_id_fkey: references public.opportunities(opportunity_id)                                                                                                                       |
| public      | v_activities_unified                    | 18               | lead_id                              | text                     | YES         | null           | profiles                           | accounts_lead_id_fkey: references public.leads(lead_id); customer_quotations_lead_id_fkey: references public.leads(lead_id); fk_customer_quotations_lead: references public.leads(lead_id); fk_ticket_rate_quotes_lead: references public.leads(lead_id); fk_tickets_lead: references public.leads(lead_id); lead_handover_pool_lead_id_fkey: references public.leads(lead_id); shipment_details_lead_id_fkey: references public.leads(lead_id); ticket_rate_quotes_lead_id_fkey: references public.leads(lead_id); tickets_lead_id_fkey: references public.leads(lead_id)                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public      | v_activities_unified                    | 19               | created_at                           | timestamp with time zone | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 20               | potential_status                     | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 21               | pic_name                             | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 22               | pic_phone                            | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 23               | pic_email                            | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 24               | sales_name                           | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_activities_unified                    | 25               | account_name                         | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_crm_notification_stats                | 1                | event                                | text                     | YES         | null           | crm_notification_logs              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_crm_notification_stats                | 2                | entity_type                          | text                     | YES         | null           | crm_notification_logs              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_crm_notification_stats                | 3                | total_sent                           | bigint(64)               | YES         | null           | crm_notification_logs              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_crm_notification_stats                | 4                | successful                           | bigint(64)               | YES         | null           | crm_notification_logs              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_crm_notification_stats                | 5                | failed                               | bigint(64)               | YES         | null           | crm_notification_logs              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_crm_notification_stats                | 6                | last_sent_at                         | timestamp with time zone | YES         | null           | crm_notification_logs              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_crm_notification_stats                | 7                | sent_date                            | timestamp with time zone | YES         | null           | crm_notification_logs              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 1                | id                                   | uuid                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 2                | quotation_number                     | character varying(50)    | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 3                | sequence_number                      | integer(32)              | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 4                | sequence_label                       | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 5                | sequence_label_id                    | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 6                | status                               | USER-DEFINED             | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 7                | source_type                          | character varying(20)    | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 8                | customer_name                        | character varying(255)   | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 9                | customer_company                     | character varying(255)   | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 10               | customer_email                       | character varying(255)   | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 11               | customer_phone                       | character varying(50)    | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 12               | customer_address                     | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 13               | service_type                         | character varying(100)   | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 14               | fleet_type                           | character varying(100)   | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 15               | fleet_quantity                       | integer(32)              | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 16               | incoterm                             | character varying(20)    | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 17               | commodity                            | character varying(255)   | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 18               | cargo_description                    | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 19               | cargo_weight                         | numeric(15)              | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 20               | cargo_weight_unit                    | character varying(10)    | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 21               | cargo_volume                         | numeric(15)              | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 22               | cargo_volume_unit                    | character varying(10)    | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 23               | cargo_quantity                       | integer(32)              | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 24               | cargo_quantity_unit                  | character varying(50)    | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 25               | estimated_leadtime                   | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 26               | estimated_cargo_value                | numeric                  | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 27               | cargo_value_currency                 | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 28               | origin_address                       | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 29               | origin_city                          | character varying(100)   | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 30               | origin_country                       | character varying(100)   | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 31               | origin_port                          | character varying(100)   | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 32               | destination_address                  | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 33               | destination_city                     | character varying(100)   | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 34               | destination_country                  | character varying(100)   | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 35               | destination_port                     | character varying(100)   | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 36               | rate_structure                       | USER-DEFINED             | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 37               | total_cost                           | numeric(15)              | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 38               | target_margin_percent                | numeric(5)               | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 39               | total_selling_rate                   | numeric(15)              | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 40               | currency                             | character varying(3)     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 41               | scope_of_work                        | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 42               | terms_includes                       | jsonb                    | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 43               | terms_excludes                       | jsonb                    | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 44               | terms_notes                          | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 45               | validity_days                        | integer(32)              | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 46               | valid_until                          | date                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 47               | sent_at                              | timestamp with time zone | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 48               | sent_via                             | character varying(20)    | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 49               | pdf_url                              | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 50               | rejection_reason                     | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 51               | created_at                           | timestamp with time zone | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 52               | updated_at                           | timestamp with time zone | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 53               | ticket_id                            | uuid                     | YES         | null           | tickets                            | customer_quotations_ticket_id_fkey: references public.tickets(id); ticket_assignments_ticket_id_fkey: references public.tickets(id); ticket_attachments_ticket_id_fkey: references public.tickets(id); ticket_comments_ticket_id_fkey: references public.tickets(id); ticket_events_ticket_id_fkey: references public.tickets(id); ticket_rate_quotes_ticket_id_fkey: references public.tickets(id); ticket_response_exchanges_ticket_id_fkey: references public.tickets(id); ticket_response_metrics_ticket_id_fkey: references public.tickets(id); ticket_responses_ticket_id_fkey: references public.tickets(id); ticket_sla_tracking_ticket_id_fkey: references public.tickets(id)                                                                                                                                                                                                                                                                                                               |
| public      | v_customer_quotations_enriched          | 54               | ticket_code                          | character varying(20)    | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 55               | ticket_subject                       | character varying(255)   | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 56               | ticket_status                        | USER-DEFINED             | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 57               | lead_id                              | text                     | YES         | null           | tickets                            | accounts_lead_id_fkey: references public.leads(lead_id); customer_quotations_lead_id_fkey: references public.leads(lead_id); fk_customer_quotations_lead: references public.leads(lead_id); fk_ticket_rate_quotes_lead: references public.leads(lead_id); fk_tickets_lead: references public.leads(lead_id); lead_handover_pool_lead_id_fkey: references public.leads(lead_id); shipment_details_lead_id_fkey: references public.leads(lead_id); ticket_rate_quotes_lead_id_fkey: references public.leads(lead_id); tickets_lead_id_fkey: references public.leads(lead_id)                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public      | v_customer_quotations_enriched          | 58               | lead_company_name                    | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 59               | lead_contact_name                    | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 60               | lead_status                          | USER-DEFINED             | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 61               | opportunity_id                       | text                     | YES         | null           | tickets                            | cadence_enrollments_opportunity_id_fkey: references public.opportunities(opportunity_id); customer_quotations_opportunity_id_fkey: references public.opportunities(opportunity_id); fk_customer_quotations_opportunity: references public.opportunities(opportunity_id); fk_ticket_rate_quotes_opportunity: references public.opportunities(opportunity_id); fk_tickets_opportunity: references public.opportunities(opportunity_id); leads_opportunity_id_fkey: references public.opportunities(opportunity_id); opportunity_stage_history_opportunity_id_fkey: references public.opportunities(opportunity_id); pipeline_updates_opportunity_id_fkey: references public.opportunities(opportunity_id); ticket_rate_quotes_opportunity_id_fkey: references public.opportunities(opportunity_id); tickets_opportunity_id_fkey: references public.opportunities(opportunity_id)                                                                                                                       |
| public      | v_customer_quotations_enriched          | 62               | opportunity_name                     | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 63               | opportunity_stage                    | USER-DEFINED             | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 64               | opportunity_value                    | numeric(15)              | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 65               | account_id                           | text                     | YES         | null           | tickets                            | cadence_enrollments_account_id_fkey: references public.accounts(account_id); contacts_account_id_fkey: references public.accounts(account_id); leads_account_id_fkey: references public.accounts(account_id); opportunities_account_id_fkey: references public.accounts(account_id); tickets_account_id_fkey: references public.accounts(account_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| public      | v_customer_quotations_enriched          | 66               | account_company_name                 | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 67               | operational_cost_id                  | uuid                     | YES         | null           | tickets                            | customer_quotations_operational_cost_id_fkey: references public.ticket_rate_quotes(id); operational_cost_rejection_reasons_operational_cost_id_fkey: references public.ticket_rate_quotes(id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| public      | v_customer_quotations_enriched          | 68               | operational_cost_number              | character varying(30)    | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 69               | operational_cost_amount              | numeric(15)              | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 70               | operational_cost_status              | USER-DEFINED             | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 71               | created_by                           | uuid                     | YES         | null           | tickets                            | accounts_created_by_fkey: references public.profiles(user_id); activities_created_by_fkey: references public.profiles(user_id); cadences_created_by_fkey: references public.profiles(user_id); contacts_created_by_fkey: references public.profiles(user_id); customer_quotations_created_by_fkey: references public.profiles(user_id); leads_created_by_fkey: references public.profiles(user_id); operational_cost_rejection_reasons_created_by_fkey: references public.profiles(user_id); opportunities_created_by_fkey: references public.profiles(user_id); quotation_rejection_reasons_created_by_fkey: references public.profiles(user_id); sales_plans_created_by_fkey: references public.profiles(user_id); shipment_details_created_by_fkey: references public.profiles(user_id); sla_holidays_created_by_fkey: references public.profiles(user_id); ticket_rate_quotes_created_by_fkey: references public.profiles(user_id); tickets_created_by_fkey: references public.profiles(user_id) |
| public      | v_customer_quotations_enriched          | 72               | creator_name                         | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 73               | creator_email                        | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 74               | is_expired                           | boolean                  | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_customer_quotations_enriched          | 75               | status_order                         | integer(32)              | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_disqualified_leads                    | 1                | lead_id                              | text                     | YES         | null           | profiles                           | accounts_lead_id_fkey: references public.leads(lead_id); customer_quotations_lead_id_fkey: references public.leads(lead_id); fk_customer_quotations_lead: references public.leads(lead_id); fk_ticket_rate_quotes_lead: references public.leads(lead_id); fk_tickets_lead: references public.leads(lead_id); lead_handover_pool_lead_id_fkey: references public.leads(lead_id); shipment_details_lead_id_fkey: references public.leads(lead_id); ticket_rate_quotes_lead_id_fkey: references public.leads(lead_id); tickets_lead_id_fkey: references public.leads(lead_id)                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public      | v_disqualified_leads                    | 2                | company_name                         | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_disqualified_leads                    | 3                | contact_name                         | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_disqualified_leads                    | 4                | disqualified_by_name                 | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_disqualified_leads                    | 5                | triage_status                        | USER-DEFINED             | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_disqualified_leads                    | 6                | disqualified_at                      | timestamp with time zone | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 1                | lead_id                              | text                     | YES         | null           | lead_handover_pool                 | accounts_lead_id_fkey: references public.leads(lead_id); customer_quotations_lead_id_fkey: references public.leads(lead_id); fk_customer_quotations_lead: references public.leads(lead_id); fk_ticket_rate_quotes_lead: references public.leads(lead_id); fk_tickets_lead: references public.leads(lead_id); lead_handover_pool_lead_id_fkey: references public.leads(lead_id); shipment_details_lead_id_fkey: references public.leads(lead_id); ticket_rate_quotes_lead_id_fkey: references public.leads(lead_id); tickets_lead_id_fkey: references public.leads(lead_id)                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public      | v_lead_bidding                          | 2                | company_name                         | text                     | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 3                | contact_name                         | text                     | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 4                | contact_email                        | text                     | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 5                | contact_phone                        | text                     | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 6                | industry                             | text                     | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 7                | triage_status                        | USER-DEFINED             | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 8                | source                               | text                     | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 9                | priority                             | integer(32)              | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 10               | potential_revenue                    | numeric(15)              | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 11               | claim_status                         | USER-DEFINED             | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 12               | claimed_by_name                      | text                     | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 13               | created_at                           | timestamp with time zone | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 14               | qualified_at                         | timestamp with time zone | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 15               | created_by                           | uuid                     | YES         | null           | lead_handover_pool                 | accounts_created_by_fkey: references public.profiles(user_id); activities_created_by_fkey: references public.profiles(user_id); cadences_created_by_fkey: references public.profiles(user_id); contacts_created_by_fkey: references public.profiles(user_id); customer_quotations_created_by_fkey: references public.profiles(user_id); leads_created_by_fkey: references public.profiles(user_id); operational_cost_rejection_reasons_created_by_fkey: references public.profiles(user_id); opportunities_created_by_fkey: references public.profiles(user_id); quotation_rejection_reasons_created_by_fkey: references public.profiles(user_id); sales_plans_created_by_fkey: references public.profiles(user_id); shipment_details_created_by_fkey: references public.profiles(user_id); sla_holidays_created_by_fkey: references public.profiles(user_id); ticket_rate_quotes_created_by_fkey: references public.profiles(user_id); tickets_created_by_fkey: references public.profiles(user_id) |
| public      | v_lead_bidding                          | 16               | pool_id                              | bigint(64)               | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 17               | handed_over_at                       | timestamp with time zone | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 18               | handover_notes                       | text                     | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 19               | handed_over_by_name                  | text                     | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 20               | creator_name                         | text                     | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_bidding                          | 21               | creator_department                   | text                     | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 1                | lead_id                              | text                     | YES         | null           | profiles                           | accounts_lead_id_fkey: references public.leads(lead_id); customer_quotations_lead_id_fkey: references public.leads(lead_id); fk_customer_quotations_lead: references public.leads(lead_id); fk_ticket_rate_quotes_lead: references public.leads(lead_id); fk_tickets_lead: references public.leads(lead_id); lead_handover_pool_lead_id_fkey: references public.leads(lead_id); shipment_details_lead_id_fkey: references public.leads(lead_id); ticket_rate_quotes_lead_id_fkey: references public.leads(lead_id); tickets_lead_id_fkey: references public.leads(lead_id)                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public      | v_lead_inbox                            | 2                | company_name                         | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 3                | contact_name                         | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 4                | contact_email                        | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 5                | contact_phone                        | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 6                | industry                             | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 7                | triage_status                        | USER-DEFINED             | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 8                | source                               | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 9                | source_detail                        | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 10               | priority                             | integer(32)              | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 11               | potential_revenue                    | numeric(15)              | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 12               | claim_status                         | USER-DEFINED             | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 13               | claimed_by_name                      | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 14               | notes                                | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 15               | created_at                           | timestamp with time zone | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 16               | created_by                           | uuid                     | YES         | null           | profiles                           | accounts_created_by_fkey: references public.profiles(user_id); activities_created_by_fkey: references public.profiles(user_id); cadences_created_by_fkey: references public.profiles(user_id); contacts_created_by_fkey: references public.profiles(user_id); customer_quotations_created_by_fkey: references public.profiles(user_id); leads_created_by_fkey: references public.profiles(user_id); operational_cost_rejection_reasons_created_by_fkey: references public.profiles(user_id); opportunities_created_by_fkey: references public.profiles(user_id); quotation_rejection_reasons_created_by_fkey: references public.profiles(user_id); sales_plans_created_by_fkey: references public.profiles(user_id); shipment_details_created_by_fkey: references public.profiles(user_id); sla_holidays_created_by_fkey: references public.profiles(user_id); ticket_rate_quotes_created_by_fkey: references public.profiles(user_id); tickets_created_by_fkey: references public.profiles(user_id) |
| public      | v_lead_inbox                            | 17               | marketing_owner_user_id              | uuid                     | YES         | null           | profiles                           | leads_marketing_owner_user_id_fkey: references public.profiles(user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| public      | v_lead_inbox                            | 18               | sales_owner_user_id                  | uuid                     | YES         | null           | profiles                           | leads_sales_owner_user_id_fkey: references public.profiles(user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public      | v_lead_inbox                            | 19               | disqualified_at                      | timestamp with time zone | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 20               | disqualified_reason                  | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 21               | marketing_owner_name                 | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 22               | marketing_owner_email                | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 23               | sales_owner_name                     | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 24               | creator_name                         | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 25               | creator_department                   | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 26               | creator_role                         | USER-DEFINED             | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_inbox                            | 27               | creator_is_marketing                 | boolean                  | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 1                | lead_id                              | text                     | YES         | null           | profiles                           | accounts_lead_id_fkey: references public.leads(lead_id); customer_quotations_lead_id_fkey: references public.leads(lead_id); fk_customer_quotations_lead: references public.leads(lead_id); fk_ticket_rate_quotes_lead: references public.leads(lead_id); fk_tickets_lead: references public.leads(lead_id); lead_handover_pool_lead_id_fkey: references public.leads(lead_id); shipment_details_lead_id_fkey: references public.leads(lead_id); ticket_rate_quotes_lead_id_fkey: references public.leads(lead_id); tickets_lead_id_fkey: references public.leads(lead_id)                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public      | v_lead_management                       | 2                | company_name                         | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 3                | contact_name                         | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 4                | contact_email                        | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 5                | contact_phone                        | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 6                | industry                             | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 7                | triage_status                        | USER-DEFINED             | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 8                | source                               | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 9                | source_detail                        | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 10               | priority                             | integer(32)              | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 11               | potential_revenue                    | numeric(15)              | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 12               | claim_status                         | USER-DEFINED             | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 13               | claimed_by_name                      | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 14               | notes                                | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 15               | created_at                           | timestamp with time zone | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 16               | updated_at                           | timestamp with time zone | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 17               | marketing_owner_user_id              | uuid                     | YES         | null           | profiles                           | leads_marketing_owner_user_id_fkey: references public.profiles(user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| public      | v_lead_management                       | 18               | sales_owner_user_id                  | uuid                     | YES         | null           | profiles                           | leads_sales_owner_user_id_fkey: references public.profiles(user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public      | v_lead_management                       | 19               | created_by                           | uuid                     | YES         | null           | profiles                           | accounts_created_by_fkey: references public.profiles(user_id); activities_created_by_fkey: references public.profiles(user_id); cadences_created_by_fkey: references public.profiles(user_id); contacts_created_by_fkey: references public.profiles(user_id); customer_quotations_created_by_fkey: references public.profiles(user_id); leads_created_by_fkey: references public.profiles(user_id); operational_cost_rejection_reasons_created_by_fkey: references public.profiles(user_id); opportunities_created_by_fkey: references public.profiles(user_id); quotation_rejection_reasons_created_by_fkey: references public.profiles(user_id); sales_plans_created_by_fkey: references public.profiles(user_id); shipment_details_created_by_fkey: references public.profiles(user_id); sla_holidays_created_by_fkey: references public.profiles(user_id); ticket_rate_quotes_created_by_fkey: references public.profiles(user_id); tickets_created_by_fkey: references public.profiles(user_id) |
| public      | v_lead_management                       | 20               | disqualified_at                      | timestamp with time zone | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 21               | disqualified_reason                  | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 22               | qualified_at                         | timestamp with time zone | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 23               | claimed_at                           | timestamp with time zone | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 24               | account_id                           | text                     | YES         | null           | profiles                           | cadence_enrollments_account_id_fkey: references public.accounts(account_id); contacts_account_id_fkey: references public.accounts(account_id); leads_account_id_fkey: references public.accounts(account_id); opportunities_account_id_fkey: references public.accounts(account_id); tickets_account_id_fkey: references public.accounts(account_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| public      | v_lead_management                       | 25               | opportunity_id                       | text                     | YES         | null           | profiles                           | cadence_enrollments_opportunity_id_fkey: references public.opportunities(opportunity_id); customer_quotations_opportunity_id_fkey: references public.opportunities(opportunity_id); fk_customer_quotations_opportunity: references public.opportunities(opportunity_id); fk_ticket_rate_quotes_opportunity: references public.opportunities(opportunity_id); fk_tickets_opportunity: references public.opportunities(opportunity_id); leads_opportunity_id_fkey: references public.opportunities(opportunity_id); opportunity_stage_history_opportunity_id_fkey: references public.opportunities(opportunity_id); pipeline_updates_opportunity_id_fkey: references public.opportunities(opportunity_id); ticket_rate_quotes_opportunity_id_fkey: references public.opportunities(opportunity_id); tickets_opportunity_id_fkey: references public.opportunities(opportunity_id)                                                                                                                       |
| public      | v_lead_management                       | 26               | marketing_owner_name                 | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 27               | marketing_owner_email                | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 28               | marketing_department                 | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 29               | sales_owner_name                     | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 30               | creator_name                         | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 31               | creator_department                   | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 32               | creator_role                         | USER-DEFINED             | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 33               | creator_is_marketing                 | boolean                  | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_lead_management                       | 34               | account_company_name                 | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 1                | lead_id                              | text                     | YES         | null           | accounts                           | accounts_lead_id_fkey: references public.leads(lead_id); customer_quotations_lead_id_fkey: references public.leads(lead_id); fk_customer_quotations_lead: references public.leads(lead_id); fk_ticket_rate_quotes_lead: references public.leads(lead_id); fk_tickets_lead: references public.leads(lead_id); lead_handover_pool_lead_id_fkey: references public.leads(lead_id); shipment_details_lead_id_fkey: references public.leads(lead_id); ticket_rate_quotes_lead_id_fkey: references public.leads(lead_id); tickets_lead_id_fkey: references public.leads(lead_id)                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public      | v_my_leads                              | 2                | company_name                         | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 3                | contact_name                         | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 4                | contact_email                        | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 5                | contact_phone                        | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 6                | industry                             | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 7                | triage_status                        | USER-DEFINED             | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 8                | source                               | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 9                | priority                             | integer(32)              | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 10               | potential_revenue                    | numeric(15)              | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 11               | claim_status                         | USER-DEFINED             | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 12               | claimed_by_name                      | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 13               | notes                                | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 14               | created_at                           | timestamp with time zone | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 15               | updated_at                           | timestamp with time zone | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 16               | sales_owner_user_id                  | uuid                     | YES         | null           | accounts                           | leads_sales_owner_user_id_fkey: references public.profiles(user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public      | v_my_leads                              | 17               | qualified_at                         | timestamp with time zone | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 18               | claimed_at                           | timestamp with time zone | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 19               | account_id                           | text                     | YES         | null           | accounts                           | cadence_enrollments_account_id_fkey: references public.accounts(account_id); contacts_account_id_fkey: references public.accounts(account_id); leads_account_id_fkey: references public.accounts(account_id); opportunities_account_id_fkey: references public.accounts(account_id); tickets_account_id_fkey: references public.accounts(account_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| public      | v_my_leads                              | 20               | opportunity_id                       | text                     | YES         | null           | accounts                           | cadence_enrollments_opportunity_id_fkey: references public.opportunities(opportunity_id); customer_quotations_opportunity_id_fkey: references public.opportunities(opportunity_id); fk_customer_quotations_opportunity: references public.opportunities(opportunity_id); fk_ticket_rate_quotes_opportunity: references public.opportunities(opportunity_id); fk_tickets_opportunity: references public.opportunities(opportunity_id); leads_opportunity_id_fkey: references public.opportunities(opportunity_id); opportunity_stage_history_opportunity_id_fkey: references public.opportunities(opportunity_id); pipeline_updates_opportunity_id_fkey: references public.opportunities(opportunity_id); ticket_rate_quotes_opportunity_id_fkey: references public.opportunities(opportunity_id); tickets_opportunity_id_fkey: references public.opportunities(opportunity_id)                                                                                                                       |
| public      | v_my_leads                              | 21               | created_by                           | uuid                     | YES         | null           | accounts                           | accounts_created_by_fkey: references public.profiles(user_id); activities_created_by_fkey: references public.profiles(user_id); cadences_created_by_fkey: references public.profiles(user_id); contacts_created_by_fkey: references public.profiles(user_id); customer_quotations_created_by_fkey: references public.profiles(user_id); leads_created_by_fkey: references public.profiles(user_id); operational_cost_rejection_reasons_created_by_fkey: references public.profiles(user_id); opportunities_created_by_fkey: references public.profiles(user_id); quotation_rejection_reasons_created_by_fkey: references public.profiles(user_id); sales_plans_created_by_fkey: references public.profiles(user_id); shipment_details_created_by_fkey: references public.profiles(user_id); sla_holidays_created_by_fkey: references public.profiles(user_id); ticket_rate_quotes_created_by_fkey: references public.profiles(user_id); tickets_created_by_fkey: references public.profiles(user_id) |
| public      | v_my_leads                              | 22               | account_company_name                 | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 23               | creator_name                         | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_my_leads                              | 24               | creator_department                   | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_nurture_leads                         | 1                | lead_id                              | text                     | YES         | null           | profiles                           | accounts_lead_id_fkey: references public.leads(lead_id); customer_quotations_lead_id_fkey: references public.leads(lead_id); fk_customer_quotations_lead: references public.leads(lead_id); fk_ticket_rate_quotes_lead: references public.leads(lead_id); fk_tickets_lead: references public.leads(lead_id); lead_handover_pool_lead_id_fkey: references public.leads(lead_id); shipment_details_lead_id_fkey: references public.leads(lead_id); ticket_rate_quotes_lead_id_fkey: references public.leads(lead_id); tickets_lead_id_fkey: references public.leads(lead_id)                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public      | v_nurture_leads                         | 2                | company_name                         | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_nurture_leads                         | 3                | contact_name                         | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_nurture_leads                         | 4                | marketing_owner_name                 | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_nurture_leads                         | 5                | triage_status                        | USER-DEFINED             | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_nurture_leads                         | 6                | updated_at                           | timestamp with time zone | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_nurture_leads                         | 7                | created_at                           | timestamp with time zone | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 1                | opportunity_id                       | text                     | YES         | null           | accounts                           | cadence_enrollments_opportunity_id_fkey: references public.opportunities(opportunity_id); customer_quotations_opportunity_id_fkey: references public.opportunities(opportunity_id); fk_customer_quotations_opportunity: references public.opportunities(opportunity_id); fk_ticket_rate_quotes_opportunity: references public.opportunities(opportunity_id); fk_tickets_opportunity: references public.opportunities(opportunity_id); leads_opportunity_id_fkey: references public.opportunities(opportunity_id); opportunity_stage_history_opportunity_id_fkey: references public.opportunities(opportunity_id); pipeline_updates_opportunity_id_fkey: references public.opportunities(opportunity_id); ticket_rate_quotes_opportunity_id_fkey: references public.opportunities(opportunity_id); tickets_opportunity_id_fkey: references public.opportunities(opportunity_id)                                                                                                                       |
| public      | v_pipeline_active                       | 2                | account_id                           | text                     | YES         | null           | accounts                           | cadence_enrollments_account_id_fkey: references public.accounts(account_id); contacts_account_id_fkey: references public.accounts(account_id); leads_account_id_fkey: references public.accounts(account_id); opportunities_account_id_fkey: references public.accounts(account_id); tickets_account_id_fkey: references public.accounts(account_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| public      | v_pipeline_active                       | 3                | opportunity_name                     | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 4                | description                          | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 5                | service_codes                        | ARRAY                    | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 6                | route                                | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 7                | origin                               | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 8                | destination                          | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 9                | estimated_value                      | numeric(15)              | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 10               | currency                             | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 11               | probability                          | integer(32)              | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 12               | stage                                | USER-DEFINED             | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 13               | next_step                            | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 14               | next_step_due_date                   | date                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 15               | owner_user_id                        | uuid                     | YES         | null           | accounts                           | accounts_owner_user_id_fkey: references public.profiles(user_id); activities_owner_user_id_fkey: references public.profiles(user_id); cadences_owner_user_id_fkey: references public.profiles(user_id); opportunities_owner_user_id_fkey: references public.profiles(user_id); sales_plans_owner_user_id_fkey: references public.profiles(user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| public      | v_pipeline_active                       | 16               | closed_at                            | timestamp with time zone | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 17               | outcome                              | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 18               | lost_reason                          | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 19               | competitor                           | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 20               | created_at                           | timestamp with time zone | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 21               | updated_at                           | timestamp with time zone | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 22               | account_name                         | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 23               | account_pic                          | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 24               | owner_name                           | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 25               | owner_email                          | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_active                       | 26               | is_overdue                           | boolean                  | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 1                | opportunity_id                       | text                     | YES         | null           | pipeline_updates                   | cadence_enrollments_opportunity_id_fkey: references public.opportunities(opportunity_id); customer_quotations_opportunity_id_fkey: references public.opportunities(opportunity_id); fk_customer_quotations_opportunity: references public.opportunities(opportunity_id); fk_ticket_rate_quotes_opportunity: references public.opportunities(opportunity_id); fk_tickets_opportunity: references public.opportunities(opportunity_id); leads_opportunity_id_fkey: references public.opportunities(opportunity_id); opportunity_stage_history_opportunity_id_fkey: references public.opportunities(opportunity_id); pipeline_updates_opportunity_id_fkey: references public.opportunities(opportunity_id); ticket_rate_quotes_opportunity_id_fkey: references public.opportunities(opportunity_id); tickets_opportunity_id_fkey: references public.opportunities(opportunity_id)                                                                                                                       |
| public      | v_pipeline_with_updates                 | 2                | name                                 | text                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 3                | account_id                           | text                     | YES         | null           | pipeline_updates                   | cadence_enrollments_account_id_fkey: references public.accounts(account_id); contacts_account_id_fkey: references public.accounts(account_id); leads_account_id_fkey: references public.accounts(account_id); opportunities_account_id_fkey: references public.accounts(account_id); tickets_account_id_fkey: references public.accounts(account_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| public      | v_pipeline_with_updates                 | 4                | source_lead_id                       | text                     | YES         | null           | pipeline_updates                   | opportunities_source_lead_id_fkey: references public.leads(lead_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public      | v_pipeline_with_updates                 | 5                | stage                                | USER-DEFINED             | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 6                | estimated_value                      | numeric(15)              | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 7                | deal_value                           | numeric(15)              | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 8                | currency                             | text                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 9                | probability                          | integer(32)              | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 10               | next_step                            | text                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 11               | next_step_due_date                   | date                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 12               | owner_user_id                        | uuid                     | YES         | null           | pipeline_updates                   | accounts_owner_user_id_fkey: references public.profiles(user_id); activities_owner_user_id_fkey: references public.profiles(user_id); cadences_owner_user_id_fkey: references public.profiles(user_id); opportunities_owner_user_id_fkey: references public.profiles(user_id); sales_plans_owner_user_id_fkey: references public.profiles(user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| public      | v_pipeline_with_updates                 | 13               | created_by                           | uuid                     | YES         | null           | pipeline_updates                   | accounts_created_by_fkey: references public.profiles(user_id); activities_created_by_fkey: references public.profiles(user_id); cadences_created_by_fkey: references public.profiles(user_id); contacts_created_by_fkey: references public.profiles(user_id); customer_quotations_created_by_fkey: references public.profiles(user_id); leads_created_by_fkey: references public.profiles(user_id); operational_cost_rejection_reasons_created_by_fkey: references public.profiles(user_id); opportunities_created_by_fkey: references public.profiles(user_id); quotation_rejection_reasons_created_by_fkey: references public.profiles(user_id); sales_plans_created_by_fkey: references public.profiles(user_id); shipment_details_created_by_fkey: references public.profiles(user_id); sla_holidays_created_by_fkey: references public.profiles(user_id); ticket_rate_quotes_created_by_fkey: references public.profiles(user_id); tickets_created_by_fkey: references public.profiles(user_id) |
| public      | v_pipeline_with_updates                 | 14               | created_at                           | timestamp with time zone | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 15               | updated_at                           | timestamp with time zone | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 16               | closed_at                            | timestamp with time zone | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 17               | outcome                              | text                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 18               | lost_reason                          | text                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 19               | competitor                           | text                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 20               | attempt_number                       | integer(32)              | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 21               | competitor_price                     | numeric(15)              | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 22               | customer_budget                      | numeric(15)              | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 23               | original_creator_id                  | uuid                     | YES         | null           | pipeline_updates                   | accounts_original_creator_id_fkey: references public.profiles(user_id); opportunities_original_creator_id_fkey: references public.profiles(user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public      | v_pipeline_with_updates                 | 24               | account_name                         | text                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 25               | account_pic_name                     | text                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 26               | account_pic_email                    | text                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 27               | account_pic_phone                    | text                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 28               | account_status                       | USER-DEFINED             | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 29               | account_original_lead_id             | text                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 30               | account_original_creator_id          | uuid                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 31               | owner_name                           | text                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 32               | owner_email                          | text                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 33               | lead_company_name                    | text                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 34               | lead_created_by                      | uuid                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 35               | lead_marketing_owner                 | uuid                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 36               | lead_source                          | text                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 37               | original_creator_name                | text                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 38               | original_creator_role                | text                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 39               | original_creator_department          | text                     | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 40               | original_creator_is_marketing        | boolean                  | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 41               | update_count                         | bigint(64)               | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 42               | last_update_at                       | timestamp with time zone | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_pipeline_with_updates                 | 43               | is_overdue                           | boolean                  | YES         | null           | pipeline_updates                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sales_inbox                           | 1                | lead_id                              | text                     | YES         | null           | lead_handover_pool                 | accounts_lead_id_fkey: references public.leads(lead_id); customer_quotations_lead_id_fkey: references public.leads(lead_id); fk_customer_quotations_lead: references public.leads(lead_id); fk_ticket_rate_quotes_lead: references public.leads(lead_id); fk_tickets_lead: references public.leads(lead_id); lead_handover_pool_lead_id_fkey: references public.leads(lead_id); shipment_details_lead_id_fkey: references public.leads(lead_id); ticket_rate_quotes_lead_id_fkey: references public.leads(lead_id); tickets_lead_id_fkey: references public.leads(lead_id)                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public      | v_sales_inbox                           | 2                | company_name                         | text                     | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sales_inbox                           | 3                | contact_name                         | text                     | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sales_inbox                           | 4                | contact_email                        | text                     | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sales_inbox                           | 5                | contact_phone                        | text                     | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sales_inbox                           | 6                | handover_pool_id                     | bigint(64)               | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sales_inbox                           | 7                | handed_over_at                       | timestamp with time zone | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sales_inbox                           | 8                | handover_notes                       | text                     | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sales_inbox                           | 9                | priority                             | integer(32)              | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sales_inbox                           | 10               | expires_at                           | timestamp with time zone | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sales_inbox                           | 11               | handed_over_by_name                  | text                     | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sales_inbox                           | 12               | marketing_owner_user_id              | uuid                     | YES         | null           | lead_handover_pool                 | leads_marketing_owner_user_id_fkey: references public.profiles(user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| public      | v_sales_inbox                           | 13               | sales_owner_user_id                  | uuid                     | YES         | null           | lead_handover_pool                 | leads_sales_owner_user_id_fkey: references public.profiles(user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public      | v_sales_inbox                           | 14               | handover_eligible                    | boolean                  | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sales_inbox                           | 15               | created_at                           | timestamp with time zone | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sales_inbox                           | 16               | updated_at                           | timestamp with time zone | YES         | null           | lead_handover_pool                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sla_metrics                           | 1                | ticket_id                            | uuid                     | YES         | null           | ticket_responses                   | customer_quotations_ticket_id_fkey: references public.tickets(id); ticket_assignments_ticket_id_fkey: references public.tickets(id); ticket_attachments_ticket_id_fkey: references public.tickets(id); ticket_comments_ticket_id_fkey: references public.tickets(id); ticket_events_ticket_id_fkey: references public.tickets(id); ticket_rate_quotes_ticket_id_fkey: references public.tickets(id); ticket_response_exchanges_ticket_id_fkey: references public.tickets(id); ticket_response_metrics_ticket_id_fkey: references public.tickets(id); ticket_responses_ticket_id_fkey: references public.tickets(id); ticket_sla_tracking_ticket_id_fkey: references public.tickets(id)                                                                                                                                                                                                                                                                                                               |
| public      | v_sla_metrics                           | 2                | ticket_code                          | character varying(20)    | YES         | null           | ticket_responses                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sla_metrics                           | 3                | ticket_type                          | USER-DEFINED             | YES         | null           | ticket_responses                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sla_metrics                           | 4                | department                           | USER-DEFINED             | YES         | null           | ticket_responses                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sla_metrics                           | 5                | origin_dept                          | USER-DEFINED             | YES         | null           | ticket_responses                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sla_metrics                           | 6                | target_dept                          | USER-DEFINED             | YES         | null           | ticket_responses                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sla_metrics                           | 7                | status                               | USER-DEFINED             | YES         | null           | ticket_responses                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sla_metrics                           | 8                | ticket_created_at                    | timestamp with time zone | YES         | null           | ticket_responses                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sla_metrics                           | 9                | first_response_at                    | timestamp with time zone | YES         | null           | ticket_responses                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sla_metrics                           | 10               | first_response_seconds               | integer(32)              | YES         | null           | ticket_responses                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sla_metrics                           | 11               | first_response_sla_met               | boolean                  | YES         | null           | ticket_responses                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sla_metrics                           | 12               | avg_creator_response_seconds         | integer(32)              | YES         | null           | ticket_responses                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sla_metrics                           | 13               | avg_assignee_response_seconds        | integer(32)              | YES         | null           | ticket_responses                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sla_metrics                           | 14               | total_responses                      | bigint(64)               | YES         | null           | ticket_responses                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sla_metrics                           | 15               | creator_responses                    | bigint(64)               | YES         | null           | ticket_responses                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | v_sla_metrics                           | 16               | ops_responses                        | bigint(64)               | YES         | null           | ticket_responses                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_company_sla_metrics                  | 1                | ticket_type                          | text                     | YES         | null           | vw_department_sla_metrics          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_company_sla_metrics                  | 2                | total_users                          | numeric                  | YES         | null           | vw_department_sla_metrics          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_company_sla_metrics                  | 3                | total_tickets_created                | numeric                  | YES         | null           | vw_department_sla_metrics          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_company_sla_metrics                  | 4                | total_tickets_assigned               | numeric                  | YES         | null           | vw_department_sla_metrics          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_company_sla_metrics                  | 5                | avg_first_response_seconds           | integer(32)              | YES         | null           | vw_department_sla_metrics          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_company_sla_metrics                  | 6                | avg_stage_response_seconds           | integer(32)              | YES         | null           | vw_department_sla_metrics          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_company_sla_metrics                  | 7                | avg_resolution_seconds               | integer(32)              | YES         | null           | vw_department_sla_metrics          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_company_sla_metrics                  | 8                | avg_first_quote_seconds              | integer(32)              | YES         | null           | vw_department_sla_metrics          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_company_sla_metrics                  | 9                | first_response_sla_met               | numeric                  | YES         | null           | vw_department_sla_metrics          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_company_sla_metrics                  | 10               | first_response_sla_breached          | numeric                  | YES         | null           | vw_department_sla_metrics          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_company_sla_metrics                  | 11               | resolution_sla_met                   | numeric                  | YES         | null           | vw_department_sla_metrics          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_company_sla_metrics                  | 12               | resolution_sla_breached              | numeric                  | YES         | null           | vw_department_sla_metrics          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_company_sla_metrics                  | 13               | total_accepted_costs                 | numeric                  | YES         | null           | vw_department_sla_metrics          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_company_sla_metrics                  | 14               | total_rejected_costs                 | numeric                  | YES         | null           | vw_department_sla_metrics          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_company_sla_metrics                  | 15               | cost_acceptance_rate_percent         | numeric                  | YES         | null           | vw_department_sla_metrics          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 1                | department                           | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 2                | ticket_type                          | text                     | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 3                | total_users                          | bigint(64)               | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 4                | total_tickets_created                | numeric                  | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 5                | avg_creator_stage_response_seconds   | integer(32)              | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 6                | creator_sla_met                      | numeric                  | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 7                | creator_sla_breached                 | numeric                  | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 8                | total_tickets_assigned               | numeric                  | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 9                | avg_first_response_seconds           | integer(32)              | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 10               | avg_stage_response_seconds           | integer(32)              | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 11               | avg_resolution_seconds               | integer(32)              | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 12               | first_response_sla_met               | numeric                  | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 13               | first_response_sla_breached          | numeric                  | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 14               | resolution_sla_met                   | numeric                  | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 15               | resolution_sla_breached              | numeric                  | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 16               | total_quotes                         | numeric                  | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 17               | avg_first_quote_seconds              | integer(32)              | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 18               | total_accepted_costs                 | numeric                  | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 19               | total_rejected_costs                 | numeric                  | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_department_sla_metrics               | 20               | cost_acceptance_rate_percent         | numeric                  | YES         | null           | profiles                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_operational_cost_rejection_analytics | 1                | reason_type                          | USER-DEFINED             | YES         | null           | operational_cost_rejection_reasons |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_operational_cost_rejection_analytics | 2                | count                                | bigint(64)               | YES         | null           | operational_cost_rejection_reasons |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_operational_cost_rejection_analytics | 3                | percentage                           | numeric                  | YES         | null           | operational_cost_rejection_reasons |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_operational_cost_rejection_analytics | 4                | avg_suggested_amount                 | numeric                  | YES         | null           | operational_cost_rejection_reasons |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_operational_cost_rejection_analytics | 5                | month                                | timestamp with time zone | YES         | null           | operational_cost_rejection_reasons |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 1                | opportunity_id                       | text                     | YES         | null           | accounts                           | cadence_enrollments_opportunity_id_fkey: references public.opportunities(opportunity_id); customer_quotations_opportunity_id_fkey: references public.opportunities(opportunity_id); fk_customer_quotations_opportunity: references public.opportunities(opportunity_id); fk_ticket_rate_quotes_opportunity: references public.opportunities(opportunity_id); fk_tickets_opportunity: references public.opportunities(opportunity_id); leads_opportunity_id_fkey: references public.opportunities(opportunity_id); opportunity_stage_history_opportunity_id_fkey: references public.opportunities(opportunity_id); pipeline_updates_opportunity_id_fkey: references public.opportunities(opportunity_id); ticket_rate_quotes_opportunity_id_fkey: references public.opportunities(opportunity_id); tickets_opportunity_id_fkey: references public.opportunities(opportunity_id)                                                                                                                       |
| public      | vw_pipeline_detail                      | 2                | name                                 | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 3                | stage                                | USER-DEFINED             | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 4                | estimated_value                      | numeric(15)              | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 5                | deal_value                           | numeric(15)              | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 6                | currency                             | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 7                | probability                          | integer(32)              | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 8                | expected_close_date                  | date                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 9                | next_step                            | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 10               | next_step_due_date                   | date                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 11               | close_reason                         | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 12               | lost_reason                          | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 13               | competitor_price                     | numeric(15)              | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 14               | customer_budget                      | numeric(15)              | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 15               | closed_at                            | timestamp with time zone | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 16               | notes                                | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 17               | created_at                           | timestamp with time zone | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 18               | updated_at                           | timestamp with time zone | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 19               | quotation_status                     | character varying(50)    | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 20               | latest_quotation_id                  | uuid                     | YES         | null           | accounts                           | leads_latest_quotation_id_fkey: references public.customer_quotations(id); opportunities_latest_quotation_id_fkey: references public.customer_quotations(id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public      | vw_pipeline_detail                      | 21               | account_id                           | text                     | YES         | null           | accounts                           | cadence_enrollments_account_id_fkey: references public.accounts(account_id); contacts_account_id_fkey: references public.accounts(account_id); leads_account_id_fkey: references public.accounts(account_id); opportunities_account_id_fkey: references public.accounts(account_id); tickets_account_id_fkey: references public.accounts(account_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| public      | vw_pipeline_detail                      | 22               | company_name                         | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 23               | industry                             | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 24               | address                              | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 25               | city                                 | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 26               | account_status                       | USER-DEFINED             | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 27               | pic_name                             | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 28               | pic_email                            | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 29               | pic_phone                            | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 30               | lead_id                              | text                     | YES         | null           | accounts                           | accounts_lead_id_fkey: references public.leads(lead_id); customer_quotations_lead_id_fkey: references public.leads(lead_id); fk_customer_quotations_lead: references public.leads(lead_id); fk_ticket_rate_quotes_lead: references public.leads(lead_id); fk_tickets_lead: references public.leads(lead_id); lead_handover_pool_lead_id_fkey: references public.leads(lead_id); shipment_details_lead_id_fkey: references public.leads(lead_id); ticket_rate_quotes_lead_id_fkey: references public.leads(lead_id); tickets_lead_id_fkey: references public.leads(lead_id)                                                                                                                                                                                                                                                                                                                                                                                                                           |
| public      | vw_pipeline_detail                      | 31               | potential_revenue                    | numeric(15)              | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 32               | lead_source                          | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 33               | lead_creator_name                    | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 34               | lead_creator_department              | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 35               | owner_user_id                        | uuid                     | YES         | null           | accounts                           | accounts_owner_user_id_fkey: references public.profiles(user_id); activities_owner_user_id_fkey: references public.profiles(user_id); cadences_owner_user_id_fkey: references public.profiles(user_id); opportunities_owner_user_id_fkey: references public.profiles(user_id); sales_plans_owner_user_id_fkey: references public.profiles(user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| public      | vw_pipeline_detail                      | 36               | owner_name                           | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 37               | owner_email                          | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_pipeline_detail                      | 38               | owner_department                     | text                     | YES         | null           | accounts                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_quotation_rejection_analytics        | 1                | reason_type                          | USER-DEFINED             | YES         | null           | quotation_rejection_reasons        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_quotation_rejection_analytics        | 2                | count                                | bigint(64)               | YES         | null           | quotation_rejection_reasons        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_quotation_rejection_analytics        | 3                | percentage                           | numeric                  | YES         | null           | quotation_rejection_reasons        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_quotation_rejection_analytics        | 4                | avg_competitor_amount                | numeric                  | YES         | null           | quotation_rejection_reasons        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_quotation_rejection_analytics        | 5                | avg_customer_budget                  | numeric                  | YES         | null           | quotation_rejection_reasons        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_quotation_rejection_analytics        | 6                | month                                | timestamp with time zone | YES         | null           | quotation_rejection_reasons        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_ticket_status_distribution           | 1                | status                               | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_ticket_status_distribution           | 2                | ticket_type                          | text                     | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_ticket_status_distribution           | 3                | count                                | bigint(64)               | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_ticket_status_distribution           | 4                | percentage                           | numeric                  | YES         | null           | tickets                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_leaderboard                 | 1                | user_id                              | uuid                     | YES         | null           | vw_user_sla_metrics                | audit_logs_user_id_fkey: references public.profiles(user_id); ticket_comments_user_id_fkey: references public.profiles(user_id); ticket_responses_user_id_fkey: references public.profiles(user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public      | vw_user_sla_leaderboard                 | 2                | user_name                            | text                     | YES         | null           | vw_user_sla_metrics                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_leaderboard                 | 3                | user_role                            | USER-DEFINED             | YES         | null           | vw_user_sla_metrics                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_leaderboard                 | 4                | role_category                        | text                     | YES         | null           | vw_user_sla_metrics                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_leaderboard                 | 5                | ticket_type                          | text                     | YES         | null           | vw_user_sla_metrics                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_leaderboard                 | 6                | tickets_assigned                     | bigint(64)               | YES         | null           | vw_user_sla_metrics                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_leaderboard                 | 7                | assignee_avg_first_response_seconds  | integer(32)              | YES         | null           | vw_user_sla_metrics                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_leaderboard                 | 8                | assignee_avg_resolution_seconds      | integer(32)              | YES         | null           | vw_user_sla_metrics                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_leaderboard                 | 9                | ops_acceptance_rate_percent          | numeric                  | YES         | null           | vw_user_sla_metrics                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_leaderboard                 | 10               | performance_score                    | numeric                  | YES         | null           | vw_user_sla_metrics                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_leaderboard                 | 11               | department_rank                      | bigint(64)               | YES         | null           | vw_user_sla_metrics                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 1                | user_id                              | uuid                     | YES         | null           | ticket_response_metrics            | audit_logs_user_id_fkey: references public.profiles(user_id); ticket_comments_user_id_fkey: references public.profiles(user_id); ticket_responses_user_id_fkey: references public.profiles(user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public      | vw_user_sla_metrics                     | 2                | user_name                            | text                     | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 3                | user_role                            | USER-DEFINED             | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 4                | role_category                        | text                     | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 5                | ticket_type                          | text                     | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 6                | tickets_created                      | bigint(64)               | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 7                | creator_avg_stage_response_seconds   | integer(32)              | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 8                | creator_sla_stage_response_met       | bigint(64)               | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 9                | creator_sla_stage_response_breached  | bigint(64)               | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 10               | tickets_assigned                     | bigint(64)               | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 11               | assignee_avg_first_response_seconds  | integer(32)              | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 12               | assignee_avg_stage_response_seconds  | integer(32)              | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 13               | assignee_avg_resolution_seconds      | integer(32)              | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 14               | assignee_sla_first_response_met      | bigint(64)               | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 15               | assignee_sla_first_response_breached | bigint(64)               | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 16               | assignee_sla_stage_response_met      | bigint(64)               | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 17               | assignee_sla_resolution_met          | bigint(64)               | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 18               | assignee_sla_resolution_breached     | bigint(64)               | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 19               | ops_total_quotes                     | bigint(64)               | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 20               | ops_avg_first_quote_seconds          | integer(32)              | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 21               | ops_sla_first_quote_met              | bigint(64)               | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 22               | ops_sla_first_quote_breached         | bigint(64)               | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 23               | ops_total_costs                      | bigint(64)               | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 24               | ops_accepted_costs                   | bigint(64)               | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 25               | ops_rejected_costs                   | bigint(64)               | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public      | vw_user_sla_metrics                     | 26               | ops_acceptance_rate_percent          | numeric                  | YES         | null           | ticket_response_metrics            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| vault       | decrypted_secrets                       | 1                | id                                   | uuid                     | YES         | null           | vault.secrets                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| vault       | decrypted_secrets                       | 2                | name                                 | text                     | YES         | null           | vault.secrets                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| vault       | decrypted_secrets                       | 3                | description                          | text                     | YES         | null           | vault.secrets                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| vault       | decrypted_secrets                       | 4                | secret                               | text                     | YES         | null           | vault.secrets                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| vault       | decrypted_secrets                       | 5                | decrypted_secret                     | text                     | YES         | null           | vault.secrets                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| vault       | decrypted_secrets                       | 6                | key_id                               | uuid                     | YES         | null           | vault.secrets                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| vault       | decrypted_secrets                       | 7                | nonce                                | bytea                    | YES         | null           | vault.secrets                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| vault       | decrypted_secrets                       | 8                | created_at                           | timestamp with time zone | YES         | null           | vault.secrets                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| vault       | decrypted_secrets                       | 9                | updated_at                           | timestamp with time zone | YES         | null           | vault.secrets                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |

DATA FUNCTION
| schema_name    | function_name                      | arguments                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | return_type                         | language | owner               | full_signature                                                                                                                                                                                                                                  | security_definer |
| -------------- | ---------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------- | -------- | ------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------- |
| auth           | email                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | text                                | sql      | supabase_auth_admin | auth.email()                                                                                                                                                                                                                                    | false            |
| auth           | jwt                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | jsonb                               | sql      | supabase_auth_admin | auth.jwt()                                                                                                                                                                                                                                      | false            |
| auth           | role                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | text                                | sql      | supabase_auth_admin | auth.role()                                                                                                                                                                                                                                     | false            |
| auth           | uid                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                | sql      | supabase_auth_admin | auth.uid()                                                                                                                                                                                                                                      | false            |
| extensions     | armor                              | bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | text                                | c        | postgres            | armor(bytea)                                                                                                                                                                                                                                    | false            |
| extensions     | armor                              | bytea, text[], text[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | text                                | c        | postgres            | armor(bytea,text[],text[])                                                                                                                                                                                                                      | false            |
| extensions     | crypt                              | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | text                                | c        | postgres            | crypt(text,text)                                                                                                                                                                                                                                | false            |
| extensions     | dearmor                            | text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | bytea                               | c        | postgres            | dearmor(text)                                                                                                                                                                                                                                   | false            |
| extensions     | decrypt                            | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea                               | c        | postgres            | decrypt(bytea,bytea,text)                                                                                                                                                                                                                       | false            |
| extensions     | decrypt_iv                         | bytea, bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | bytea                               | c        | postgres            | decrypt_iv(bytea,bytea,bytea,text)                                                                                                                                                                                                              | false            |
| extensions     | digest                             | bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | bytea                               | c        | postgres            | digest(bytea,text)                                                                                                                                                                                                                              | false            |
| extensions     | digest                             | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | bytea                               | c        | postgres            | digest(text,text)                                                                                                                                                                                                                               | false            |
| extensions     | encrypt                            | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea                               | c        | postgres            | encrypt(bytea,bytea,text)                                                                                                                                                                                                                       | false            |
| extensions     | encrypt_iv                         | bytea, bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | bytea                               | c        | postgres            | encrypt_iv(bytea,bytea,bytea,text)                                                                                                                                                                                                              | false            |
| extensions     | gen_random_bytes                   | integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | bytea                               | c        | postgres            | gen_random_bytes(integer)                                                                                                                                                                                                                       | false            |
| extensions     | gen_random_uuid                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                | c        | postgres            | extensions.gen_random_uuid()                                                                                                                                                                                                                    | false            |
| extensions     | gen_salt                           | text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | text                                | c        | postgres            | gen_salt(text)                                                                                                                                                                                                                                  | false            |
| extensions     | gen_salt                           | text, integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | text                                | c        | postgres            | gen_salt(text,integer)                                                                                                                                                                                                                          | false            |
| extensions     | grant_pg_cron_access               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger                       | plpgsql  | supabase_admin      | grant_pg_cron_access()                                                                                                                                                                                                                          | false            |
| extensions     | grant_pg_graphql_access            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger                       | plpgsql  | supabase_admin      | grant_pg_graphql_access()                                                                                                                                                                                                                       | false            |
| extensions     | grant_pg_net_access                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger                       | plpgsql  | supabase_admin      | grant_pg_net_access()                                                                                                                                                                                                                           | false            |
| extensions     | hmac                               | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea                               | c        | postgres            | hmac(bytea,bytea,text)                                                                                                                                                                                                                          | false            |
| extensions     | hmac                               | text, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | bytea                               | c        | postgres            | hmac(text,text,text)                                                                                                                                                                                                                            | false            |
| extensions     | pg_stat_statements                 | showtext boolean, OUT userid oid, OUT dbid oid, OUT toplevel boolean, OUT queryid bigint, OUT query text, OUT plans bigint, OUT total_plan_time double precision, OUT min_plan_time double precision, OUT max_plan_time double precision, OUT mean_plan_time double precision, OUT stddev_plan_time double precision, OUT calls bigint, OUT total_exec_time double precision, OUT min_exec_time double precision, OUT max_exec_time double precision, OUT mean_exec_time double precision, OUT stddev_exec_time double precision, OUT rows bigint, OUT shared_blks_hit bigint, OUT shared_blks_read bigint, OUT shared_blks_dirtied bigint, OUT shared_blks_written bigint, OUT local_blks_hit bigint, OUT local_blks_read bigint, OUT local_blks_dirtied bigint, OUT local_blks_written bigint, OUT temp_blks_read bigint, OUT temp_blks_written bigint, OUT shared_blk_read_time double precision, OUT shared_blk_write_time double precision, OUT local_blk_read_time double precision, OUT local_blk_write_time double precision, OUT temp_blk_read_time double precision, OUT temp_blk_write_time double precision, OUT wal_records bigint, OUT wal_fpi bigint, OUT wal_bytes numeric, OUT jit_functions bigint, OUT jit_generation_time double precision, OUT jit_inlining_count bigint, OUT jit_inlining_time double precision, OUT jit_optimization_count bigint, OUT jit_optimization_time double precision, OUT jit_emission_count bigint, OUT jit_emission_time double precision, OUT jit_deform_count bigint, OUT jit_deform_time double precision, OUT stats_since timestamp with time zone, OUT minmax_stats_since timestamp with time zone | SETOF record                        | c        | postgres            | pg_stat_statements(boolean)                                                                                                                                                                                                                     | false            |
| extensions     | pg_stat_statements_info            | OUT dealloc bigint, OUT stats_reset timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | record                              | c        | postgres            | pg_stat_statements_info()                                                                                                                                                                                                                       | false            |
| extensions     | pg_stat_statements_reset           | userid oid DEFAULT 0, dbid oid DEFAULT 0, queryid bigint DEFAULT 0, minmax_only boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | timestamp with time zone            | c        | postgres            | pg_stat_statements_reset(oid,oid,bigint,boolean)                                                                                                                                                                                                | false            |
| extensions     | pgp_armor_headers                  | text, OUT key text, OUT value text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | SETOF record                        | c        | postgres            | pgp_armor_headers(text)                                                                                                                                                                                                                         | false            |
| extensions     | pgp_key_id                         | bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | text                                | c        | postgres            | pgp_key_id(bytea)                                                                                                                                                                                                                               | false            |
| extensions     | pgp_pub_decrypt                    | bytea, bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | text                                | c        | postgres            | pgp_pub_decrypt(bytea,bytea)                                                                                                                                                                                                                    | false            |
| extensions     | pgp_pub_decrypt                    | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | text                                | c        | postgres            | pgp_pub_decrypt(bytea,bytea,text)                                                                                                                                                                                                               | false            |
| extensions     | pgp_pub_decrypt                    | bytea, bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | text                                | c        | postgres            | pgp_pub_decrypt(bytea,bytea,text,text)                                                                                                                                                                                                          | false            |
| extensions     | pgp_pub_decrypt_bytea              | bytea, bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | bytea                               | c        | postgres            | pgp_pub_decrypt_bytea(bytea,bytea)                                                                                                                                                                                                              | false            |
| extensions     | pgp_pub_decrypt_bytea              | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea                               | c        | postgres            | pgp_pub_decrypt_bytea(bytea,bytea,text)                                                                                                                                                                                                         | false            |
| extensions     | pgp_pub_decrypt_bytea              | bytea, bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | bytea                               | c        | postgres            | pgp_pub_decrypt_bytea(bytea,bytea,text,text)                                                                                                                                                                                                    | false            |
| extensions     | pgp_pub_encrypt                    | text, bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | bytea                               | c        | postgres            | pgp_pub_encrypt(text,bytea)                                                                                                                                                                                                                     | false            |
| extensions     | pgp_pub_encrypt                    | text, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | bytea                               | c        | postgres            | pgp_pub_encrypt(text,bytea,text)                                                                                                                                                                                                                | false            |
| extensions     | pgp_pub_encrypt_bytea              | bytea, bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | bytea                               | c        | postgres            | pgp_pub_encrypt_bytea(bytea,bytea)                                                                                                                                                                                                              | false            |
| extensions     | pgp_pub_encrypt_bytea              | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea                               | c        | postgres            | pgp_pub_encrypt_bytea(bytea,bytea,text)                                                                                                                                                                                                         | false            |
| extensions     | pgp_sym_decrypt                    | bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | text                                | c        | postgres            | pgp_sym_decrypt(bytea,text)                                                                                                                                                                                                                     | false            |
| extensions     | pgp_sym_decrypt                    | bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | text                                | c        | postgres            | pgp_sym_decrypt(bytea,text,text)                                                                                                                                                                                                                | false            |
| extensions     | pgp_sym_decrypt_bytea              | bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | bytea                               | c        | postgres            | pgp_sym_decrypt_bytea(bytea,text)                                                                                                                                                                                                               | false            |
| extensions     | pgp_sym_decrypt_bytea              | bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | bytea                               | c        | postgres            | pgp_sym_decrypt_bytea(bytea,text,text)                                                                                                                                                                                                          | false            |
| extensions     | pgp_sym_encrypt                    | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | bytea                               | c        | postgres            | pgp_sym_encrypt(text,text)                                                                                                                                                                                                                      | false            |
| extensions     | pgp_sym_encrypt                    | text, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | bytea                               | c        | postgres            | pgp_sym_encrypt(text,text,text)                                                                                                                                                                                                                 | false            |
| extensions     | pgp_sym_encrypt_bytea              | bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | bytea                               | c        | postgres            | pgp_sym_encrypt_bytea(bytea,text)                                                                                                                                                                                                               | false            |
| extensions     | pgp_sym_encrypt_bytea              | bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | bytea                               | c        | postgres            | pgp_sym_encrypt_bytea(bytea,text,text)                                                                                                                                                                                                          | false            |
| extensions     | pgrst_ddl_watch                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger                       | plpgsql  | supabase_admin      | pgrst_ddl_watch()                                                                                                                                                                                                                               | false            |
| extensions     | pgrst_drop_watch                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger                       | plpgsql  | supabase_admin      | pgrst_drop_watch()                                                                                                                                                                                                                              | false            |
| extensions     | set_graphql_placeholder            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger                       | plpgsql  | supabase_admin      | set_graphql_placeholder()                                                                                                                                                                                                                       | false            |
| extensions     | uuid_generate_v1                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                | c        | postgres            | uuid_generate_v1()                                                                                                                                                                                                                              | false            |
| extensions     | uuid_generate_v1mc                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                | c        | postgres            | uuid_generate_v1mc()                                                                                                                                                                                                                            | false            |
| extensions     | uuid_generate_v3                   | namespace uuid, name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | uuid                                | c        | postgres            | uuid_generate_v3(uuid,text)                                                                                                                                                                                                                     | false            |
| extensions     | uuid_generate_v4                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                | c        | postgres            | uuid_generate_v4()                                                                                                                                                                                                                              | false            |
| extensions     | uuid_generate_v5                   | namespace uuid, name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | uuid                                | c        | postgres            | uuid_generate_v5(uuid,text)                                                                                                                                                                                                                     | false            |
| extensions     | uuid_nil                           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                | c        | postgres            | uuid_nil()                                                                                                                                                                                                                                      | false            |
| extensions     | uuid_ns_dns                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                | c        | postgres            | uuid_ns_dns()                                                                                                                                                                                                                                   | false            |
| extensions     | uuid_ns_oid                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                | c        | postgres            | uuid_ns_oid()                                                                                                                                                                                                                                   | false            |
| extensions     | uuid_ns_url                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                | c        | postgres            | uuid_ns_url()                                                                                                                                                                                                                                   | false            |
| extensions     | uuid_ns_x500                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                | c        | postgres            | uuid_ns_x500()                                                                                                                                                                                                                                  | false            |
| graphql        | _internal_resolve                  | query text, variables jsonb DEFAULT '{}'::jsonb, "operationName" text DEFAULT NULL::text, extensions jsonb DEFAULT NULL::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | jsonb                               | c        | supabase_admin      | graphql._internal_resolve(text,jsonb,text,jsonb)                                                                                                                                                                                                | false            |
| graphql        | comment_directive                  | comment_ text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | jsonb                               | sql      | supabase_admin      | graphql.comment_directive(text)                                                                                                                                                                                                                 | false            |
| graphql        | exception                          | message text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | text                                | plpgsql  | supabase_admin      | graphql.exception(text)                                                                                                                                                                                                                         | false            |
| graphql        | get_schema_version                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | integer                             | sql      | supabase_admin      | graphql.get_schema_version()                                                                                                                                                                                                                    | true             |
| graphql        | increment_schema_version           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger                       | plpgsql  | supabase_admin      | graphql.increment_schema_version()                                                                                                                                                                                                              | true             |
| graphql        | resolve                            | query text, variables jsonb DEFAULT '{}'::jsonb, "operationName" text DEFAULT NULL::text, extensions jsonb DEFAULT NULL::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | jsonb                               | plpgsql  | supabase_admin      | graphql.resolve(text,jsonb,text,jsonb)                                                                                                                                                                                                          | false            |
| graphql_public | graphql                            | "operationName" text DEFAULT NULL::text, query text DEFAULT NULL::text, variables jsonb DEFAULT NULL::jsonb, extensions jsonb DEFAULT NULL::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | jsonb                               | sql      | supabase_admin      | graphql_public.graphql(text,text,jsonb,jsonb)                                                                                                                                                                                                   | false            |
| pgbouncer      | get_auth                           | p_usename text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | TABLE(username text, password text) | plpgsql  | supabase_admin      | pgbouncer.get_auth(text)                                                                                                                                                                                                                        | true             |
| public         | auto_record_response_on_comment    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                             | plpgsql  | postgres            | auto_record_response_on_comment()                                                                                                                                                                                                               | true             |
| public         | calculate_business_hours_seconds   | p_start_time timestamp with time zone, p_end_time timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | integer                             | plpgsql  | postgres            | calculate_business_hours_seconds(timestamp with time zone,timestamp with time zone)                                                                                                                                                             | false            |
| public         | can_access_ticketing               | user_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | boolean                             | plpgsql  | postgres            | can_access_ticketing(uuid)                                                                                                                                                                                                                      | true             |
| public         | can_see_account_via_ticketing      | p_user_id uuid, p_account_id text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | boolean                             | plpgsql  | postgres            | can_see_account_via_ticketing(uuid,text)                                                                                                                                                                                                        | true             |
| public         | check_idempotency                  | p_key text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | jsonb                               | plpgsql  | postgres            | check_idempotency(text)                                                                                                                                                                                                                         | false            |
| public         | check_ticket_has_quotation         | p_ticket_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | jsonb                               | plpgsql  | postgres            | check_ticket_has_quotation(uuid)                                                                                                                                                                                                                | true             |
| public         | cleanup_expired_idempotency        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | integer                             | plpgsql  | postgres            | cleanup_expired_idempotency()                                                                                                                                                                                                                   | false            |
| public         | create_quotation_from_lead         | p_lead_id text, p_created_by uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | jsonb                               | plpgsql  | postgres            | create_quotation_from_lead(text,uuid)                                                                                                                                                                                                           | true             |
| public         | create_quotation_from_opportunity  | p_opportunity_id text, p_created_by uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | jsonb                               | plpgsql  | postgres            | create_quotation_from_opportunity(text,uuid)                                                                                                                                                                                                    | true             |
| public         | create_quotation_from_pipeline     | p_opportunity_id text, p_customer_name text, p_customer_company text DEFAULT NULL::text, p_customer_email text DEFAULT NULL::text, p_customer_phone text DEFAULT NULL::text, p_customer_address text DEFAULT NULL::text, p_service_type text DEFAULT NULL::text, p_incoterm text DEFAULT NULL::text, p_fleet_type text DEFAULT NULL::text, p_fleet_quantity integer DEFAULT NULL::integer, p_commodity text DEFAULT NULL::text, p_cargo_description text DEFAULT NULL::text, p_cargo_weight numeric DEFAULT NULL::numeric, p_cargo_weight_unit text DEFAULT 'kg'::text, p_cargo_volume numeric DEFAULT NULL::numeric, p_cargo_volume_unit text DEFAULT 'cbm'::text, p_cargo_quantity integer DEFAULT NULL::integer, p_cargo_quantity_unit text DEFAULT NULL::text, p_origin_address text DEFAULT NULL::text, p_origin_city text DEFAULT NULL::text, p_origin_country text DEFAULT NULL::text, p_origin_port text DEFAULT NULL::text, p_destination_address text DEFAULT NULL::text, p_destination_city text DEFAULT NULL::text, p_destination_country text DEFAULT NULL::text, p_destination_port text DEFAULT NULL::text, p_rate_structure text DEFAULT 'bundling'::text, p_total_cost numeric DEFAULT 0, p_target_margin_percent numeric DEFAULT 0, p_total_selling_rate numeric DEFAULT 0, p_currency text DEFAULT 'IDR'::text, p_scope_of_work text DEFAULT NULL::text, p_terms_includes text[] DEFAULT '{}'::text[], p_terms_excludes text[] DEFAULT '{}'::text[], p_terms_notes text DEFAULT NULL::text, p_validity_days integer DEFAULT 14                                                                                                         | jsonb                               | plpgsql  | postgres            | create_quotation_from_pipeline(text,text,text,text,text,text,text,text,text,integer,text,text,numeric,text,numeric,text,integer,text,text,text,text,text,text,text,text,text,text,numeric,numeric,numeric,text,text,text[],text[],text,integer) | true             |
| public         | crm_cleanup_old_notification_logs  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | integer                             | plpgsql  | postgres            | crm_cleanup_old_notification_logs()                                                                                                                                                                                                             | false            |
| public         | crm_log_notification               | p_entity_type text, p_entity_id text, p_event text, p_threshold integer DEFAULT NULL::integer, p_recipient_emails text[] DEFAULT NULL::text[], p_cc_emails text[] DEFAULT NULL::text[], p_subject text DEFAULT NULL::text, p_status text DEFAULT 'sent'::text, p_error_message text DEFAULT NULL::text, p_metadata jsonb DEFAULT NULL::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | bigint                              | plpgsql  | postgres            | crm_log_notification(text,text,text,integer,text[],text[],text,text,text,jsonb)                                                                                                                                                                 | false            |
| public         | crm_notification_exists            | p_entity_type text, p_entity_id text, p_event text, p_threshold integer DEFAULT NULL::integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | boolean                             | plpgsql  | postgres            | crm_notification_exists(text,text,text,integer)                                                                                                                                                                                                 | false            |
| public         | fn_check_quotation_authorization   | p_quotation_id uuid, p_actor_user_id uuid, p_action text DEFAULT 'transition'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | jsonb                               | plpgsql  | postgres            | fn_check_quotation_authorization(uuid,uuid,text)                                                                                                                                                                                                | true             |
| public         | fn_check_ticket_authorization      | p_ticket_id uuid, p_actor_user_id uuid, p_action text DEFAULT 'transition'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | jsonb                               | plpgsql  | postgres            | fn_check_ticket_authorization(uuid,uuid,text)                                                                                                                                                                                                   | true             |
| public         | fn_validate_opportunity_transition | p_current_stage text, p_target_stage text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | jsonb                               | plpgsql  | postgres            | fn_validate_opportunity_transition(text,text)                                                                                                                                                                                                   | false            |
| public         | fn_validate_quotation_transition   | p_current_status text, p_target_status text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | jsonb                               | plpgsql  | postgres            | fn_validate_quotation_transition(text,text)                                                                                                                                                                                                     | false            |
| public         | fn_validate_ticket_transition      | p_current_status text, p_target_status text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | jsonb                               | plpgsql  | postgres            | fn_validate_ticket_transition(text,text)                                                                                                                                                                                                        | false            |
| public         | format_duration                    | p_seconds integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | text                                | plpgsql  | postgres            | format_duration(integer)                                                                                                                                                                                                                        | false            |
| public         | generate_account_id                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                             | plpgsql  | postgres            | generate_account_id()                                                                                                                                                                                                                           | false            |
| public         | generate_activity_id               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                             | plpgsql  | postgres            | generate_activity_id()                                                                                                                                                                                                                          | false            |
| public         | generate_attachment_id             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                             | plpgsql  | postgres            | generate_attachment_id()                                                                                                                                                                                                                        | false            |
| public         | generate_contact_id                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                             | plpgsql  | postgres            | generate_contact_id()                                                                                                                                                                                                                           | false            |
| public         | generate_customer_quotation_number |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | character varying                   | plpgsql  | postgres            | generate_customer_quotation_number()                                                                                                                                                                                                            | true             |
| public         | generate_lead_id                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                             | plpgsql  | postgres            | generate_lead_id()                                                                                                                                                                                                                              | false            |
| public         | generate_opportunity_id            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                             | plpgsql  | postgres            | generate_opportunity_id()                                                                                                                                                                                                                       | false            |
| public         | generate_pipeline_update_id        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                             | plpgsql  | postgres            | generate_pipeline_update_id()                                                                                                                                                                                                                   | false            |
| public         | generate_sales_plan_id             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                             | plpgsql  | postgres            | generate_sales_plan_id()                                                                                                                                                                                                                        | false            |
| public         | generate_shipment_detail_id        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                             | plpgsql  | postgres            | generate_shipment_detail_id()                                                                                                                                                                                                                   | false            |
| public         | generate_ticket_code               | p_ticket_type ticket_type, p_department ticketing_department                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | character varying                   | plpgsql  | postgres            | generate_ticket_code(ticket_type,ticketing_department)                                                                                                                                                                                          | true             |
| public         | generate_ticket_quote_number       | p_ticket_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | character varying                   | plpgsql  | postgres            | generate_ticket_quote_number(uuid)                                                                                                                                                                                                              | true             |
| public         | get_account_pipeline_summary       | p_account_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | jsonb                               | plpgsql  | postgres            | get_account_pipeline_summary(uuid)                                                                                                                                                                                                              | true             |
| public         | get_entity_quotation_stats         | p_lead_id text DEFAULT NULL::text, p_opportunity_id text DEFAULT NULL::text, p_ticket_id uuid DEFAULT NULL::uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | jsonb                               | plpgsql  | postgres            | get_entity_quotation_stats(text,text,uuid)                                                                                                                                                                                                      | true             |

RINGKASAN METADATA
| schema_name    | function_name                      | volatility | procost | prorows | proisstrict | proretset | proparallel | provolatile |
| -------------- | ---------------------------------- | ---------- | ------- | ------- | ----------- | --------- | ----------- | ----------- |
| auth           | email                              | stable     | 100     | 0       | false       | false     | u           | s           |
| auth           | jwt                                | stable     | 100     | 0       | false       | false     | u           | s           |
| auth           | role                               | stable     | 100     | 0       | false       | false     | u           | s           |
| auth           | uid                                | stable     | 100     | 0       | false       | false     | u           | s           |
| extensions     | armor                              | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | armor                              | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | crypt                              | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | dearmor                            | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | decrypt                            | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | decrypt_iv                         | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | digest                             | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | digest                             | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | encrypt                            | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | encrypt_iv                         | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | gen_random_bytes                   | volatile   | 1       | 0       | true        | false     | s           | v           |
| extensions     | gen_random_uuid                    | volatile   | 1       | 0       | false       | false     | s           | v           |
| extensions     | gen_salt                           | volatile   | 1       | 0       | true        | false     | s           | v           |
| extensions     | gen_salt                           | volatile   | 1       | 0       | true        | false     | s           | v           |
| extensions     | grant_pg_cron_access               | volatile   | 100     | 0       | false       | false     | u           | v           |
| extensions     | grant_pg_graphql_access            | volatile   | 100     | 0       | false       | false     | u           | v           |
| extensions     | grant_pg_net_access                | volatile   | 100     | 0       | false       | false     | u           | v           |
| extensions     | hmac                               | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | hmac                               | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | pg_stat_statements                 | volatile   | 1       | 1000    | true        | true      | s           | v           |
| extensions     | pg_stat_statements_info            | volatile   | 1       | 0       | true        | false     | s           | v           |
| extensions     | pg_stat_statements_reset           | volatile   | 1       | 0       | true        | false     | s           | v           |
| extensions     | pgp_armor_headers                  | immutable  | 1       | 1000    | true        | true      | s           | i           |
| extensions     | pgp_key_id                         | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | pgp_pub_decrypt                    | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | pgp_pub_decrypt                    | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | pgp_pub_decrypt                    | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | pgp_pub_decrypt_bytea              | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | pgp_pub_decrypt_bytea              | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | pgp_pub_decrypt_bytea              | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | pgp_pub_encrypt                    | volatile   | 1       | 0       | true        | false     | s           | v           |
| extensions     | pgp_pub_encrypt                    | volatile   | 1       | 0       | true        | false     | s           | v           |
| extensions     | pgp_pub_encrypt_bytea              | volatile   | 1       | 0       | true        | false     | s           | v           |
| extensions     | pgp_pub_encrypt_bytea              | volatile   | 1       | 0       | true        | false     | s           | v           |
| extensions     | pgp_sym_decrypt                    | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | pgp_sym_decrypt                    | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | pgp_sym_decrypt_bytea              | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | pgp_sym_decrypt_bytea              | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | pgp_sym_encrypt                    | volatile   | 1       | 0       | true        | false     | s           | v           |
| extensions     | pgp_sym_encrypt                    | volatile   | 1       | 0       | true        | false     | s           | v           |
| extensions     | pgp_sym_encrypt_bytea              | volatile   | 1       | 0       | true        | false     | s           | v           |
| extensions     | pgp_sym_encrypt_bytea              | volatile   | 1       | 0       | true        | false     | s           | v           |
| extensions     | pgrst_ddl_watch                    | volatile   | 100     | 0       | false       | false     | u           | v           |
| extensions     | pgrst_drop_watch                   | volatile   | 100     | 0       | false       | false     | u           | v           |
| extensions     | set_graphql_placeholder            | volatile   | 100     | 0       | false       | false     | u           | v           |
| extensions     | uuid_generate_v1                   | volatile   | 1       | 0       | true        | false     | s           | v           |
| extensions     | uuid_generate_v1mc                 | volatile   | 1       | 0       | true        | false     | s           | v           |
| extensions     | uuid_generate_v3                   | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | uuid_generate_v4                   | volatile   | 1       | 0       | true        | false     | s           | v           |
| extensions     | uuid_generate_v5                   | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | uuid_nil                           | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | uuid_ns_dns                        | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | uuid_ns_oid                        | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | uuid_ns_url                        | immutable  | 1       | 0       | true        | false     | s           | i           |
| extensions     | uuid_ns_x500                       | immutable  | 1       | 0       | true        | false     | s           | i           |
| graphql        | _internal_resolve                  | volatile   | 1       | 0       | false       | false     | u           | v           |
| graphql        | comment_directive                  | immutable  | 100     | 0       | false       | false     | u           | i           |
| graphql        | exception                          | volatile   | 100     | 0       | false       | false     | u           | v           |
| graphql        | get_schema_version                 | volatile   | 100     | 0       | false       | false     | u           | v           |
| graphql        | increment_schema_version           | volatile   | 100     | 0       | false       | false     | u           | v           |
| graphql        | resolve                            | volatile   | 100     | 0       | false       | false     | u           | v           |
| graphql_public | graphql                            | volatile   | 100     | 0       | false       | false     | u           | v           |
| pgbouncer      | get_auth                           | volatile   | 100     | 1000    | false       | true      | u           | v           |
| public         | auto_record_response_on_comment    | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | calculate_business_hours_seconds   | stable     | 100     | 0       | false       | false     | u           | s           |
| public         | can_access_ticketing               | stable     | 100     | 0       | false       | false     | u           | s           |
| public         | can_see_account_via_ticketing      | stable     | 100     | 0       | false       | false     | u           | s           |
| public         | check_idempotency                  | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | check_ticket_has_quotation         | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | cleanup_expired_idempotency        | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | create_quotation_from_lead         | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | create_quotation_from_opportunity  | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | create_quotation_from_pipeline     | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | crm_cleanup_old_notification_logs  | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | crm_log_notification               | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | crm_notification_exists            | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | fn_check_quotation_authorization   | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | fn_check_ticket_authorization      | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | fn_validate_opportunity_transition | immutable  | 100     | 0       | false       | false     | u           | i           |
| public         | fn_validate_quotation_transition   | immutable  | 100     | 0       | false       | false     | u           | i           |
| public         | fn_validate_ticket_transition      | immutable  | 100     | 0       | false       | false     | u           | i           |
| public         | format_duration                    | immutable  | 100     | 0       | false       | false     | u           | i           |
| public         | generate_account_id                | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | generate_activity_id               | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | generate_attachment_id             | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | generate_contact_id                | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | generate_customer_quotation_number | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | generate_lead_id                   | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | generate_opportunity_id            | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | generate_pipeline_update_id        | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | generate_sales_plan_id             | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | generate_shipment_detail_id        | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | generate_ticket_code               | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | generate_ticket_quote_number       | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | get_account_pipeline_summary       | volatile   | 100     | 0       | false       | false     | u           | v           |
| public         | get_entity_quotation_stats         | volatile   | 100     | 0       | false       | false     | u           | v           |

RINGKASAN PROPERTY
| name                         | default_version                                | installed_version |
| ---------------------------- | ---------------------------------------------- | ----------------- |
| address_standardizer         | 3.3.7                                          | null              |
| address_standardizer_data_us | 3.3.7                                          | null              |
| amcheck                      | 1.4                                            | null              |
| autoinc                      | 1.0                                            | null              |
| bloom                        | 1.0                                            | null              |
| btree_gin                    | 1.3                                            | null              |
| btree_gist                   | 1.7                                            | null              |
| citext                       | 1.6                                            | null              |
| cube                         | 1.5                                            | null              |
| dblink                       | 1.2                                            | null              |
| dict_int                     | 1.0                                            | null              |
| dict_xsyn                    | 1.0                                            | null              |
| earthdistance                | 1.2                                            | null              |
| file_fdw                     | 1.0                                            | null              |
| fuzzystrmatch                | 1.2                                            | null              |
| hstore                       | 1.8                                            | null              |
| http                         | 1.6                                            | null              |
| hypopg                       | 1.4.1                                          | null              |
| index_advisor                | 0.2.0                                          | null              |
| insert_username              | 1.0                                            | null              |
| intagg                       | 1.1                                            | null              |
| intarray                     | 1.5                                            | null              |
| isn                          | 1.2                                            | null              |
| lo                           | 1.1                                            | null              |
| ltree                        | 1.3                                            | null              |
| moddatetime                  | 1.0                                            | null              |
| pageinspect                  | 1.12                                           | null              |
| pg_buffercache               | 1.5                                            | null              |
| pg_cron                      | 1.6.4                                          | null              |
| pg_freespacemap              | 1.2                                            | null              |
| pg_graphql                   | 1.5.11                                         | 1.5.11            |
| pg_hashids                   | 1.3.0-cd0e1b31d52b394a0df64079406a14a4f7387cd6 | null              |
| pg_jsonschema                | 0.3.3                                          | null              |
| pg_net                       | 0.19.5                                         | null              |
| pg_partman                   | 5.3.1                                          | null              |
| pg_prewarm                   | 1.2                                            | null              |
| pg_repack                    | 1.5.2                                          | null              |
| pg_stat_monitor              | 2.1                                            | null              |
| pg_stat_statements           | 1.11                                           | 1.11              |
| pg_surgery                   | 1.0                                            | null              |
| pg_tle                       | 1.4.0                                          | null              |
| pg_trgm                      | 1.6                                            | null              |
| pg_visibility                | 1.2                                            | null              |
| pg_walinspect                | 1.1                                            | null              |
| pgaudit                      | 17.1                                           | null              |
| pgcrypto                     | 1.3                                            | 1.3               |
| pgjwt                        | 0.2.0                                          | null              |
| pgmq                         | 1.5.1                                          | null              |
| pgroonga                     | 3.2.5                                          | null              |
| pgroonga_database            | 3.2.5                                          | null              |
| pgrouting                    | 3.4.1                                          | null              |
| pgrowlocks                   | 1.2                                            | null              |
| pgsodium                     | 3.1.8                                          | null              |
| pgstattuple                  | 1.5                                            | null              |
| pgtap                        | 1.2.0                                          | null              |
| plpgsql                      | 1.0                                            | 1.0               |
| plpgsql_check                | 2.7                                            | null              |
| postgis                      | 3.3.7                                          | null              |
| postgis_raster               | 3.3.7                                          | null              |
| postgis_sfcgal               | 3.3.7                                          | null              |
| postgis_tiger_geocoder       | 3.3.7                                          | null              |
| postgis_topology             | 3.3.7                                          | null              |
| postgres_fdw                 | 1.1                                            | null              |
| refint                       | 1.0                                            | null              |
| rum                          | 1.3                                            | null              |
| seg                          | 1.4                                            | null              |
| sslinfo                      | 1.2                                            | null              |
| supabase_vault               | 0.3.1                                          | 0.3.1             |
| tablefunc                    | 1.0                                            | null              |
| tcn                          | 1.0                                            | null              |
| tsm_system_rows              | 1.0                                            | null              |
| tsm_system_time              | 1.0                                            | null              |
| unaccent                     | 1.1                                            | null              |
| uuid-ossp                    | 1.1                                            | 1.1               |
| vector                       | 0.8.0                                          | null              |
| wal2json                     | 2.6                                            | null              |
| wrappers                     | 0.5.7                                          | null              |
| xml2                         | 1.1                                            | null              |

RPC EXPOSEURE
| schema_name    | function_name                               | args                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | result                                                                                                                                                                                                                                                                        |
| -------------- | ------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| auth           | email                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | text                                                                                                                                                                                                                                                                          |
| auth           | jwt                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | jsonb                                                                                                                                                                                                                                                                         |
| auth           | role                                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | text                                                                                                                                                                                                                                                                          |
| auth           | uid                                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                                                                                                                                                                                                                                                          |
| extensions     | armor                                       | bytea, text[], text[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | text                                                                                                                                                                                                                                                                          |
| extensions     | armor                                       | bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | text                                                                                                                                                                                                                                                                          |
| extensions     | crypt                                       | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | text                                                                                                                                                                                                                                                                          |
| extensions     | dearmor                                     | text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | bytea                                                                                                                                                                                                                                                                         |
| extensions     | decrypt                                     | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea                                                                                                                                                                                                                                                                         |
| extensions     | decrypt_iv                                  | bytea, bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | bytea                                                                                                                                                                                                                                                                         |
| extensions     | digest                                      | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | bytea                                                                                                                                                                                                                                                                         |
| extensions     | digest                                      | bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | bytea                                                                                                                                                                                                                                                                         |
| extensions     | encrypt                                     | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea                                                                                                                                                                                                                                                                         |
| extensions     | encrypt_iv                                  | bytea, bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | bytea                                                                                                                                                                                                                                                                         |
| extensions     | gen_random_bytes                            | integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | bytea                                                                                                                                                                                                                                                                         |
| extensions     | gen_random_uuid                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                                                                                                                                                                                                                                                          |
| extensions     | gen_salt                                    | text, integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | text                                                                                                                                                                                                                                                                          |
| extensions     | gen_salt                                    | text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | text                                                                                                                                                                                                                                                                          |
| extensions     | grant_pg_cron_access                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger                                                                                                                                                                                                                                                                 |
| extensions     | grant_pg_graphql_access                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger                                                                                                                                                                                                                                                                 |
| extensions     | grant_pg_net_access                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger                                                                                                                                                                                                                                                                 |
| extensions     | hmac                                        | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea                                                                                                                                                                                                                                                                         |
| extensions     | hmac                                        | text, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | bytea                                                                                                                                                                                                                                                                         |
| extensions     | pg_stat_statements                          | showtext boolean, OUT userid oid, OUT dbid oid, OUT toplevel boolean, OUT queryid bigint, OUT query text, OUT plans bigint, OUT total_plan_time double precision, OUT min_plan_time double precision, OUT max_plan_time double precision, OUT mean_plan_time double precision, OUT stddev_plan_time double precision, OUT calls bigint, OUT total_exec_time double precision, OUT min_exec_time double precision, OUT max_exec_time double precision, OUT mean_exec_time double precision, OUT stddev_exec_time double precision, OUT rows bigint, OUT shared_blks_hit bigint, OUT shared_blks_read bigint, OUT shared_blks_dirtied bigint, OUT shared_blks_written bigint, OUT local_blks_hit bigint, OUT local_blks_read bigint, OUT local_blks_dirtied bigint, OUT local_blks_written bigint, OUT temp_blks_read bigint, OUT temp_blks_written bigint, OUT shared_blk_read_time double precision, OUT shared_blk_write_time double precision, OUT local_blk_read_time double precision, OUT local_blk_write_time double precision, OUT temp_blk_read_time double precision, OUT temp_blk_write_time double precision, OUT wal_records bigint, OUT wal_fpi bigint, OUT wal_bytes numeric, OUT jit_functions bigint, OUT jit_generation_time double precision, OUT jit_inlining_count bigint, OUT jit_inlining_time double precision, OUT jit_optimization_count bigint, OUT jit_optimization_time double precision, OUT jit_emission_count bigint, OUT jit_emission_time double precision, OUT jit_deform_count bigint, OUT jit_deform_time double precision, OUT stats_since timestamp with time zone, OUT minmax_stats_since timestamp with time zone | SETOF record                                                                                                                                                                                                                                                                  |
| extensions     | pg_stat_statements_info                     | OUT dealloc bigint, OUT stats_reset timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | record                                                                                                                                                                                                                                                                        |
| extensions     | pg_stat_statements_reset                    | userid oid DEFAULT 0, dbid oid DEFAULT 0, queryid bigint DEFAULT 0, minmax_only boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | timestamp with time zone                                                                                                                                                                                                                                                      |
| extensions     | pgp_armor_headers                           | text, OUT key text, OUT value text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | SETOF record                                                                                                                                                                                                                                                                  |
| extensions     | pgp_key_id                                  | bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | text                                                                                                                                                                                                                                                                          |
| extensions     | pgp_pub_decrypt                             | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | text                                                                                                                                                                                                                                                                          |
| extensions     | pgp_pub_decrypt                             | bytea, bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | text                                                                                                                                                                                                                                                                          |
| extensions     | pgp_pub_decrypt                             | bytea, bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | text                                                                                                                                                                                                                                                                          |
| extensions     | pgp_pub_decrypt_bytea                       | bytea, bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | bytea                                                                                                                                                                                                                                                                         |
| extensions     | pgp_pub_decrypt_bytea                       | bytea, bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | bytea                                                                                                                                                                                                                                                                         |
| extensions     | pgp_pub_decrypt_bytea                       | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea                                                                                                                                                                                                                                                                         |
| extensions     | pgp_pub_encrypt                             | text, bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | bytea                                                                                                                                                                                                                                                                         |
| extensions     | pgp_pub_encrypt                             | text, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | bytea                                                                                                                                                                                                                                                                         |
| extensions     | pgp_pub_encrypt_bytea                       | bytea, bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | bytea                                                                                                                                                                                                                                                                         |
| extensions     | pgp_pub_encrypt_bytea                       | bytea, bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea                                                                                                                                                                                                                                                                         |
| extensions     | pgp_sym_decrypt                             | bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | text                                                                                                                                                                                                                                                                          |
| extensions     | pgp_sym_decrypt                             | bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | text                                                                                                                                                                                                                                                                          |
| extensions     | pgp_sym_decrypt_bytea                       | bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | bytea                                                                                                                                                                                                                                                                         |
| extensions     | pgp_sym_decrypt_bytea                       | bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | bytea                                                                                                                                                                                                                                                                         |
| extensions     | pgp_sym_encrypt                             | text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | bytea                                                                                                                                                                                                                                                                         |
| extensions     | pgp_sym_encrypt                             | text, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | bytea                                                                                                                                                                                                                                                                         |
| extensions     | pgp_sym_encrypt_bytea                       | bytea, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | bytea                                                                                                                                                                                                                                                                         |
| extensions     | pgp_sym_encrypt_bytea                       | bytea, text, text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | bytea                                                                                                                                                                                                                                                                         |
| extensions     | pgrst_ddl_watch                             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger                                                                                                                                                                                                                                                                 |
| extensions     | pgrst_drop_watch                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger                                                                                                                                                                                                                                                                 |
| extensions     | set_graphql_placeholder                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger                                                                                                                                                                                                                                                                 |
| extensions     | uuid_generate_v1                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                                                                                                                                                                                                                                                          |
| extensions     | uuid_generate_v1mc                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                                                                                                                                                                                                                                                          |
| extensions     | uuid_generate_v3                            | namespace uuid, name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | uuid                                                                                                                                                                                                                                                                          |
| extensions     | uuid_generate_v4                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                                                                                                                                                                                                                                                          |
| extensions     | uuid_generate_v5                            | namespace uuid, name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | uuid                                                                                                                                                                                                                                                                          |
| extensions     | uuid_nil                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                                                                                                                                                                                                                                                          |
| extensions     | uuid_ns_dns                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                                                                                                                                                                                                                                                          |
| extensions     | uuid_ns_oid                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                                                                                                                                                                                                                                                          |
| extensions     | uuid_ns_url                                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                                                                                                                                                                                                                                                          |
| extensions     | uuid_ns_x500                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | uuid                                                                                                                                                                                                                                                                          |
| graphql        | _internal_resolve                           | query text, variables jsonb DEFAULT '{}'::jsonb, "operationName" text DEFAULT NULL::text, extensions jsonb DEFAULT NULL::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | jsonb                                                                                                                                                                                                                                                                         |
| graphql        | comment_directive                           | comment_ text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | jsonb                                                                                                                                                                                                                                                                         |
| graphql        | exception                                   | message text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | text                                                                                                                                                                                                                                                                          |
| graphql        | get_schema_version                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | integer                                                                                                                                                                                                                                                                       |
| graphql        | increment_schema_version                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | event_trigger                                                                                                                                                                                                                                                                 |
| graphql        | resolve                                     | query text, variables jsonb DEFAULT '{}'::jsonb, "operationName" text DEFAULT NULL::text, extensions jsonb DEFAULT NULL::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | jsonb                                                                                                                                                                                                                                                                         |
| graphql_public | graphql                                     | "operationName" text DEFAULT NULL::text, query text DEFAULT NULL::text, variables jsonb DEFAULT NULL::jsonb, extensions jsonb DEFAULT NULL::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | jsonb                                                                                                                                                                                                                                                                         |
| pgbouncer      | get_auth                                    | p_usename text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | TABLE(username text, password text)                                                                                                                                                                                                                                           |
| public         | auto_record_response_on_comment             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | calculate_business_hours_seconds            | p_start_time timestamp with time zone, p_end_time timestamp with time zone                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | integer                                                                                                                                                                                                                                                                       |
| public         | can_access_ticketing                        | user_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | boolean                                                                                                                                                                                                                                                                       |
| public         | can_see_account_via_ticketing               | p_user_id uuid, p_account_id text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | boolean                                                                                                                                                                                                                                                                       |
| public         | check_idempotency                           | p_key text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | jsonb                                                                                                                                                                                                                                                                         |
| public         | check_ticket_has_quotation                  | p_ticket_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | jsonb                                                                                                                                                                                                                                                                         |
| public         | cleanup_expired_idempotency                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | integer                                                                                                                                                                                                                                                                       |
| public         | create_quotation_from_lead                  | p_lead_id text, p_created_by uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | jsonb                                                                                                                                                                                                                                                                         |
| public         | create_quotation_from_opportunity           | p_opportunity_id text, p_created_by uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | jsonb                                                                                                                                                                                                                                                                         |
| public         | create_quotation_from_pipeline              | p_opportunity_id text, p_customer_name text, p_customer_company text DEFAULT NULL::text, p_customer_email text DEFAULT NULL::text, p_customer_phone text DEFAULT NULL::text, p_customer_address text DEFAULT NULL::text, p_service_type text DEFAULT NULL::text, p_incoterm text DEFAULT NULL::text, p_fleet_type text DEFAULT NULL::text, p_fleet_quantity integer DEFAULT NULL::integer, p_commodity text DEFAULT NULL::text, p_cargo_description text DEFAULT NULL::text, p_cargo_weight numeric DEFAULT NULL::numeric, p_cargo_weight_unit text DEFAULT 'kg'::text, p_cargo_volume numeric DEFAULT NULL::numeric, p_cargo_volume_unit text DEFAULT 'cbm'::text, p_cargo_quantity integer DEFAULT NULL::integer, p_cargo_quantity_unit text DEFAULT NULL::text, p_origin_address text DEFAULT NULL::text, p_origin_city text DEFAULT NULL::text, p_origin_country text DEFAULT NULL::text, p_origin_port text DEFAULT NULL::text, p_destination_address text DEFAULT NULL::text, p_destination_city text DEFAULT NULL::text, p_destination_country text DEFAULT NULL::text, p_destination_port text DEFAULT NULL::text, p_rate_structure text DEFAULT 'bundling'::text, p_total_cost numeric DEFAULT 0, p_target_margin_percent numeric DEFAULT 0, p_total_selling_rate numeric DEFAULT 0, p_currency text DEFAULT 'IDR'::text, p_scope_of_work text DEFAULT NULL::text, p_terms_includes text[] DEFAULT '{}'::text[], p_terms_excludes text[] DEFAULT '{}'::text[], p_terms_notes text DEFAULT NULL::text, p_validity_days integer DEFAULT 14                                                                                                         | jsonb                                                                                                                                                                                                                                                                         |
| public         | crm_cleanup_old_notification_logs           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | integer                                                                                                                                                                                                                                                                       |
| public         | crm_log_notification                        | p_entity_type text, p_entity_id text, p_event text, p_threshold integer DEFAULT NULL::integer, p_recipient_emails text[] DEFAULT NULL::text[], p_cc_emails text[] DEFAULT NULL::text[], p_subject text DEFAULT NULL::text, p_status text DEFAULT 'sent'::text, p_error_message text DEFAULT NULL::text, p_metadata jsonb DEFAULT NULL::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | bigint                                                                                                                                                                                                                                                                        |
| public         | crm_notification_exists                     | p_entity_type text, p_entity_id text, p_event text, p_threshold integer DEFAULT NULL::integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | boolean                                                                                                                                                                                                                                                                       |
| public         | fn_check_quotation_authorization            | p_quotation_id uuid, p_actor_user_id uuid, p_action text DEFAULT 'transition'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | jsonb                                                                                                                                                                                                                                                                         |
| public         | fn_check_ticket_authorization               | p_ticket_id uuid, p_actor_user_id uuid, p_action text DEFAULT 'transition'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | jsonb                                                                                                                                                                                                                                                                         |
| public         | fn_validate_opportunity_transition          | p_current_stage text, p_target_stage text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | jsonb                                                                                                                                                                                                                                                                         |
| public         | fn_validate_quotation_transition            | p_current_status text, p_target_status text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | jsonb                                                                                                                                                                                                                                                                         |
| public         | fn_validate_ticket_transition               | p_current_status text, p_target_status text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | jsonb                                                                                                                                                                                                                                                                         |
| public         | format_duration                             | p_seconds integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | text                                                                                                                                                                                                                                                                          |
| public         | generate_account_id                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | generate_activity_id                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | generate_attachment_id                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | generate_contact_id                         |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | generate_customer_quotation_number          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | character varying                                                                                                                                                                                                                                                             |
| public         | generate_lead_id                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | generate_opportunity_id                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | generate_pipeline_update_id                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | generate_sales_plan_id                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | generate_shipment_detail_id                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | generate_ticket_code                        | p_ticket_type ticket_type, p_department ticketing_department                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | character varying                                                                                                                                                                                                                                                             |
| public         | generate_ticket_quote_number                | p_ticket_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | character varying                                                                                                                                                                                                                                                             |
| public         | get_account_pipeline_summary                | p_account_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | jsonb                                                                                                                                                                                                                                                                         |
| public         | get_entity_quotation_stats                  | p_lead_id text DEFAULT NULL::text, p_opportunity_id text DEFAULT NULL::text, p_ticket_id uuid DEFAULT NULL::uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | jsonb                                                                                                                                                                                                                                                                         |
| public         | get_next_quotation_sequence                 | p_ticket_id uuid DEFAULT NULL::uuid, p_lead_id text DEFAULT NULL::text, p_opportunity_id text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | integer                                                                                                                                                                                                                                                                       |
| public         | get_quotation_history                       | p_lead_id text DEFAULT NULL::text, p_opportunity_id text DEFAULT NULL::text, p_ticket_id uuid DEFAULT NULL::uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | TABLE(quotation_id uuid, quotation_number character varying, sequence_number integer, status character varying, total_selling_rate numeric, currency character varying, created_at timestamp with time zone, sent_at timestamp with time zone, source_type character varying) |
| public         | get_quotation_sequence_label                | p_sequence_number integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | text                                                                                                                                                                                                                                                                          |
| public         | get_quotation_sequence_label_id             | p_sequence_number integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | text                                                                                                                                                                                                                                                                          |
| public         | get_role_category                           | p_role text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | text                                                                                                                                                                                                                                                                          |
| public         | get_ticket_quotation_status                 | p_ticket_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | jsonb                                                                                                                                                                                                                                                                         |
| public         | get_user_owned_account_ids                  | p_user_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | SETOF text                                                                                                                                                                                                                                                                    |
| public         | get_user_role                               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | user_role                                                                                                                                                                                                                                                                     |
| public         | get_user_ticketing_department               | user_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ticketing_department                                                                                                                                                                                                                                                          |
| public         | handle_ticketing_updated_at                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | is_admin                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | boolean                                                                                                                                                                                                                                                                       |
| public         | is_lead_from_marketing_department           | lead_created_by uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | boolean                                                                                                                                                                                                                                                                       |
| public         | is_macx                                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | boolean                                                                                                                                                                                                                                                                       |
| public         | is_marketing                                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | boolean                                                                                                                                                                                                                                                                       |
| public         | is_marketing_creator                        | p_user_id uuid, p_opportunity_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | boolean                                                                                                                                                                                                                                                                       |
| public         | is_marketing_manager                        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | boolean                                                                                                                                                                                                                                                                       |
| public         | is_marketing_manager_or_macx                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | boolean                                                                                                                                                                                                                                                                       |
| public         | is_marketing_staff                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | boolean                                                                                                                                                                                                                                                                       |
| public         | is_original_creator_marketing               | creator_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | boolean                                                                                                                                                                                                                                                                       |
| public         | is_sales                                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | boolean                                                                                                                                                                                                                                                                       |
| public         | is_sales_manager                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | boolean                                                                                                                                                                                                                                                                       |
| public         | is_salesperson                              |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | boolean                                                                                                                                                                                                                                                                       |
| public         | is_ticketing_admin                          | user_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | boolean                                                                                                                                                                                                                                                                       |
| public         | is_ticketing_ops                            | user_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | boolean                                                                                                                                                                                                                                                                       |
| public         | is_user_in_marketing_department             | check_user_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | boolean                                                                                                                                                                                                                                                                       |
| public         | link_quotation_to_operational_cost          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | log_crm_email                               | p_notification_type crm_email_notification_type, p_recipient_emails text[], p_cc_emails text[], p_subject text, p_lead_id text DEFAULT NULL::text, p_opportunity_id text DEFAULT NULL::text, p_user_id uuid DEFAULT NULL::uuid, p_metadata jsonb DEFAULT '{}'::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | uuid                                                                                                                                                                                                                                                                          |
| public         | log_stage_change                            |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | mark_reminder_sent                          | p_notification_type crm_email_notification_type, p_email_log_id uuid, p_lead_id text DEFAULT NULL::text, p_opportunity_id text DEFAULT NULL::text, p_user_id uuid DEFAULT NULL::uuid, p_interval_hours integer DEFAULT 0, p_reminder_number integer DEFAULT 1                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | void                                                                                                                                                                                                                                                                          |
| public         | propagate_ids_on_operational_cost_insert    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | propagate_ids_on_quotation_insert           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | propagate_lead_id_on_ticket_insert          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | record_response_exchange                    | p_ticket_id uuid, p_responder_user_id uuid, p_comment_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | jsonb                                                                                                                                                                                                                                                                         |
| public         | record_ticket_response                      | p_ticket_id uuid, p_user_id uuid, p_responder_role character varying, p_comment_id uuid DEFAULT NULL::uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | uuid                                                                                                                                                                                                                                                                          |
| public         | request_quotation_adjustment                | p_quotation_id uuid, p_actor_user_id uuid, p_reason text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_activity_complete_and_next              | p_activity_id text, p_outcome text DEFAULT NULL::text, p_create_follow_up boolean DEFAULT false, p_follow_up_days integer DEFAULT 7, p_follow_up_type activity_type_v2 DEFAULT 'Task'::activity_type_v2, p_follow_up_subject text DEFAULT NULL::text, p_idempotency_key text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_cadence_advance                         | p_enrollment_id bigint, p_idempotency_key text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_create_customer_quotation               | p_ticket_id uuid, p_operational_cost_id uuid DEFAULT NULL::uuid, p_customer_data jsonb DEFAULT '{}'::jsonb, p_service_data jsonb DEFAULT '{}'::jsonb, p_rate_data jsonb DEFAULT '{}'::jsonb, p_terms_data jsonb DEFAULT '{}'::jsonb, p_items jsonb DEFAULT '[]'::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_customer_quotation_mark_accepted        | p_quotation_id uuid, p_actor_user_id uuid DEFAULT NULL::uuid, p_correlation_id text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_customer_quotation_mark_rejected        | p_quotation_id uuid, p_reason_type quotation_rejection_reason_type, p_competitor_name text DEFAULT NULL::text, p_competitor_amount numeric DEFAULT NULL::numeric, p_customer_budget numeric DEFAULT NULL::numeric, p_currency text DEFAULT 'IDR'::text, p_notes text DEFAULT NULL::text, p_actor_user_id uuid DEFAULT NULL::uuid, p_correlation_id text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_customer_quotation_mark_sent            | p_quotation_id uuid, p_sent_via text, p_sent_to text, p_actor_user_id uuid, p_correlation_id text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_force_sync_quotation                    | p_quotation_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_get_sla_compliance_tickets              | p_user_id uuid DEFAULT NULL::uuid, p_sla_type text DEFAULT 'first_response'::text, p_status text DEFAULT 'all'::text, p_limit integer DEFAULT 50, p_offset integer DEFAULT 0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_get_sla_metrics                         | p_start_date date DEFAULT NULL::date, p_end_date date DEFAULT NULL::date, p_department text DEFAULT NULL::text, p_user_id uuid DEFAULT NULL::uuid, p_ticket_type text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_get_ticket_sla_details                  | p_ticket_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_lead_convert                            | p_lead_id text, p_opportunity_name text, p_estimated_value numeric DEFAULT NULL::numeric, p_idempotency_key text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_lead_handover_to_sales_pool             | p_lead_id text, p_notes text DEFAULT NULL::text, p_priority integer DEFAULT 1, p_potential_revenue numeric DEFAULT NULL::numeric, p_idempotency_key text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_lead_triage                             | p_lead_id text, p_new_status lead_triage_status, p_notes text DEFAULT NULL::text, p_potential_revenue numeric DEFAULT NULL::numeric, p_idempotency_key text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_opportunity_change_stage                | p_opportunity_id text, p_new_stage opportunity_stage, p_notes text DEFAULT NULL::text, p_close_reason text DEFAULT NULL::text, p_idempotency_key text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_opportunity_change_stage                | p_opportunity_id text, p_new_stage opportunity_stage, p_notes text DEFAULT NULL::text, p_close_reason text DEFAULT NULL::text, p_lost_reason text DEFAULT NULL::text, p_competitor text DEFAULT NULL::text, p_competitor_price numeric DEFAULT NULL::numeric, p_idempotency_key text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_reject_operational_cost_with_reason     | p_cost_id uuid, p_reason_type text, p_suggested_amount numeric DEFAULT NULL::numeric, p_currency text DEFAULT 'IDR'::text, p_notes text DEFAULT NULL::text, p_actor_user_id uuid DEFAULT NULL::uuid, p_correlation_id text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_reject_quotation_with_reason            | p_quotation_id uuid, p_reason_type text, p_competitor_name text DEFAULT NULL::text, p_competitor_amount numeric DEFAULT NULL::numeric, p_customer_budget numeric DEFAULT NULL::numeric, p_currency text DEFAULT 'IDR'::text, p_notes text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_sales_claim_lead                        | p_pool_id bigint, p_create_account boolean DEFAULT true, p_create_opportunity boolean DEFAULT true, p_idempotency_key text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_target_convert                          | p_target_id text, p_create_opportunity boolean DEFAULT true, p_opportunity_name text DEFAULT NULL::text, p_idempotency_key text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_ticket_add_comment                      | p_ticket_id uuid, p_content text, p_is_internal boolean DEFAULT false                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_ticket_assign                           | p_ticket_id uuid, p_assigned_to uuid, p_notes text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_ticket_create                           | p_ticket_type ticket_type, p_subject character varying, p_description text, p_department ticketing_department, p_priority ticket_priority DEFAULT 'medium'::ticket_priority, p_account_id text DEFAULT NULL::text, p_contact_id text DEFAULT NULL::text, p_rfq_data jsonb DEFAULT NULL::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_ticket_create_quote                     | p_ticket_id uuid, p_amount numeric, p_currency character varying DEFAULT 'IDR'::character varying, p_valid_until date DEFAULT NULL::date, p_terms text DEFAULT NULL::text, p_rate_structure character varying DEFAULT 'bundling'::character varying, p_items jsonb DEFAULT '[]'::jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_ticket_mark_lost                        | p_ticket_id uuid, p_reason text DEFAULT NULL::text, p_competitor_name character varying DEFAULT NULL::character varying, p_competitor_cost numeric DEFAULT NULL::numeric                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_ticket_mark_won                         | p_ticket_id uuid, p_notes text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_ticket_quote_sent_to_customer           | p_ticket_id uuid, p_notes text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_ticket_request_adjustment               | p_ticket_id uuid, p_reason_type operational_cost_rejection_reason_type, p_competitor_name text DEFAULT NULL::text, p_competitor_amount numeric DEFAULT NULL::numeric, p_customer_budget numeric DEFAULT NULL::numeric, p_currency text DEFAULT 'IDR'::text, p_notes text DEFAULT NULL::text, p_actor_user_id uuid DEFAULT NULL::uuid, p_correlation_id text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_ticket_submit_quote                     | p_ticket_id uuid, p_amount numeric, p_currency character varying DEFAULT 'IDR'::character varying, p_valid_until date DEFAULT NULL::date, p_terms text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_ticket_transition                       | p_ticket_id uuid, p_new_status ticket_status, p_notes text DEFAULT NULL::text, p_close_outcome ticket_close_outcome DEFAULT NULL::ticket_close_outcome, p_close_reason text DEFAULT NULL::text, p_competitor_name character varying DEFAULT NULL::character varying, p_competitor_cost numeric DEFAULT NULL::numeric                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_ticketing_dashboard_summary             | p_department ticketing_department DEFAULT NULL::ticketing_department                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_update_quotation_status                 | p_quotation_id uuid, p_status customer_quotation_status, p_sent_via character varying DEFAULT NULL::character varying, p_sent_to character varying DEFAULT NULL::character varying, p_pdf_url text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | jsonb                                                                                                                                                                                                                                                                         |
| public         | rpc_update_quotation_status_validated       | p_quotation_id uuid, p_new_status text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | jsonb                                                                                                                                                                                                                                                                         |
| public         | set_ticket_departments                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | set_ticket_origin_department                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | store_idempotency                           | p_key text, p_fingerprint text, p_response jsonb, p_ttl_hours integer DEFAULT 24                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | void                                                                                                                                                                                                                                                                          |
| public         | sync_account_pic_to_contact                 |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | sync_lead_to_quotation                      | p_lead_id text, p_new_status text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | jsonb                                                                                                                                                                                                                                                                         |
| public         | sync_operational_cost_to_quotation          | p_cost_id uuid, p_new_status quote_status                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | jsonb                                                                                                                                                                                                                                                                         |
| public         | sync_opportunity_to_account                 | p_opportunity_id text, p_outcome text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | jsonb                                                                                                                                                                                                                                                                         |
| public         | sync_opportunity_to_quotation               | p_opportunity_id text, p_outcome text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | jsonb                                                                                                                                                                                                                                                                         |
| public         | sync_opportunity_to_ticket                  | p_opportunity_id text, p_outcome text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | jsonb                                                                                                                                                                                                                                                                         |
| public         | sync_quotation_to_all                       | p_quotation_id uuid, p_new_status text, p_actor_user_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | jsonb                                                                                                                                                                                                                                                                         |
| public         | sync_quotation_to_lead                      | p_quotation_id uuid, p_new_status text, p_actor_user_id uuid DEFAULT NULL::uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | jsonb                                                                                                                                                                                                                                                                         |
| public         | sync_quotation_to_operational_cost          | p_quotation_id uuid, p_new_status text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | jsonb                                                                                                                                                                                                                                                                         |
| public         | sync_quotation_to_opportunity               | p_quotation_id uuid, p_new_status text, p_actor_user_id uuid DEFAULT NULL::uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | jsonb                                                                                                                                                                                                                                                                         |
| public         | sync_quotation_to_ticket                    | p_quotation_id uuid, p_new_status text, p_actor_user_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | jsonb                                                                                                                                                                                                                                                                         |
| public         | sync_ticket_to_quotation                    | p_ticket_id uuid, p_outcome text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | jsonb                                                                                                                                                                                                                                                                         |
| public         | trigger_sync_operational_cost_status_change |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | trigger_sync_quotation_on_lead_disqualify   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | trigger_sync_quotation_on_opportunity_close |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | trigger_sync_quotation_on_status_change     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | trigger_sync_quotation_status_change        |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | trigger_sync_ticket_status_to_quotation     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | trigger_update_quote_metrics_on_quote       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | update_crm_email_status                     | p_log_id uuid, p_status email_status, p_message_id text DEFAULT NULL::text, p_error_message text DEFAULT NULL::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | void                                                                                                                                                                                                                                                                          |
| public         | update_entity_quotation_count               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | update_insights_growth_latest               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | update_insights_growth_updated_at           |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | update_profiles_updated_at                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | update_shipment_calculations                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | update_ticket_response_metrics              | p_ticket_id uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | void                                                                                                                                                                                                                                                                          |
| public         | validate_quotation_source                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| public         | was_reminder_sent                           | p_notification_type crm_email_notification_type, p_lead_id text DEFAULT NULL::text, p_opportunity_id text DEFAULT NULL::text, p_user_id uuid DEFAULT NULL::uuid, p_interval_hours integer DEFAULT 0                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | boolean                                                                                                                                                                                                                                                                       |
| realtime       | apply_rls                                   | wal jsonb, max_record_bytes integer DEFAULT (1024 * 1024)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | SETOF realtime.wal_rls                                                                                                                                                                                                                                                        |
| realtime       | broadcast_changes                           | topic_name text, event_name text, operation text, table_name text, table_schema text, new record, old record, level text DEFAULT 'ROW'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | void                                                                                                                                                                                                                                                                          |
| realtime       | build_prepared_statement_sql                | prepared_statement_name text, entity regclass, columns realtime.wal_column[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | text                                                                                                                                                                                                                                                                          |
| realtime       | cast                                        | val text, type_ regtype                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | jsonb                                                                                                                                                                                                                                                                         |
| realtime       | check_equality_op                           | op realtime.equality_op, type_ regtype, val_1 text, val_2 text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | boolean                                                                                                                                                                                                                                                                       |
| realtime       | is_visible_through_filters                  | columns realtime.wal_column[], filters realtime.user_defined_filter[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | boolean                                                                                                                                                                                                                                                                       |
| realtime       | list_changes                                | publication name, slot_name name, max_changes integer, max_record_bytes integer                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | SETOF realtime.wal_rls                                                                                                                                                                                                                                                        |
| realtime       | quote_wal2json                              | entity regclass                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | text                                                                                                                                                                                                                                                                          |
| realtime       | send                                        | payload jsonb, event text, topic text, private boolean DEFAULT true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | void                                                                                                                                                                                                                                                                          |
| realtime       | subscription_check_filters                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| realtime       | to_regrole                                  | role_name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | regrole                                                                                                                                                                                                                                                                       |
| realtime       | topic                                       |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | text                                                                                                                                                                                                                                                                          |
| storage        | add_prefixes                                | _bucket_id text, _name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | void                                                                                                                                                                                                                                                                          |
| storage        | can_insert_object                           | bucketid text, name text, owner uuid, metadata jsonb                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | void                                                                                                                                                                                                                                                                          |
| storage        | delete_leaf_prefixes                        | bucket_ids text[], names text[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | void                                                                                                                                                                                                                                                                          |
| storage        | delete_prefix                               | _bucket_id text, _name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | boolean                                                                                                                                                                                                                                                                       |
| storage        | delete_prefix_hierarchy_trigger             |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| storage        | enforce_bucket_name_length                  |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| storage        | extension                                   | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | text                                                                                                                                                                                                                                                                          |
| storage        | filename                                    | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | text                                                                                                                                                                                                                                                                          |
| storage        | foldername                                  | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | text[]                                                                                                                                                                                                                                                                        |
| storage        | get_level                                   | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | integer                                                                                                                                                                                                                                                                       |
| storage        | get_prefix                                  | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | text                                                                                                                                                                                                                                                                          |
| storage        | get_prefixes                                | name text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | text[]                                                                                                                                                                                                                                                                        |
| storage        | get_size_by_bucket                          |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | TABLE(size bigint, bucket_id text)                                                                                                                                                                                                                                            |
| storage        | list_multipart_uploads_with_delimiter       | bucket_id text, prefix_param text, delimiter_param text, max_keys integer DEFAULT 100, next_key_token text DEFAULT ''::text, next_upload_token text DEFAULT ''::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | TABLE(key text, id text, created_at timestamp with time zone)                                                                                                                                                                                                                 |
| storage        | list_objects_with_delimiter                 | bucket_id text, prefix_param text, delimiter_param text, max_keys integer DEFAULT 100, start_after text DEFAULT ''::text, next_token text DEFAULT ''::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | TABLE(name text, id uuid, metadata jsonb, updated_at timestamp with time zone)                                                                                                                                                                                                |
| storage        | lock_top_prefixes                           | bucket_ids text[], names text[]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | void                                                                                                                                                                                                                                                                          |
| storage        | objects_delete_cleanup                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| storage        | objects_insert_prefix_trigger               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| storage        | objects_update_cleanup                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| storage        | objects_update_level_trigger                |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| storage        | objects_update_prefix_trigger               |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| storage        | operation                                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | text                                                                                                                                                                                                                                                                          |
| storage        | prefixes_delete_cleanup                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| storage        | prefixes_insert_trigger                     |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| storage        | search                                      | prefix text, bucketname text, limits integer DEFAULT 100, levels integer DEFAULT 1, offsets integer DEFAULT 0, search text DEFAULT ''::text, sortcolumn text DEFAULT 'name'::text, sortorder text DEFAULT 'asc'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | TABLE(name text, id uuid, updated_at timestamp with time zone, created_at timestamp with time zone, last_accessed_at timestamp with time zone, metadata jsonb)                                                                                                                |
| storage        | search_legacy_v1                            | prefix text, bucketname text, limits integer DEFAULT 100, levels integer DEFAULT 1, offsets integer DEFAULT 0, search text DEFAULT ''::text, sortcolumn text DEFAULT 'name'::text, sortorder text DEFAULT 'asc'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | TABLE(name text, id uuid, updated_at timestamp with time zone, created_at timestamp with time zone, last_accessed_at timestamp with time zone, metadata jsonb)                                                                                                                |
| storage        | search_v1_optimised                         | prefix text, bucketname text, limits integer DEFAULT 100, levels integer DEFAULT 1, offsets integer DEFAULT 0, search text DEFAULT ''::text, sortcolumn text DEFAULT 'name'::text, sortorder text DEFAULT 'asc'::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | TABLE(name text, id uuid, updated_at timestamp with time zone, created_at timestamp with time zone, last_accessed_at timestamp with time zone, metadata jsonb)                                                                                                                |
| storage        | search_v2                                   | prefix text, bucket_name text, limits integer DEFAULT 100, levels integer DEFAULT 1, start_after text DEFAULT ''::text, sort_order text DEFAULT 'asc'::text, sort_column text DEFAULT 'name'::text, sort_column_after text DEFAULT ''::text                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | TABLE(key text, name text, id uuid, updated_at timestamp with time zone, created_at timestamp with time zone, last_accessed_at timestamp with time zone, metadata jsonb)                                                                                                      |
| storage        | update_updated_at_column                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | trigger                                                                                                                                                                                                                                                                       |
| vault          | _crypto_aead_det_decrypt                    | message bytea, additional bytea, key_id bigint, context bytea DEFAULT '\x7067736f6469756d'::bytea, nonce bytea DEFAULT NULL::bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea                                                                                                                                                                                                                                                                         |
| vault          | _crypto_aead_det_encrypt                    | message bytea, additional bytea, key_id bigint, context bytea DEFAULT '\x7067736f6469756d'::bytea, nonce bytea DEFAULT NULL::bytea                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | bytea                                                                                                                                                                                                                                                                         |
| vault          | _crypto_aead_det_noncegen                   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | bytea                                                                                                                                                                                                                                                                         |
| vault          | create_secret                               | new_secret text, new_name text DEFAULT NULL::text, new_description text DEFAULT ''::text, new_key_id uuid DEFAULT NULL::uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | uuid                                                                                                                                                                                                                                                                          |
| vault          | update_secret                               | secret_id uuid, new_secret text DEFAULT NULL::text, new_name text DEFAULT NULL::text, new_description text DEFAULT NULL::text, new_key_id uuid DEFAULT NULL::uuid                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | void                                                                                                                                                                                                                                                                          |

SOURCE FUNCION
| schema_name    | function_name                      | definition                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| -------------- | ---------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| auth           | email                              | CREATE OR REPLACE FUNCTION auth.email()
 RETURNS text
 LANGUAGE sql
 STABLE
AS $function$
  select 
  coalesce(
    nullif(current_setting('request.jwt.claim.email', true), ''),
    (nullif(current_setting('request.jwt.claims', true), '')::jsonb ->> 'email')
  )::text
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| auth           | jwt                                | CREATE OR REPLACE FUNCTION auth.jwt()
 RETURNS jsonb
 LANGUAGE sql
 STABLE
AS $function$
  select 
    coalesce(
        nullif(current_setting('request.jwt.claim', true), ''),
        nullif(current_setting('request.jwt.claims', true), '')
    )::jsonb
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| auth           | role                               | CREATE OR REPLACE FUNCTION auth.role()
 RETURNS text
 LANGUAGE sql
 STABLE
AS $function$
  select 
  coalesce(
    nullif(current_setting('request.jwt.claim.role', true), ''),
    (nullif(current_setting('request.jwt.claims', true), '')::jsonb ->> 'role')
  )::text
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| auth           | uid                                | CREATE OR REPLACE FUNCTION auth.uid()
 RETURNS uuid
 LANGUAGE sql
 STABLE
AS $function$
  select 
  coalesce(
    nullif(current_setting('request.jwt.claim.sub', true), ''),
    (nullif(current_setting('request.jwt.claims', true), '')::jsonb ->> 'sub')
  )::uuid
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| extensions     | armor                              | CREATE OR REPLACE FUNCTION extensions.armor(bytea)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_armor$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| extensions     | armor                              | CREATE OR REPLACE FUNCTION extensions.armor(bytea, text[], text[])
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_armor$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| extensions     | crypt                              | CREATE OR REPLACE FUNCTION extensions.crypt(text, text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_crypt$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| extensions     | dearmor                            | CREATE OR REPLACE FUNCTION extensions.dearmor(text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_dearmor$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| extensions     | decrypt                            | CREATE OR REPLACE FUNCTION extensions.decrypt(bytea, bytea, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_decrypt$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| extensions     | decrypt_iv                         | CREATE OR REPLACE FUNCTION extensions.decrypt_iv(bytea, bytea, bytea, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_decrypt_iv$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| extensions     | digest                             | CREATE OR REPLACE FUNCTION extensions.digest(bytea, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_digest$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| extensions     | digest                             | CREATE OR REPLACE FUNCTION extensions.digest(text, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_digest$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| extensions     | encrypt                            | CREATE OR REPLACE FUNCTION extensions.encrypt(bytea, bytea, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_encrypt$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| extensions     | encrypt_iv                         | CREATE OR REPLACE FUNCTION extensions.encrypt_iv(bytea, bytea, bytea, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_encrypt_iv$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| extensions     | gen_random_bytes                   | CREATE OR REPLACE FUNCTION extensions.gen_random_bytes(integer)
 RETURNS bytea
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_random_bytes$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| extensions     | gen_random_uuid                    | CREATE OR REPLACE FUNCTION extensions.gen_random_uuid()
 RETURNS uuid
 LANGUAGE c
 PARALLEL SAFE
AS '$libdir/pgcrypto', $function$pg_random_uuid$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| extensions     | gen_salt                           | CREATE OR REPLACE FUNCTION extensions.gen_salt(text)
 RETURNS text
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_gen_salt$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| extensions     | gen_salt                           | CREATE OR REPLACE FUNCTION extensions.gen_salt(text, integer)
 RETURNS text
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_gen_salt_rounds$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| extensions     | grant_pg_cron_access               | CREATE OR REPLACE FUNCTION extensions.grant_pg_cron_access()
 RETURNS event_trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  IF EXISTS (
    SELECT
    FROM pg_event_trigger_ddl_commands() AS ev
    JOIN pg_extension AS ext
    ON ev.objid = ext.oid
    WHERE ext.extname = 'pg_cron'
  )
  THEN
    grant usage on schema cron to postgres with grant option;

    alter default privileges in schema cron grant all on tables to postgres with grant option;
    alter default privileges in schema cron grant all on functions to postgres with grant option;
    alter default privileges in schema cron grant all on sequences to postgres with grant option;

    alter default privileges for user supabase_admin in schema cron grant all
        on sequences to postgres with grant option;
    alter default privileges for user supabase_admin in schema cron grant all
        on tables to postgres with grant option;
    alter default privileges for user supabase_admin in schema cron grant all
        on functions to postgres with grant option;

    grant all privileges on all tables in schema cron to postgres with grant option;
    revoke all on table cron.job from postgres;
    grant select on table cron.job to postgres with grant option;
  END IF;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| extensions     | grant_pg_graphql_access            | CREATE OR REPLACE FUNCTION extensions.grant_pg_graphql_access()
 RETURNS event_trigger
 LANGUAGE plpgsql
AS $function$
DECLARE
    func_is_graphql_resolve bool;
BEGIN
    func_is_graphql_resolve = (
        SELECT n.proname = 'resolve'
        FROM pg_event_trigger_ddl_commands() AS ev
        LEFT JOIN pg_catalog.pg_proc AS n
        ON ev.objid = n.oid
    );

    IF func_is_graphql_resolve
    THEN
        -- Update public wrapper to pass all arguments through to the pg_graphql resolve func
        DROP FUNCTION IF EXISTS graphql_public.graphql;
        create or replace function graphql_public.graphql(
            "operationName" text default null,
            query text default null,
            variables jsonb default null,
            extensions jsonb default null
        )
            returns jsonb
            language sql
        as $$
            select graphql.resolve(
                query := query,
                variables := coalesce(variables, '{}'),
                "operationName" := "operationName",
                extensions := extensions
            );
        $$;

        -- This hook executes when `graphql.resolve` is created. That is not necessarily the last
        -- function in the extension so we need to grant permissions on existing entities AND
        -- update default permissions to any others that are created after `graphql.resolve`
        grant usage on schema graphql to postgres, anon, authenticated, service_role;
        grant select on all tables in schema graphql to postgres, anon, authenticated, service_role;
        grant execute on all functions in schema graphql to postgres, anon, authenticated, service_role;
        grant all on all sequences in schema graphql to postgres, anon, authenticated, service_role;
        alter default privileges in schema graphql grant all on tables to postgres, anon, authenticated, service_role;
        alter default privileges in schema graphql grant all on functions to postgres, anon, authenticated, service_role;
        alter default privileges in schema graphql grant all on sequences to postgres, anon, authenticated, service_role;

        -- Allow postgres role to allow granting usage on graphql and graphql_public schemas to custom roles
        grant usage on schema graphql_public to postgres with grant option;
        grant usage on schema graphql to postgres with grant option;
    END IF;

END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| extensions     | grant_pg_net_access                | CREATE OR REPLACE FUNCTION extensions.grant_pg_net_access()
 RETURNS event_trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  IF EXISTS (
    SELECT 1
    FROM pg_event_trigger_ddl_commands() AS ev
    JOIN pg_extension AS ext
    ON ev.objid = ext.oid
    WHERE ext.extname = 'pg_net'
  )
  THEN
    IF NOT EXISTS (
      SELECT 1
      FROM pg_roles
      WHERE rolname = 'supabase_functions_admin'
    )
    THEN
      CREATE USER supabase_functions_admin NOINHERIT CREATEROLE LOGIN NOREPLICATION;
    END IF;

    GRANT USAGE ON SCHEMA net TO supabase_functions_admin, postgres, anon, authenticated, service_role;

    IF EXISTS (
      SELECT FROM pg_extension
      WHERE extname = 'pg_net'
      -- all versions in use on existing projects as of 2025-02-20
      -- version 0.12.0 onwards don't need these applied
      AND extversion IN ('0.2', '0.6', '0.7', '0.7.1', '0.8', '0.10.0', '0.11.0')
    ) THEN
      ALTER function net.http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer) SECURITY DEFINER;
      ALTER function net.http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer) SECURITY DEFINER;

      ALTER function net.http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer) SET search_path = net;
      ALTER function net.http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer) SET search_path = net;

      REVOKE ALL ON FUNCTION net.http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer) FROM PUBLIC;
      REVOKE ALL ON FUNCTION net.http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer) FROM PUBLIC;

      GRANT EXECUTE ON FUNCTION net.http_get(url text, params jsonb, headers jsonb, timeout_milliseconds integer) TO supabase_functions_admin, postgres, anon, authenticated, service_role;
      GRANT EXECUTE ON FUNCTION net.http_post(url text, body jsonb, params jsonb, headers jsonb, timeout_milliseconds integer) TO supabase_functions_admin, postgres, anon, authenticated, service_role;
    END IF;
  END IF;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| extensions     | hmac                               | CREATE OR REPLACE FUNCTION extensions.hmac(bytea, bytea, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_hmac$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| extensions     | hmac                               | CREATE OR REPLACE FUNCTION extensions.hmac(text, text, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pg_hmac$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| extensions     | pg_stat_statements                 | CREATE OR REPLACE FUNCTION extensions.pg_stat_statements(showtext boolean, OUT userid oid, OUT dbid oid, OUT toplevel boolean, OUT queryid bigint, OUT query text, OUT plans bigint, OUT total_plan_time double precision, OUT min_plan_time double precision, OUT max_plan_time double precision, OUT mean_plan_time double precision, OUT stddev_plan_time double precision, OUT calls bigint, OUT total_exec_time double precision, OUT min_exec_time double precision, OUT max_exec_time double precision, OUT mean_exec_time double precision, OUT stddev_exec_time double precision, OUT rows bigint, OUT shared_blks_hit bigint, OUT shared_blks_read bigint, OUT shared_blks_dirtied bigint, OUT shared_blks_written bigint, OUT local_blks_hit bigint, OUT local_blks_read bigint, OUT local_blks_dirtied bigint, OUT local_blks_written bigint, OUT temp_blks_read bigint, OUT temp_blks_written bigint, OUT shared_blk_read_time double precision, OUT shared_blk_write_time double precision, OUT local_blk_read_time double precision, OUT local_blk_write_time double precision, OUT temp_blk_read_time double precision, OUT temp_blk_write_time double precision, OUT wal_records bigint, OUT wal_fpi bigint, OUT wal_bytes numeric, OUT jit_functions bigint, OUT jit_generation_time double precision, OUT jit_inlining_count bigint, OUT jit_inlining_time double precision, OUT jit_optimization_count bigint, OUT jit_optimization_time double precision, OUT jit_emission_count bigint, OUT jit_emission_time double precision, OUT jit_deform_count bigint, OUT jit_deform_time double precision, OUT stats_since timestamp with time zone, OUT minmax_stats_since timestamp with time zone)
 RETURNS SETOF record
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pg_stat_statements', $function$pg_stat_statements_1_11$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| extensions     | pg_stat_statements_info            | CREATE OR REPLACE FUNCTION extensions.pg_stat_statements_info(OUT dealloc bigint, OUT stats_reset timestamp with time zone)
 RETURNS record
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pg_stat_statements', $function$pg_stat_statements_info$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| extensions     | pg_stat_statements_reset           | CREATE OR REPLACE FUNCTION extensions.pg_stat_statements_reset(userid oid DEFAULT 0, dbid oid DEFAULT 0, queryid bigint DEFAULT 0, minmax_only boolean DEFAULT false)
 RETURNS timestamp with time zone
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pg_stat_statements', $function$pg_stat_statements_reset_1_11$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| extensions     | pgp_armor_headers                  | CREATE OR REPLACE FUNCTION extensions.pgp_armor_headers(text, OUT key text, OUT value text)
 RETURNS SETOF record
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_armor_headers$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| extensions     | pgp_key_id                         | CREATE OR REPLACE FUNCTION extensions.pgp_key_id(bytea)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_key_id_w$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| extensions     | pgp_pub_decrypt                    | CREATE OR REPLACE FUNCTION extensions.pgp_pub_decrypt(bytea, bytea)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_decrypt_text$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| extensions     | pgp_pub_decrypt                    | CREATE OR REPLACE FUNCTION extensions.pgp_pub_decrypt(bytea, bytea, text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_decrypt_text$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions     | pgp_pub_decrypt                    | CREATE OR REPLACE FUNCTION extensions.pgp_pub_decrypt(bytea, bytea, text, text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_decrypt_text$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| extensions     | pgp_pub_decrypt_bytea              | CREATE OR REPLACE FUNCTION extensions.pgp_pub_decrypt_bytea(bytea, bytea)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_decrypt_bytea$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| extensions     | pgp_pub_decrypt_bytea              | CREATE OR REPLACE FUNCTION extensions.pgp_pub_decrypt_bytea(bytea, bytea, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_decrypt_bytea$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| extensions     | pgp_pub_decrypt_bytea              | CREATE OR REPLACE FUNCTION extensions.pgp_pub_decrypt_bytea(bytea, bytea, text, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_decrypt_bytea$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| extensions     | pgp_pub_encrypt                    | CREATE OR REPLACE FUNCTION extensions.pgp_pub_encrypt(text, bytea)
 RETURNS bytea
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_encrypt_text$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions     | pgp_pub_encrypt                    | CREATE OR REPLACE FUNCTION extensions.pgp_pub_encrypt(text, bytea, text)
 RETURNS bytea
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_encrypt_text$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| extensions     | pgp_pub_encrypt_bytea              | CREATE OR REPLACE FUNCTION extensions.pgp_pub_encrypt_bytea(bytea, bytea)
 RETURNS bytea
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_encrypt_bytea$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| extensions     | pgp_pub_encrypt_bytea              | CREATE OR REPLACE FUNCTION extensions.pgp_pub_encrypt_bytea(bytea, bytea, text)
 RETURNS bytea
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_pub_encrypt_bytea$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| extensions     | pgp_sym_decrypt                    | CREATE OR REPLACE FUNCTION extensions.pgp_sym_decrypt(bytea, text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_sym_decrypt_text$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| extensions     | pgp_sym_decrypt                    | CREATE OR REPLACE FUNCTION extensions.pgp_sym_decrypt(bytea, text, text)
 RETURNS text
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_sym_decrypt_text$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| extensions     | pgp_sym_decrypt_bytea              | CREATE OR REPLACE FUNCTION extensions.pgp_sym_decrypt_bytea(bytea, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_sym_decrypt_bytea$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| extensions     | pgp_sym_decrypt_bytea              | CREATE OR REPLACE FUNCTION extensions.pgp_sym_decrypt_bytea(bytea, text, text)
 RETURNS bytea
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_sym_decrypt_bytea$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| extensions     | pgp_sym_encrypt                    | CREATE OR REPLACE FUNCTION extensions.pgp_sym_encrypt(text, text)
 RETURNS bytea
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_sym_encrypt_text$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| extensions     | pgp_sym_encrypt                    | CREATE OR REPLACE FUNCTION extensions.pgp_sym_encrypt(text, text, text)
 RETURNS bytea
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_sym_encrypt_text$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| extensions     | pgp_sym_encrypt_bytea              | CREATE OR REPLACE FUNCTION extensions.pgp_sym_encrypt_bytea(bytea, text)
 RETURNS bytea
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_sym_encrypt_bytea$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| extensions     | pgp_sym_encrypt_bytea              | CREATE OR REPLACE FUNCTION extensions.pgp_sym_encrypt_bytea(bytea, text, text)
 RETURNS bytea
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/pgcrypto', $function$pgp_sym_encrypt_bytea$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| extensions     | pgrst_ddl_watch                    | CREATE OR REPLACE FUNCTION extensions.pgrst_ddl_watch()
 RETURNS event_trigger
 LANGUAGE plpgsql
AS $function$
DECLARE
  cmd record;
BEGIN
  FOR cmd IN SELECT * FROM pg_event_trigger_ddl_commands()
  LOOP
    IF cmd.command_tag IN (
      'CREATE SCHEMA', 'ALTER SCHEMA'
    , 'CREATE TABLE', 'CREATE TABLE AS', 'SELECT INTO', 'ALTER TABLE'
    , 'CREATE FOREIGN TABLE', 'ALTER FOREIGN TABLE'
    , 'CREATE VIEW', 'ALTER VIEW'
    , 'CREATE MATERIALIZED VIEW', 'ALTER MATERIALIZED VIEW'
    , 'CREATE FUNCTION', 'ALTER FUNCTION'
    , 'CREATE TRIGGER'
    , 'CREATE TYPE', 'ALTER TYPE'
    , 'CREATE RULE'
    , 'COMMENT'
    )
    -- don't notify in case of CREATE TEMP table or other objects created on pg_temp
    AND cmd.schema_name is distinct from 'pg_temp'
    THEN
      NOTIFY pgrst, 'reload schema';
    END IF;
  END LOOP;
END; $function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| extensions     | pgrst_drop_watch                   | CREATE OR REPLACE FUNCTION extensions.pgrst_drop_watch()
 RETURNS event_trigger
 LANGUAGE plpgsql
AS $function$
DECLARE
  obj record;
BEGIN
  FOR obj IN SELECT * FROM pg_event_trigger_dropped_objects()
  LOOP
    IF obj.object_type IN (
      'schema'
    , 'table'
    , 'foreign table'
    , 'view'
    , 'materialized view'
    , 'function'
    , 'trigger'
    , 'type'
    , 'rule'
    )
    AND obj.is_temporary IS false -- no pg_temp objects
    THEN
      NOTIFY pgrst, 'reload schema';
    END IF;
  END LOOP;
END; $function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| extensions     | set_graphql_placeholder            | CREATE OR REPLACE FUNCTION extensions.set_graphql_placeholder()
 RETURNS event_trigger
 LANGUAGE plpgsql
AS $function$
    DECLARE
    graphql_is_dropped bool;
    BEGIN
    graphql_is_dropped = (
        SELECT ev.schema_name = 'graphql_public'
        FROM pg_event_trigger_dropped_objects() AS ev
        WHERE ev.schema_name = 'graphql_public'
    );

    IF graphql_is_dropped
    THEN
        create or replace function graphql_public.graphql(
            "operationName" text default null,
            query text default null,
            variables jsonb default null,
            extensions jsonb default null
        )
            returns jsonb
            language plpgsql
        as $$
            DECLARE
                server_version float;
            BEGIN
                server_version = (SELECT (SPLIT_PART((select version()), ' ', 2))::float);

                IF server_version >= 14 THEN
                    RETURN jsonb_build_object(
                        'errors', jsonb_build_array(
                            jsonb_build_object(
                                'message', 'pg_graphql extension is not enabled.'
                            )
                        )
                    );
                ELSE
                    RETURN jsonb_build_object(
                        'errors', jsonb_build_array(
                            jsonb_build_object(
                                'message', 'pg_graphql is only available on projects running Postgres 14 onwards.'
                            )
                        )
                    );
                END IF;
            END;
        $$;
    END IF;

    END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| extensions     | uuid_generate_v1                   | CREATE OR REPLACE FUNCTION extensions.uuid_generate_v1()
 RETURNS uuid
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/uuid-ossp', $function$uuid_generate_v1$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| extensions     | uuid_generate_v1mc                 | CREATE OR REPLACE FUNCTION extensions.uuid_generate_v1mc()
 RETURNS uuid
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/uuid-ossp', $function$uuid_generate_v1mc$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| extensions     | uuid_generate_v3                   | CREATE OR REPLACE FUNCTION extensions.uuid_generate_v3(namespace uuid, name text)
 RETURNS uuid
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/uuid-ossp', $function$uuid_generate_v3$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| extensions     | uuid_generate_v4                   | CREATE OR REPLACE FUNCTION extensions.uuid_generate_v4()
 RETURNS uuid
 LANGUAGE c
 PARALLEL SAFE STRICT
AS '$libdir/uuid-ossp', $function$uuid_generate_v4$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| extensions     | uuid_generate_v5                   | CREATE OR REPLACE FUNCTION extensions.uuid_generate_v5(namespace uuid, name text)
 RETURNS uuid
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/uuid-ossp', $function$uuid_generate_v5$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| extensions     | uuid_nil                           | CREATE OR REPLACE FUNCTION extensions.uuid_nil()
 RETURNS uuid
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/uuid-ossp', $function$uuid_nil$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| extensions     | uuid_ns_dns                        | CREATE OR REPLACE FUNCTION extensions.uuid_ns_dns()
 RETURNS uuid
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/uuid-ossp', $function$uuid_ns_dns$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| extensions     | uuid_ns_oid                        | CREATE OR REPLACE FUNCTION extensions.uuid_ns_oid()
 RETURNS uuid
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/uuid-ossp', $function$uuid_ns_oid$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| extensions     | uuid_ns_url                        | CREATE OR REPLACE FUNCTION extensions.uuid_ns_url()
 RETURNS uuid
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/uuid-ossp', $function$uuid_ns_url$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| extensions     | uuid_ns_x500                       | CREATE OR REPLACE FUNCTION extensions.uuid_ns_x500()
 RETURNS uuid
 LANGUAGE c
 IMMUTABLE PARALLEL SAFE STRICT
AS '$libdir/uuid-ossp', $function$uuid_ns_x500$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| graphql        | _internal_resolve                  | CREATE OR REPLACE FUNCTION graphql._internal_resolve(query text, variables jsonb DEFAULT '{}'::jsonb, "operationName" text DEFAULT NULL::text, extensions jsonb DEFAULT NULL::jsonb)
 RETURNS jsonb
 LANGUAGE c
AS '$libdir/pg_graphql', $function$resolve_wrapper$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| graphql        | comment_directive                  | CREATE OR REPLACE FUNCTION graphql.comment_directive(comment_ text)
 RETURNS jsonb
 LANGUAGE sql
 IMMUTABLE
AS $function$
    /*
    comment on column public.account.name is '@graphql.name: myField'
    */
    select
        coalesce(
            (
                regexp_match(
                    comment_,
                    '@graphql\((.+)\)'
                )
            )[1]::jsonb,
            jsonb_build_object()
        )
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| graphql        | exception                          | CREATE OR REPLACE FUNCTION graphql.exception(message text)
 RETURNS text
 LANGUAGE plpgsql
AS $function$
begin
    raise exception using errcode='22000', message=message;
end;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| graphql        | get_schema_version                 | CREATE OR REPLACE FUNCTION graphql.get_schema_version()
 RETURNS integer
 LANGUAGE sql
 SECURITY DEFINER
AS $function$
    select last_value from graphql.seq_schema_version;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| graphql        | increment_schema_version           | CREATE OR REPLACE FUNCTION graphql.increment_schema_version()
 RETURNS event_trigger
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
begin
    perform pg_catalog.nextval('graphql.seq_schema_version');
end;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| graphql        | resolve                            | CREATE OR REPLACE FUNCTION graphql.resolve(query text, variables jsonb DEFAULT '{}'::jsonb, "operationName" text DEFAULT NULL::text, extensions jsonb DEFAULT NULL::jsonb)
 RETURNS jsonb
 LANGUAGE plpgsql
AS $function$
declare
    res jsonb;
    message_text text;
begin
  begin
    select graphql._internal_resolve("query" := "query",
                                     "variables" := "variables",
                                     "operationName" := "operationName",
                                     "extensions" := "extensions") into res;
    return res;
  exception
    when others then
    get stacked diagnostics message_text = message_text;
    return
    jsonb_build_object('data', null,
                       'errors', jsonb_build_array(jsonb_build_object('message', message_text)));
  end;
end;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| graphql_public | graphql                            | CREATE OR REPLACE FUNCTION graphql_public.graphql("operationName" text DEFAULT NULL::text, query text DEFAULT NULL::text, variables jsonb DEFAULT NULL::jsonb, extensions jsonb DEFAULT NULL::jsonb)
 RETURNS jsonb
 LANGUAGE sql
AS $function$
            select graphql.resolve(
                query := query,
                variables := coalesce(variables, '{}'),
                "operationName" := "operationName",
                extensions := extensions
            );
        $function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| pgbouncer      | get_auth                           | CREATE OR REPLACE FUNCTION pgbouncer.get_auth(p_usename text)
 RETURNS TABLE(username text, password text)
 LANGUAGE plpgsql
 SECURITY DEFINER
 SET search_path TO ''
AS $function$
  BEGIN
      RAISE DEBUG 'PgBouncer auth request: %', p_usename;

      RETURN QUERY
      SELECT
          rolname::text,
          CASE WHEN rolvaliduntil < now()
              THEN null
              ELSE rolpassword::text
          END
      FROM pg_authid
      WHERE rolname=$1 and rolcanlogin;
  END;
  $function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| public         | auto_record_response_on_comment    | CREATE OR REPLACE FUNCTION public.auto_record_response_on_comment()
 RETURNS trigger
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
DECLARE
    v_ticket RECORD;
    v_responder_role VARCHAR(20);
BEGIN
    -- Get ticket info
    SELECT * INTO v_ticket FROM public.tickets WHERE id = NEW.ticket_id;

    -- Determine responder role
    IF NEW.user_id = v_ticket.created_by THEN
        v_responder_role := 'creator';
    ELSIF NEW.user_id = v_ticket.assigned_to THEN
        v_responder_role := 'assignee';
    ELSIF public.is_ticketing_admin(NEW.user_id) THEN
        v_responder_role := 'admin';
    ELSIF public.is_ticketing_ops(NEW.user_id) THEN
        v_responder_role := 'ops';
    ELSE
        v_responder_role := 'creator'; -- Default to creator for external comments
    END IF;

    -- Record the response
    PERFORM public.record_ticket_response(
        NEW.ticket_id,
        NEW.user_id,
        v_responder_role,
        NEW.id
    );

    RETURN NEW;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| public         | calculate_business_hours_seconds   | CREATE OR REPLACE FUNCTION public.calculate_business_hours_seconds(p_start_time timestamp with time zone, p_end_time timestamp with time zone)
 RETURNS integer
 LANGUAGE plpgsql
 STABLE
AS $function$
DECLARE
    v_current_time TIMESTAMPTZ;
    v_total_seconds INTEGER := 0;
    v_day_of_week INTEGER;
    v_is_working_day BOOLEAN;
    v_start_time TIME;
    v_end_time TIME;
    v_day_start TIMESTAMPTZ;
    v_day_end TIMESTAMPTZ;
    v_work_start TIMESTAMPTZ;
    v_work_end TIMESTAMPTZ;
    v_is_holiday BOOLEAN;
BEGIN
    IF p_start_time IS NULL OR p_end_time IS NULL THEN
        RETURN NULL;
    END IF;

    IF p_start_time >= p_end_time THEN
        RETURN 0;
    END IF;

    v_current_time := p_start_time;

    -- Iterate through each day
    WHILE v_current_time < p_end_time LOOP
        v_day_of_week := EXTRACT(DOW FROM v_current_time)::INTEGER;

        -- Get business hours for this day (with defaults)
        SELECT
            COALESCE(is_working_day, v_day_of_week BETWEEN 1 AND 5), -- Default: Mon-Fri are working days
            COALESCE(start_time, '08:00:00'::TIME),
            COALESCE(end_time, '18:00:00'::TIME)
        INTO v_is_working_day, v_start_time, v_end_time
        FROM public.sla_business_hours
        WHERE day_of_week = v_day_of_week;

        -- If no row found, use defaults
        IF NOT FOUND THEN
            v_is_working_day := (v_day_of_week BETWEEN 1 AND 5); -- Mon-Fri
            v_start_time := '08:00:00'::TIME;
            v_end_time := '18:00:00'::TIME;
        END IF;

        -- Check if it's a holiday
        SELECT EXISTS(
            SELECT 1 FROM public.sla_holidays
            WHERE holiday_date = v_current_time::DATE
        ) INTO v_is_holiday;

        -- Only count if it's a working day and not a holiday
        IF v_is_working_day AND NOT COALESCE(v_is_holiday, FALSE) THEN
            -- Calculate working hours for this day
            v_day_start := DATE_TRUNC('day', v_current_time) + v_start_time::INTERVAL;
            v_day_end := DATE_TRUNC('day', v_current_time) + v_end_time::INTERVAL;

            -- Clamp to the actual range
            v_work_start := GREATEST(v_current_time, v_day_start);
            v_work_end := LEAST(p_end_time, v_day_end);

            -- Add seconds if there's overlap
            IF v_work_start < v_work_end THEN
                v_total_seconds := v_total_seconds + EXTRACT(EPOCH FROM (v_work_end - v_work_start))::INTEGER;
            END IF;
        END IF;

        -- Move to start of next day
        v_current_time := DATE_TRUNC('day', v_current_time) + INTERVAL '1 day';
    END LOOP;

    RETURN v_total_seconds;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public         | can_access_ticketing               | CREATE OR REPLACE FUNCTION public.can_access_ticketing(user_id uuid)
 RETURNS boolean
 LANGUAGE plpgsql
 STABLE SECURITY DEFINER
AS $function$
DECLARE
    user_role TEXT;
BEGIN
    SELECT role INTO user_role
    FROM public.profiles
    WHERE profiles.user_id = can_access_ticketing.user_id AND is_active = TRUE;

    -- Finance role has no access
    IF user_role = 'finance' THEN
        RETURN FALSE;
    END IF;

    RETURN user_role IS NOT NULL;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| public         | can_see_account_via_ticketing      | CREATE OR REPLACE FUNCTION public.can_see_account_via_ticketing(p_user_id uuid, p_account_id text)
 RETURNS boolean
 LANGUAGE plpgsql
 STABLE SECURITY DEFINER
AS $function$
BEGIN
    -- Check if user is ticketing ops and has ticket access for this account
    IF public.is_ticketing_ops(p_user_id) THEN
        RETURN EXISTS (
            SELECT 1 FROM public.tickets t
            WHERE t.account_id = p_account_id
            AND (
                t.created_by = p_user_id
                OR t.assigned_to = p_user_id
                OR public.is_ticketing_admin(p_user_id)
                OR public.get_user_ticketing_department(p_user_id) = t.department
            )
        );
    END IF;
    RETURN FALSE;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| public         | check_idempotency                  | CREATE OR REPLACE FUNCTION public.check_idempotency(p_key text)
 RETURNS jsonb
 LANGUAGE plpgsql
AS $function$
DECLARE
  v_result JSONB;
BEGIN
  SELECT response INTO v_result
  FROM crm_idempotency
  WHERE idempotency_key = p_key
    AND expires_at > NOW();

  RETURN v_result;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public         | check_ticket_has_quotation         | CREATE OR REPLACE FUNCTION public.check_ticket_has_quotation(p_ticket_id uuid)
 RETURNS jsonb
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
DECLARE
    v_quotation RECORD;
    v_count INTEGER;
BEGIN
    -- Count quotations for this ticket
    SELECT COUNT(*) INTO v_count
    FROM public.customer_quotations
    WHERE ticket_id = p_ticket_id;

    IF v_count = 0 THEN
        RETURN jsonb_build_object(
            'has_quotation', FALSE,
            'quotation_count', 0,
            'message', 'No customer quotation found. Please create a customer quotation first.'
        );
    END IF;

    -- Get the latest/active quotation
    SELECT * INTO v_quotation
    FROM public.customer_quotations
    WHERE ticket_id = p_ticket_id
    ORDER BY
        CASE status
            WHEN 'sent' THEN 1
            WHEN 'draft' THEN 2
            WHEN 'accepted' THEN 3
            ELSE 4
        END,
        created_at DESC
    LIMIT 1;

    RETURN jsonb_build_object(
        'has_quotation', TRUE,
        'quotation_count', v_count,
        'active_quotation', jsonb_build_object(
            'id', v_quotation.id,
            'quotation_number', v_quotation.quotation_number,
            'status', v_quotation.status,
            'total_selling_rate', v_quotation.total_selling_rate,
            'currency', v_quotation.currency,
            'sequence_number', v_quotation.sequence_number
        )
    );
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
| public         | cleanup_expired_idempotency        | CREATE OR REPLACE FUNCTION public.cleanup_expired_idempotency()
 RETURNS integer
 LANGUAGE plpgsql
AS $function$
DECLARE
  v_count INTEGER;
BEGIN
  DELETE FROM crm_idempotency WHERE expires_at < NOW();
  GET DIAGNOSTICS v_count = ROW_COUNT;
  RETURN v_count;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public         | create_quotation_from_lead         | CREATE OR REPLACE FUNCTION public.create_quotation_from_lead(p_lead_id text, p_created_by uuid)
 RETURNS jsonb
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
DECLARE
    v_lead RECORD;
    v_quotation_id UUID;
    v_quotation_number TEXT;
    v_seq INTEGER;
BEGIN
    -- Get lead info
    SELECT l.*, sd.*
    INTO v_lead
    FROM public.leads l
    LEFT JOIN public.lead_shipment_details sd ON sd.lead_id = l.lead_id
    WHERE l.lead_id = p_lead_id;

    IF v_lead IS NULL THEN
        RETURN jsonb_build_object('success', FALSE, 'error', 'Lead not found');
    END IF;

    -- Check lead status - must be Qualified or higher
    IF v_lead.triage_status NOT IN ('Qualified', 'Handed Over', 'Assigned to Sales') THEN
        RETURN jsonb_build_object('success', FALSE, 'error', 'Lead must be qualified first');
    END IF;

    -- Get sequence number
    v_seq := public.get_next_quotation_sequence(NULL, p_lead_id, NULL);

    -- Generate quotation number
    SELECT 'QUO-' || TO_CHAR(NOW(), 'YYYYMM') || '-' || LPAD((COALESCE(MAX(CAST(SUBSTRING(quotation_number FROM 12) AS INTEGER)), 0) + 1)::TEXT, 4, '0')
    INTO v_quotation_number
    FROM public.customer_quotations
    WHERE quotation_number LIKE 'QUO-' || TO_CHAR(NOW(), 'YYYYMM') || '-%';

    -- Create quotation
    INSERT INTO public.customer_quotations (
        lead_id,
        source_type,
        sequence_number,
        quotation_number,
        customer_name,
        customer_company,
        customer_email,
        customer_phone,
        service_type,
        fleet_type,
        fleet_quantity,
        incoterm,
        commodity,
        cargo_description,
        cargo_weight,
        cargo_volume,
        origin_address,
        origin_city,
        origin_country,
        destination_address,
        destination_city,
        destination_country,
        status,
        created_by
    ) VALUES (
        p_lead_id,
        'lead',
        v_seq,
        v_quotation_number,
        v_lead.contact_name,
        v_lead.company_name,
        v_lead.contact_email,
        v_lead.contact_phone,
        v_lead.service_type_code,
        v_lead.fleet_type,
        v_lead.fleet_quantity,
        v_lead.incoterm,
        v_lead.cargo_category,
        v_lead.cargo_description,
        v_lead.weight_total_kg,
        v_lead.volume_total_cbm,
        v_lead.origin_address,
        v_lead.origin_city,
        v_lead.origin_country,
        v_lead.destination_address,
        v_lead.destination_city,
        v_lead.destination_country,
        'draft',
        p_created_by
    )
    RETURNING id INTO v_quotation_id;

    -- Update lead with quotation info
    UPDATE public.leads
    SET
        quotation_status = 'draft',
        latest_quotation_id = v_quotation_id,
        quotation_count = v_seq,
        updated_at = NOW()
    WHERE lead_id = p_lead_id;

    RETURN jsonb_build_object(
        'success', TRUE,
        'quotation_id', v_quotation_id,
        'quotation_number', v_quotation_number,
        'sequence_number', v_seq
    );
EXCEPTION
    WHEN OTHERS THEN
        RETURN jsonb_build_object('success', FALSE, 'error', SQLERRM);
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
| public         | create_quotation_from_opportunity  | CREATE OR REPLACE FUNCTION public.create_quotation_from_opportunity(p_opportunity_id text, p_created_by uuid)
 RETURNS jsonb
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
DECLARE
    v_opportunity RECORD;
    v_account RECORD;
    v_quotation_id UUID;
    v_quotation_number TEXT;
    v_seq INTEGER;
BEGIN
    -- Get opportunity with account info
    SELECT o.*, a.*
    INTO v_opportunity
    FROM public.opportunities o
    LEFT JOIN public.accounts a ON a.account_id = o.account_id
    WHERE o.opportunity_id = p_opportunity_id;

    IF v_opportunity IS NULL THEN
        RETURN jsonb_build_object('success', FALSE, 'error', 'Opportunity not found');
    END IF;

    -- Get sequence number
    v_seq := public.get_next_quotation_sequence(NULL, NULL, p_opportunity_id);

    -- Generate quotation number
    SELECT 'QUO-' || TO_CHAR(NOW(), 'YYYYMM') || '-' || LPAD((COALESCE(MAX(CAST(SUBSTRING(quotation_number FROM 12) AS INTEGER)), 0) + 1)::TEXT, 4, '0')
    INTO v_quotation_number
    FROM public.customer_quotations
    WHERE quotation_number LIKE 'QUO-' || TO_CHAR(NOW(), 'YYYYMM') || '-%';

    -- Create quotation
    INSERT INTO public.customer_quotations (
        opportunity_id,
        source_type,
        sequence_number,
        quotation_number,
        customer_name,
        customer_company,
        customer_email,
        customer_phone,
        customer_address,
        status,
        created_by
    ) VALUES (
        p_opportunity_id,
        'opportunity',
        v_seq,
        v_quotation_number,
        v_opportunity.pic_name,
        v_opportunity.company_name,
        v_opportunity.pic_email,
        v_opportunity.pic_phone,
        v_opportunity.address,
        'draft',
        p_created_by
    )
    RETURNING id INTO v_quotation_id;

    -- Update opportunity with quotation info
    UPDATE public.opportunities
    SET
        quotation_status = 'draft',
        latest_quotation_id = v_quotation_id,
        quotation_count = v_seq,
        updated_at = NOW()
    WHERE opportunity_id = p_opportunity_id;

    RETURN jsonb_build_object(
        'success', TRUE,
        'quotation_id', v_quotation_id,
        'quotation_number', v_quotation_number,
        'sequence_number', v_seq
    );
EXCEPTION
    WHEN OTHERS THEN
        RETURN jsonb_build_object('success', FALSE, 'error', SQLERRM);
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| public         | create_quotation_from_pipeline     | CREATE OR REPLACE FUNCTION public.create_quotation_from_pipeline(p_opportunity_id text, p_customer_name text, p_customer_company text DEFAULT NULL::text, p_customer_email text DEFAULT NULL::text, p_customer_phone text DEFAULT NULL::text, p_customer_address text DEFAULT NULL::text, p_service_type text DEFAULT NULL::text, p_incoterm text DEFAULT NULL::text, p_fleet_type text DEFAULT NULL::text, p_fleet_quantity integer DEFAULT NULL::integer, p_commodity text DEFAULT NULL::text, p_cargo_description text DEFAULT NULL::text, p_cargo_weight numeric DEFAULT NULL::numeric, p_cargo_weight_unit text DEFAULT 'kg'::text, p_cargo_volume numeric DEFAULT NULL::numeric, p_cargo_volume_unit text DEFAULT 'cbm'::text, p_cargo_quantity integer DEFAULT NULL::integer, p_cargo_quantity_unit text DEFAULT NULL::text, p_origin_address text DEFAULT NULL::text, p_origin_city text DEFAULT NULL::text, p_origin_country text DEFAULT NULL::text, p_origin_port text DEFAULT NULL::text, p_destination_address text DEFAULT NULL::text, p_destination_city text DEFAULT NULL::text, p_destination_country text DEFAULT NULL::text, p_destination_port text DEFAULT NULL::text, p_rate_structure text DEFAULT 'bundling'::text, p_total_cost numeric DEFAULT 0, p_target_margin_percent numeric DEFAULT 0, p_total_selling_rate numeric DEFAULT 0, p_currency text DEFAULT 'IDR'::text, p_scope_of_work text DEFAULT NULL::text, p_terms_includes text[] DEFAULT '{}'::text[], p_terms_excludes text[] DEFAULT '{}'::text[], p_terms_notes text DEFAULT NULL::text, p_validity_days integer DEFAULT 14)
 RETURNS jsonb
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
DECLARE
    v_user_id UUID;
    v_opportunity RECORD;
    v_lead_id TEXT;
    v_quotation_number TEXT;
    v_sequence_number INTEGER;
    v_quotation_id UUID;
    v_valid_until DATE;
BEGIN
    v_user_id := auth.uid();

    IF v_user_id IS NULL THEN
        RETURN jsonb_build_object('success', FALSE, 'error', 'Not authenticated');
    END IF;

    -- Get opportunity with source_lead_id
    SELECT opportunity_id, name, source_lead_id, account_id
    INTO v_opportunity
    FROM public.opportunities
    WHERE opportunity_id = p_opportunity_id;

    IF v_opportunity IS NULL THEN
        RETURN jsonb_build_object('success', FALSE, 'error', 'Opportunity not found');
    END IF;

    -- Resolve lead_id from opportunity
    v_lead_id := v_opportunity.source_lead_id;

    -- Generate quotation number
    SELECT public.generate_customer_quotation_number() INTO v_quotation_number;

    IF v_quotation_number IS NULL THEN
        RETURN jsonb_build_object('success', FALSE, 'error', 'Failed to generate quotation number');
    END IF;

    -- Get next sequence number for this opportunity
    SELECT public.get_next_quotation_sequence(
        NULL,  -- ticket_id
        v_lead_id,
        p_opportunity_id
    ) INTO v_sequence_number;

    -- Calculate valid_until
    v_valid_until := CURRENT_DATE + p_validity_days;

    -- Insert quotation
    INSERT INTO public.customer_quotations (
        ticket_id,
        lead_id,
        opportunity_id,
        source_type,
        sequence_number,
        quotation_number,
        customer_name,
        customer_company,
        customer_email,
        customer_phone,
        customer_address,
        service_type,
        fleet_type,
        fleet_quantity,
        incoterm,
        commodity,
        cargo_description,
        cargo_weight,
        cargo_weight_unit,
        cargo_volume,
        cargo_volume_unit,
        cargo_quantity,
        cargo_quantity_unit,
        origin_address,
        origin_city,
        origin_country,
        origin_port,
        destination_address,
        destination_city,
        destination_country,
        destination_port,
        rate_structure,
        total_cost,
        target_margin_percent,
        total_selling_rate,
        currency,
        scope_of_work,
        terms_includes,
        terms_excludes,
        terms_notes,
        validity_days,
        valid_until,
        created_by
    ) VALUES (
        NULL,  -- ticket_id
        v_lead_id,
        p_opportunity_id,
        'opportunity',
        v_sequence_number,
        v_quotation_number,
        p_customer_name,
        p_customer_company,
        p_customer_email,
        p_customer_phone,
        p_customer_address,
        p_service_type,
        p_fleet_type,
        p_fleet_quantity,
        p_incoterm,
        p_commodity,
        p_cargo_description,
        p_cargo_weight,
        p_cargo_weight_unit,
        p_cargo_volume,
        p_cargo_volume_unit,
        p_cargo_quantity,
        p_cargo_quantity_unit,
        p_origin_address,
        p_origin_city,
        p_origin_country,
        p_origin_port,
        p_destination_address,
        p_destination_city,
        p_destination_country,
        p_destination_port,
        p_rate_structure,
        p_total_cost,
        p_target_margin_percent,
        p_total_selling_rate,
        p_currency,
        p_scope_of_work,
        p_terms_includes,
        p_terms_excludes,
        p_terms_notes,
        p_validity_days,
        v_valid_until,
        v_user_id
    )
    RETURNING id INTO v_quotation_id;

    -- Sync to lead if linked
    IF v_lead_id IS NOT NULL THEN
        PERFORM public.sync_quotation_to_lead(v_quotation_id, 'draft', v_user_id);
    END IF;

    -- Sync to opportunity
    PERFORM public.sync_quotation_to_opportunity(v_quotation_id, 'draft', v_user_id);

    RETURN jsonb_build_object(
        'success', TRUE,
        'quotation_id', v_quotation_id,
        'quotation_number', v_quotation_number,
        'sequence_number', v_sequence_number,
        'sequence_label', public.get_quotation_sequence_label(v_sequence_number),
        'lead_id', v_lead_id,
        'opportunity_id', p_opportunity_id
    );
EXCEPTION
    WHEN OTHERS THEN
        RETURN jsonb_build_object('success', FALSE, 'error', SQLERRM);
END;
$function$
 |
| public         | crm_cleanup_old_notification_logs  | CREATE OR REPLACE FUNCTION public.crm_cleanup_old_notification_logs()
 RETURNS integer
 LANGUAGE plpgsql
AS $function$
DECLARE
    deleted_count INTEGER;
BEGIN
    DELETE FROM crm_notification_logs
    WHERE sent_at < NOW() - INTERVAL '90 days';

    GET DIAGNOSTICS deleted_count = ROW_COUNT;
    RETURN deleted_count;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| public         | crm_log_notification               | CREATE OR REPLACE FUNCTION public.crm_log_notification(p_entity_type text, p_entity_id text, p_event text, p_threshold integer DEFAULT NULL::integer, p_recipient_emails text[] DEFAULT NULL::text[], p_cc_emails text[] DEFAULT NULL::text[], p_subject text DEFAULT NULL::text, p_status text DEFAULT 'sent'::text, p_error_message text DEFAULT NULL::text, p_metadata jsonb DEFAULT NULL::jsonb)
 RETURNS bigint
 LANGUAGE plpgsql
AS $function$
DECLARE
    v_log_id BIGINT;
BEGIN
    INSERT INTO crm_notification_logs (
        entity_type, entity_id, event, threshold,
        recipient_emails, cc_emails, subject, status,
        error_message, metadata
    ) VALUES (
        p_entity_type, p_entity_id, p_event, p_threshold,
        p_recipient_emails, p_cc_emails, p_subject, p_status,
        p_error_message, p_metadata
    )
    ON CONFLICT (entity_type, entity_id, event, threshold)
    DO UPDATE SET
        status = EXCLUDED.status,
        error_message = EXCLUDED.error_message,
        sent_at = NOW()
    RETURNING id INTO v_log_id;

    RETURN v_log_id;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| public         | crm_notification_exists            | CREATE OR REPLACE FUNCTION public.crm_notification_exists(p_entity_type text, p_entity_id text, p_event text, p_threshold integer DEFAULT NULL::integer)
 RETURNS boolean
 LANGUAGE plpgsql
AS $function$
BEGIN
    IF p_threshold IS NULL THEN
        RETURN EXISTS (
            SELECT 1 FROM crm_notification_logs
            WHERE entity_type = p_entity_type
            AND entity_id = p_entity_id
            AND event = p_event
            AND threshold IS NULL
            AND status = 'sent'
        );
    ELSE
        RETURN EXISTS (
            SELECT 1 FROM crm_notification_logs
            WHERE entity_type = p_entity_type
            AND entity_id = p_entity_id
            AND event = p_event
            AND threshold = p_threshold
            AND status = 'sent'
        );
    END IF;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| public         | fn_check_quotation_authorization   | CREATE OR REPLACE FUNCTION public.fn_check_quotation_authorization(p_quotation_id uuid, p_actor_user_id uuid, p_action text DEFAULT 'transition'::text)
 RETURNS jsonb
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
DECLARE
    v_quotation RECORD;
    v_profile RECORD;
    v_is_creator BOOLEAN := FALSE;
    v_is_ticket_owner BOOLEAN := FALSE;
    v_is_ticket_assignee BOOLEAN := FALSE;
    v_has_ticketing_role BOOLEAN := FALSE;
    v_allowed_roles TEXT[] := ARRAY['superadmin', 'director', 'manager', 'sales', 'marketing', 'accountmanager'];
BEGIN
    -- If no actor provided, return unauthorized
    IF p_actor_user_id IS NULL THEN
        RETURN jsonb_build_object(
            'authorized', FALSE,
            'error', 'Actor user ID is required for authorization',
            'error_code', 'UNAUTHORIZED_NO_ACTOR'
        );
    END IF;

    -- Get quotation with linked ticket
    SELECT cq.*, t.created_by AS ticket_creator, t.assigned_to AS ticket_assignee
    INTO v_quotation
    FROM public.customer_quotations cq
    LEFT JOIN public.tickets t ON t.id = cq.ticket_id
    WHERE cq.id = p_quotation_id;

    IF v_quotation IS NULL THEN
        RETURN jsonb_build_object(
            'authorized', FALSE,
            'error', 'Quotation not found',
            'error_code', 'QUOTATION_NOT_FOUND'
        );
    END IF;

    -- Get actor's profile and role
    SELECT * INTO v_profile
    FROM public.profiles
    WHERE user_id = p_actor_user_id;

    IF v_profile IS NULL THEN
        RETURN jsonb_build_object(
            'authorized', FALSE,
            'error', 'Actor profile not found',
            'error_code', 'UNAUTHORIZED_NO_PROFILE'
        );
    END IF;

    -- Check if actor is the quotation creator
    v_is_creator := (v_quotation.created_by = p_actor_user_id);

    -- Check if actor is the ticket creator or assignee
    v_is_ticket_owner := (v_quotation.ticket_creator = p_actor_user_id);
    v_is_ticket_assignee := (v_quotation.ticket_assignee = p_actor_user_id);

    -- Check if actor has a ticketing-enabled role
    v_has_ticketing_role := (v_profile.role::TEXT = ANY(v_allowed_roles));

    -- Authorization logic: must be creator, ticket owner/assignee, OR have ticketing role
    IF v_is_creator OR v_is_ticket_owner OR v_is_ticket_assignee OR v_has_ticketing_role THEN
        RETURN jsonb_build_object(
            'authorized', TRUE,
            'is_creator', v_is_creator,
            'is_ticket_owner', v_is_ticket_owner,
            'is_ticket_assignee', v_is_ticket_assignee,
            'has_ticketing_role', v_has_ticketing_role,
            'actor_role', v_profile.role
        );
    END IF;

    -- Not authorized
    RETURN jsonb_build_object(
        'authorized', FALSE,
        'error', 'You do not have permission to ' || p_action || ' this quotation. Must be creator, ticket owner/assignee, or have a ticketing role.',
        'error_code', 'FORBIDDEN'
    );
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| public         | fn_check_ticket_authorization      | CREATE OR REPLACE FUNCTION public.fn_check_ticket_authorization(p_ticket_id uuid, p_actor_user_id uuid, p_action text DEFAULT 'transition'::text)
 RETURNS jsonb
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
DECLARE
    v_ticket RECORD;
    v_profile RECORD;
    v_is_creator BOOLEAN := FALSE;
    v_is_assignee BOOLEAN := FALSE;
    v_is_department_manager BOOLEAN := FALSE;
    v_has_elevated_role BOOLEAN := FALSE;
    v_elevated_roles TEXT[] := ARRAY['superadmin', 'director', 'manager'];
BEGIN
    -- If no actor provided, return unauthorized
    IF p_actor_user_id IS NULL THEN
        RETURN jsonb_build_object(
            'authorized', FALSE,
            'error', 'Actor user ID is required for authorization',
            'error_code', 'UNAUTHORIZED_NO_ACTOR'
        );
    END IF;

    -- Get ticket
    SELECT * INTO v_ticket
    FROM public.tickets
    WHERE id = p_ticket_id;

    IF v_ticket IS NULL THEN
        RETURN jsonb_build_object(
            'authorized', FALSE,
            'error', 'Ticket not found',
            'error_code', 'TICKET_NOT_FOUND'
        );
    END IF;

    -- Get actor's profile
    SELECT * INTO v_profile
    FROM public.profiles
    WHERE user_id = p_actor_user_id;

    IF v_profile IS NULL THEN
        RETURN jsonb_build_object(
            'authorized', FALSE,
            'error', 'Actor profile not found',
            'error_code', 'UNAUTHORIZED_NO_PROFILE'
        );
    END IF;

    -- Check if actor is the ticket creator
    v_is_creator := (v_ticket.created_by = p_actor_user_id);

    -- Check if actor is the assignee
    v_is_assignee := (v_ticket.assigned_to = p_actor_user_id);

    -- Check if actor has elevated role
    v_has_elevated_role := (v_profile.role::TEXT = ANY(v_elevated_roles));

    -- Check if actor is department manager (same department as ticket)
    IF v_profile.role::TEXT = 'manager' AND v_profile.department = v_ticket.department THEN
        v_is_department_manager := TRUE;
    END IF;

    -- Authorization logic
    IF v_is_creator OR v_is_assignee OR v_is_department_manager OR v_has_elevated_role THEN
        RETURN jsonb_build_object(
            'authorized', TRUE,
            'is_creator', v_is_creator,
            'is_assignee', v_is_assignee,
            'is_department_manager', v_is_department_manager,
            'has_elevated_role', v_has_elevated_role,
            'actor_role', v_profile.role
        );
    END IF;

    -- Not authorized
    RETURN jsonb_build_object(
        'authorized', FALSE,
        'error', 'You do not have permission to ' || p_action || ' this ticket. Must be creator, assignee, department manager, or have elevated role.',
        'error_code', 'FORBIDDEN'
    );
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| public         | fn_validate_opportunity_transition | CREATE OR REPLACE FUNCTION public.fn_validate_opportunity_transition(p_current_stage text, p_target_stage text)
 RETURNS jsonb
 LANGUAGE plpgsql
 IMMUTABLE
AS $function$
DECLARE
    v_valid_transitions JSONB;
BEGIN
    -- Define valid state machine transitions for opportunities
    v_valid_transitions := '{
        "Prospecting": ["Discovery", "Quote Sent", "Closed Lost", "On Hold"],
        "Discovery": ["Quote Sent", "Negotiation", "Closed Lost", "On Hold"],
        "Quote Sent": ["Negotiation", "Closed Won", "Closed Lost", "On Hold"],
        "Negotiation": ["Quote Sent", "Closed Won", "Closed Lost", "On Hold"],
        "On Hold": ["Prospecting", "Discovery", "Quote Sent", "Negotiation", "Closed Lost"],
        "Closed Won": [],
        "Closed Lost": []
    }'::JSONB;

    -- Check if current stage exists
    IF NOT v_valid_transitions ? p_current_stage THEN
        RETURN jsonb_build_object(
            'valid', FALSE,
            'error', 'Unknown current stage: ' || p_current_stage,
            'error_code', 'INVALID_STAGE'
        );
    END IF;

    -- Check if target stage is allowed
    IF v_valid_transitions->p_current_stage @> to_jsonb(p_target_stage) THEN
        RETURN jsonb_build_object('valid', TRUE);
    END IF;

    -- Specific conflict messages for terminal states
    IF p_current_stage IN ('Closed Won', 'Closed Lost') THEN
        RETURN jsonb_build_object(
            'valid', FALSE,
            'error', 'Opportunity already closed as ' || p_current_stage || '. Cannot reopen or transition.',
            'error_code', 'CONFLICT_OPPORTUNITY_CLOSED'
        );
    END IF;

    RETURN jsonb_build_object(
        'valid', FALSE,
        'error', 'Invalid stage transition from ' || p_current_stage || ' to ' || p_target_stage,
        'error_code', 'INVALID_STAGE_TRANSITION'
    );
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          |
| public         | fn_validate_quotation_transition   | CREATE OR REPLACE FUNCTION public.fn_validate_quotation_transition(p_current_status text, p_target_status text)
 RETURNS jsonb
 LANGUAGE plpgsql
 IMMUTABLE
AS $function$
DECLARE
    v_valid_transitions JSONB;
BEGIN
    -- Define valid state machine transitions for customer_quotations
    -- Format: { "current_status": ["allowed_target_1", "allowed_target_2"] }
    v_valid_transitions := '{
        "draft": ["sent", "rejected"],
        "sent": ["rejected", "accepted"],
        "rejected": [],
        "accepted": []
    }'::JSONB;

    -- Check if current status exists in state machine
    IF NOT v_valid_transitions ? p_current_status THEN
        RETURN jsonb_build_object(
            'valid', FALSE,
            'error', 'Unknown current status: ' || p_current_status,
            'error_code', 'INVALID_STATUS'
        );
    END IF;

    -- Check if target status is allowed from current status
    IF v_valid_transitions->p_current_status @> to_jsonb(p_target_status) THEN
        RETURN jsonb_build_object('valid', TRUE);
    END IF;

    -- Specific conflict messages for terminal states
    IF p_current_status = 'accepted' THEN
        RETURN jsonb_build_object(
            'valid', FALSE,
            'error', 'Quotation already accepted. Cannot transition to ' || p_target_status || '. Create a new quotation instead.',
            'error_code', 'CONFLICT_ALREADY_ACCEPTED'
        );
    END IF;

    IF p_current_status = 'rejected' THEN
        RETURN jsonb_build_object(
            'valid', FALSE,
            'error', 'Quotation already rejected. Cannot transition to ' || p_target_status || '. Create a new quotation or revision instead.',
            'error_code', 'CONFLICT_ALREADY_REJECTED'
        );
    END IF;

    -- Generic invalid transition
    RETURN jsonb_build_object(
        'valid', FALSE,
        'error', 'Invalid transition from ' || p_current_status || ' to ' || p_target_status,
        'error_code', 'INVALID_STATUS_TRANSITION'
    );
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public         | fn_validate_ticket_transition      | CREATE OR REPLACE FUNCTION public.fn_validate_ticket_transition(p_current_status text, p_target_status text)
 RETURNS jsonb
 LANGUAGE plpgsql
 IMMUTABLE
AS $function$
DECLARE
    v_valid_transitions JSONB;
BEGIN
    -- Define valid state machine transitions for tickets (RFQ flow)
    v_valid_transitions := '{
        "open": ["in_progress", "waiting_customer", "need_adjustment", "on_hold", "closed"],
        "in_progress": ["waiting_customer", "need_adjustment", "waiting_vendor", "on_hold", "resolved", "closed"],
        "waiting_customer": ["in_progress", "need_adjustment", "resolved", "closed"],
        "waiting_vendor": ["in_progress", "need_adjustment", "waiting_customer", "on_hold", "closed"],
        "need_adjustment": ["in_progress", "waiting_customer", "waiting_vendor", "on_hold", "closed"],
        "on_hold": ["open", "in_progress", "waiting_customer", "waiting_vendor", "need_adjustment", "closed"],
        "resolved": ["closed", "in_progress"],
        "closed": []
    }'::JSONB;

    -- Check if current status exists
    IF NOT v_valid_transitions ? p_current_status THEN
        RETURN jsonb_build_object(
            'valid', FALSE,
            'error', 'Unknown current status: ' || p_current_status,
            'error_code', 'INVALID_STATUS'
        );
    END IF;

    -- Check if target status is allowed
    IF v_valid_transitions->p_current_status @> to_jsonb(p_target_status) THEN
        RETURN jsonb_build_object('valid', TRUE);
    END IF;

    -- Specific conflict message for closed tickets
    IF p_current_status = 'closed' THEN
        RETURN jsonb_build_object(
            'valid', FALSE,
            'error', 'Ticket already closed. Cannot reopen or transition.',
            'error_code', 'CONFLICT_TICKET_CLOSED'
        );
    END IF;

    RETURN jsonb_build_object(
        'valid', FALSE,
        'error', 'Invalid ticket transition from ' || p_current_status || ' to ' || p_target_status,
        'error_code', 'INVALID_STATUS_TRANSITION'
    );
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| public         | format_duration                    | CREATE OR REPLACE FUNCTION public.format_duration(p_seconds integer)
 RETURNS text
 LANGUAGE plpgsql
 IMMUTABLE
AS $function$
DECLARE
    v_days INTEGER;
    v_hours INTEGER;
    v_minutes INTEGER;
    v_result TEXT := '';
BEGIN
    IF p_seconds IS NULL THEN
        RETURN 'N/A';
    END IF;

    v_days := p_seconds / 86400;
    v_hours := (p_seconds % 86400) / 3600;
    v_minutes := (p_seconds % 3600) / 60;

    IF v_days > 0 THEN
        v_result := v_days || 'd ';
    END IF;

    IF v_hours > 0 OR v_days > 0 THEN
        v_result := v_result || v_hours || 'h ';
    END IF;

    v_result := v_result || v_minutes || 'm';

    RETURN v_result;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
| public         | generate_account_id                | CREATE OR REPLACE FUNCTION public.generate_account_id()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  IF NEW.account_id IS NULL THEN
    NEW.account_id := 'ACCT' || TO_CHAR(NOW(), 'YYYYMMDD') || UPPER(SUBSTRING(MD5(RANDOM()::TEXT) FROM 1 FOR 6));
  END IF;

  -- Generate dedupe_key if not provided
  IF NEW.dedupe_key IS NULL THEN
    NEW.dedupe_key := LOWER(TRIM(COALESCE(NEW.company_name, ''))) || '-' || COALESCE(LOWER(TRIM(NEW.domain)), LOWER(TRIM(NEW.pic_email)), '');
  END IF;

  RETURN NEW;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| public         | generate_activity_id               | CREATE OR REPLACE FUNCTION public.generate_activity_id()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  IF NEW.activity_id IS NULL THEN
    NEW.activity_id := 'ACT' || TO_CHAR(NOW(), 'YYYYMMDD') || UPPER(SUBSTRING(MD5(RANDOM()::TEXT) FROM 1 FOR 6));
  END IF;
  RETURN NEW;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
| public         | generate_attachment_id             | CREATE OR REPLACE FUNCTION public.generate_attachment_id()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  IF NEW.attachment_id IS NULL THEN
    NEW.attachment_id := 'ATT' || TO_CHAR(NOW(), 'YYYYMMDD') || UPPER(SUBSTRING(MD5(RANDOM()::TEXT) FROM 1 FOR 6));
  END IF;
  RETURN NEW;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
| public         | generate_contact_id                | CREATE OR REPLACE FUNCTION public.generate_contact_id()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  IF NEW.contact_id IS NULL THEN
    NEW.contact_id := 'CONT' || TO_CHAR(NOW(), 'YYYYMMDD') || UPPER(SUBSTRING(MD5(RANDOM()::TEXT) FROM 1 FOR 6));
  END IF;
  RETURN NEW;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         |
| public         | generate_customer_quotation_number | CREATE OR REPLACE FUNCTION public.generate_customer_quotation_number()
 RETURNS character varying
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
DECLARE
    v_year INTEGER;
    v_month INTEGER;
    v_seq INTEGER;
    v_number VARCHAR(50);
BEGIN
    v_year := EXTRACT(YEAR FROM CURRENT_DATE);
    v_month := EXTRACT(MONTH FROM CURRENT_DATE);

    -- Get or create sequence
    INSERT INTO public.customer_quotation_sequences (year, month, last_sequence)
    VALUES (v_year, v_month, 1)
    ON CONFLICT (year, month)
    DO UPDATE SET last_sequence = customer_quotation_sequences.last_sequence + 1
    RETURNING last_sequence INTO v_seq;

    -- Format: QUO-YYYYMM-XXXX
    v_number := 'QUO-' || v_year::TEXT || LPAD(v_month::TEXT, 2, '0') || '-' || LPAD(v_seq::TEXT, 4, '0');

    RETURN v_number;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
| public         | generate_lead_id                   | CREATE OR REPLACE FUNCTION public.generate_lead_id()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  IF NEW.lead_id IS NULL THEN
    NEW.lead_id := 'LEAD' || TO_CHAR(NOW(), 'YYYYMMDD') || UPPER(SUBSTRING(MD5(RANDOM()::TEXT) FROM 1 FOR 6));
  END IF;

  -- Generate dedupe_key
  IF NEW.dedupe_key IS NULL THEN
    NEW.dedupe_key := LOWER(TRIM(COALESCE(NEW.company_name, ''))) || '-' ||
                      COALESCE(LOWER(TRIM(NEW.contact_email)), LOWER(TRIM(NEW.contact_phone)), '');
  END IF;

  RETURN NEW;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| public         | generate_opportunity_id            | CREATE OR REPLACE FUNCTION public.generate_opportunity_id()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  IF NEW.opportunity_id IS NULL THEN
    NEW.opportunity_id := 'OPP' || TO_CHAR(NOW(), 'YYYYMMDD') || UPPER(SUBSTRING(MD5(RANDOM()::TEXT) FROM 1 FOR 6));
  END IF;
  RETURN NEW;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| public         | generate_pipeline_update_id        | CREATE OR REPLACE FUNCTION public.generate_pipeline_update_id()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  IF NEW.update_id IS NULL THEN
    NEW.update_id := 'PU' || TO_CHAR(NOW(), 'YYYYMMDD') || UPPER(SUBSTRING(MD5(RANDOM()::TEXT) FROM 1 FOR 8));
  END IF;
  RETURN NEW;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
| public         | generate_sales_plan_id             | CREATE OR REPLACE FUNCTION public.generate_sales_plan_id()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  IF NEW.plan_id IS NULL THEN
    NEW.plan_id := 'SP' || TO_CHAR(NOW(), 'YYYYMMDD') || UPPER(SUBSTRING(MD5(RANDOM()::TEXT) FROM 1 FOR 8));
  END IF;
  RETURN NEW;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
| public         | generate_shipment_detail_id        | CREATE OR REPLACE FUNCTION public.generate_shipment_detail_id()
 RETURNS trigger
 LANGUAGE plpgsql
AS $function$
BEGIN
  IF NEW.shipment_detail_id IS NULL THEN
    NEW.shipment_detail_id := 'SHIP' || TO_CHAR(NOW(), 'YYYYMMDD') || UPPER(SUBSTRING(MD5(RANDOM()::TEXT) FROM 1 FOR 6));
  END IF;

  -- Auto-calculate weight_total_kg
  IF NEW.quantity IS NOT NULL AND NEW.weight_per_unit_kg IS NOT NULL THEN
    NEW.weight_total_kg := NEW.quantity * NEW.weight_per_unit_kg;
  END IF;

  -- Auto-calculate volume_total_cbm (length x width x height x quantity in CBM)
  IF NEW.length_cm IS NOT NULL AND NEW.width_cm IS NOT NULL AND NEW.height_cm IS NOT NULL AND NEW.quantity IS NOT NULL THEN
    NEW.volume_total_cbm := (NEW.length_cm * NEW.width_cm * NEW.height_cm * NEW.quantity) / 1000000;
  END IF;

  RETURN NEW;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| public         | generate_ticket_code               | CREATE OR REPLACE FUNCTION public.generate_ticket_code(p_ticket_type ticket_type, p_department ticketing_department)
 RETURNS character varying
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
DECLARE
    v_date_key VARCHAR(6);
    v_sequence INTEGER;
    v_ticket_code VARCHAR(20);
BEGIN
    -- Generate date key in ddmmyy format
    v_date_key := TO_CHAR(CURRENT_DATE, 'DDMMYY');

    -- Lock and get/increment sequence atomically
    INSERT INTO public.ticket_sequences (ticket_type, department, date_key, last_sequence)
    VALUES (p_ticket_type, p_department, v_date_key, 1)
    ON CONFLICT (ticket_type, department, date_key)
    DO UPDATE SET
        last_sequence = public.ticket_sequences.last_sequence + 1,
        updated_at = NOW()
    RETURNING last_sequence INTO v_sequence;

    -- Generate ticket code: TYPE + DEPT + DDMMYY + XXX (3-digit sequence)
    v_ticket_code := p_ticket_type::TEXT || p_department::TEXT || v_date_key || LPAD(v_sequence::TEXT, 3, '0');

    RETURN v_ticket_code;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
| public         | generate_ticket_quote_number       | CREATE OR REPLACE FUNCTION public.generate_ticket_quote_number(p_ticket_id uuid)
 RETURNS character varying
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
DECLARE
    v_ticket_code VARCHAR(20);
    v_quote_count INTEGER;
    v_quote_number VARCHAR(30);
BEGIN
    -- Get ticket code
    SELECT ticket_code INTO v_ticket_code
    FROM public.tickets
    WHERE id = p_ticket_id;

    IF v_ticket_code IS NULL THEN
        RAISE EXCEPTION 'Ticket not found: %', p_ticket_id;
    END IF;

    -- Count existing quotes for this ticket
    SELECT COUNT(*) + 1 INTO v_quote_count
    FROM public.ticket_rate_quotes
    WHERE ticket_id = p_ticket_id;

    -- Generate quote number
    v_quote_number := 'QT-' || v_ticket_code || '-' || LPAD(v_quote_count::TEXT, 3, '0');

    RETURN v_quote_number;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
| public         | get_account_pipeline_summary       | CREATE OR REPLACE FUNCTION public.get_account_pipeline_summary(p_account_id uuid)
 RETURNS jsonb
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
DECLARE
    v_result JSONB;
BEGIN
    SELECT jsonb_build_object(
        'total_estimated_value', COALESCE(SUM(estimated_value), 0),
        'total_deal_value', COALESCE(SUM(deal_value), 0),
        'open_opportunities', COUNT(*) FILTER (WHERE stage NOT IN ('Closed Won', 'Closed Lost')),
        'won_opportunities', COUNT(*) FILTER (WHERE stage = 'Closed Won'),
        'lost_opportunities', COUNT(*) FILTER (WHERE stage = 'Closed Lost')
    )
    INTO v_result
    FROM public.opportunities
    WHERE account_id = p_account_id;

    RETURN v_result;
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
| public         | get_entity_quotation_stats         | CREATE OR REPLACE FUNCTION public.get_entity_quotation_stats(p_lead_id text DEFAULT NULL::text, p_opportunity_id text DEFAULT NULL::text, p_ticket_id uuid DEFAULT NULL::uuid)
 RETURNS jsonb
 LANGUAGE plpgsql
 SECURITY DEFINER
AS $function$
DECLARE
    v_stats RECORD;
BEGIN
    SELECT
        COUNT(*) AS total_quotations,
        COUNT(*) FILTER (WHERE status = 'draft') AS draft_count,
        COUNT(*) FILTER (WHERE status = 'sent') AS sent_count,
        COUNT(*) FILTER (WHERE status = 'accepted') AS accepted_count,
        COUNT(*) FILTER (WHERE status = 'rejected') AS rejected_count,
        COALESCE(SUM(total_selling_rate) FILTER (WHERE status = 'accepted'), 0) AS total_accepted_value,
        MAX(sequence_number) AS latest_sequence,
        MAX(created_at) AS latest_quotation_at
    INTO v_stats
    FROM public.customer_quotations
    WHERE
        (p_lead_id IS NULL OR lead_id = p_lead_id)
        AND (p_opportunity_id IS NULL OR opportunity_id = p_opportunity_id)
        AND (p_ticket_id IS NULL OR ticket_id = p_ticket_id)
        AND (p_lead_id IS NOT NULL OR p_opportunity_id IS NOT NULL OR p_ticket_id IS NOT NULL);

    RETURN jsonb_build_object(
        'total_quotations', v_stats.total_quotations,
        'draft_count', v_stats.draft_count,
        'sent_count', v_stats.sent_count,
        'accepted_count', v_stats.accepted_count,
        'rejected_count', v_stats.rejected_count,
        'total_accepted_value', v_stats.total_accepted_value,
        'latest_sequence', v_stats.latest_sequence,
        'latest_sequence_label', public.get_quotation_sequence_label(v_stats.latest_sequence),
        'latest_quotation_at', v_stats.latest_quotation_at
    );
END;
$function$
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |



DATA ENUM
| schema_name | enum_type                              | enum_labels                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | formatted_type                         | owner                  |
| ----------- | -------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------- | ---------------------- |
| auth        | aal_level                              | {aal1,aal2,aal3}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | auth.aal_level                         | supabase_auth_admin    |
| auth        | code_challenge_method                  | {s256,plain}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | auth.code_challenge_method             | supabase_auth_admin    |
| auth        | factor_status                          | {unverified,verified}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | auth.factor_status                     | supabase_auth_admin    |
| auth        | factor_type                            | {totp,webauthn,phone}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | auth.factor_type                       | supabase_auth_admin    |
| auth        | oauth_authorization_status             | {pending,approved,denied,expired}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | auth.oauth_authorization_status        | supabase_auth_admin    |
| auth        | oauth_client_type                      | {public,confidential}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | auth.oauth_client_type                 | supabase_auth_admin    |
| auth        | oauth_registration_type                | {dynamic,manual}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | auth.oauth_registration_type           | supabase_auth_admin    |
| auth        | oauth_response_type                    | {code}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | auth.oauth_response_type               | supabase_auth_admin    |
| auth        | one_time_token_type                    | {confirmation_token,reauthentication_token,recovery_token,email_change_token_new,email_change_token_current,phone_change_token}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | auth.one_time_token_type               | supabase_auth_admin    |
| public      | account_activity_status                | {Active,Passive,Inactive}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | account_activity_status                | postgres               |
| public      | account_status                         | {calon_account,new_account,failed_account,active_account,passive_account,lost_account}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | account_status                         | postgres               |
| public      | account_tenure_status                  | {Prospect,"New Customer","Active Customer","Winback Target"}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | account_tenure_status                  | postgres               |
| public      | activity_status                        | {Planned,Done,Completed,Cancelled}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | activity_status                        | postgres               |
| public      | activity_type_v2                       | {Call,Email,Meeting,Task,Note,"Follow Up","Site Visit",Proposal,"Contract Review","Online Meeting","Phone Call",Texting}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | activity_type_v2                       | postgres               |
| public      | additional_service                     | {Loading,Unloading,Handling,Packing,Wrapping,Labeling,Palletizing,Fumigation,Insurance,"Customs Documentation","Warehouse Storage","Cross Docking","Door to Door","Express Delivery","Temperature Controlled","Hazmat Handling",Lashing,Inspection,Repacking,Assembly}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | additional_service                     | postgres               |
| public      | approach_method                        | {Call,Email,Meeting,"Site Visit",WhatsApp,Proposal,"Contract Review","Online Meeting","Phone Call",Texting}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | approach_method                        | postgres               |
| public      | cadence_enrollment_status              | {Active,Paused,Completed,Stopped}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | cadence_enrollment_status              | postgres               |
| public      | cargo_category                         | {"General Cargo","Dangerous Goods"}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | cargo_category                         | postgres               |
| public      | crm_email_notification_type            | {new_lead_assignment,unclaimed_lead_reminder,pipeline_due_date_reminder,overdue_pipeline_reminder,sales_inactivity_reminder,weekly_performance_summary}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | crm_email_notification_type            | postgres               |
| public      | customer_quotation_status              | {draft,sent,accepted,rejected,expired,revoked}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | customer_quotation_status              | postgres               |
| public      | department_owner                       | {"Domestics Operations","Exim Operations","Import DTD Operations"}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | department_owner                       | postgres               |
| public      | email_status                           | {pending,sent,failed,skipped}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | email_status                           | postgres               |
| public      | fleet_type                             | {Blindvan,Pickup,"CDE Box","CDE Bak","CDD Box","CDD Bak","CDD Long","CDD Refer","Fuso Box","Fuso Bak",TWB,"Trailer 20 Feet","Trailer 40 Feet",Flatbed,Lainnya}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | fleet_type                             | postgres               |
| public      | import_batch_status                    | {pending,processing,completed,failed}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | import_batch_status                    | postgres               |
| public      | incoterm                               | {EXW,FCA,CPT,CIP,DAP,DPU,DDP,FAS,FOB,CFR,CIF}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | incoterm                               | postgres               |
| public      | lead_claim_status                      | {unclaimed,claimed}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | lead_claim_status                      | postgres               |
| public      | lead_status                            | {New,Contacted,Qualified,Proposal,Negotiation,"Closed Won","Closed Lost"}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | lead_status                            | postgres               |
| public      | lead_triage_status                     | {New,"In Review",Qualified,Nurture,Disqualified,"Assigned to Sales","Handed Over","Assign to Sales"}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | lead_triage_status                     | postgres               |
| public      | lost_reason                            | {harga_tidak_masuk,kompetitor_lebih_murah,budget_tidak_cukup,timing_tidak_tepat,tidak_ada_kebutuhan,kompetitor_lebih_baik,service_tidak_sesuai,lokasi_tidak_terjangkau,lainnya}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | lost_reason                            | postgres               |
| public      | operational_cost_rejection_reason_type | {harga_terlalu_tinggi,margin_tidak_mencukupi,vendor_tidak_sesuai,waktu_tidak_sesuai,perlu_revisi,other,tarif_tidak_masuk,kompetitor_lebih_murah,budget_customer_tidak_cukup}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | operational_cost_rejection_reason_type | postgres               |
| public      | opportunity_stage                      | {Prospecting,Discovery,"Quote Sent",Negotiation,"Closed Won","Closed Lost","On Hold"}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | opportunity_stage                      | postgres               |
| public      | potential_status                       | {pending,potential,not_potential}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | potential_status                       | postgres               |
| public      | quotation_rejection_reason_type        | {tarif_tidak_masuk,kompetitor_lebih_murah,budget_customer_tidak_cukup,service_tidak_sesuai,waktu_tidak_sesuai,other}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | quotation_rejection_reason_type        | postgres               |
| public      | quote_status                           | {draft,sent,accepted,rejected,sent_to_customer,won,revise_requested,submitted}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | quote_status                           | postgres               |
| public      | rate_component_type                    | {freight_charge,trucking_origin,trucking_destination,sea_freight,air_freight,rail_freight,barge_freight,interisland_freight,thc_origin,thc_destination,terminal_handling,wharfage,port_charges,container_seal,customs_clearance,customs_broker_fee,import_duty,vat_ppn,pph_import,quarantine_fee,fumigation,certificate_of_origin,legalization_fee,handling_charge,loading_unloading,forklift_charge,warehouse_storage,stuffing_unstuffing,palletization,wrapping_packing,labeling,cargo_insurance,marine_insurance,security_charge,container_rental,container_cleaning,container_repair,demurrage,detention,reefer_plug_in,documentation_fee,bill_of_lading_fee,telex_release,manifest_fee,admin_fee,communication_fee,dangerous_goods_surcharge,overweight_surcharge,oversized_surcharge,lift_on_lift_off,surveyor_fee,sampling_fee,inspection_fee,fuel_surcharge,currency_adjustment_factor,peak_season_surcharge,congestion_surcharge,low_sulphur_surcharge,war_risk_surcharge,piracy_surcharge,other,trucking_door_to_door,local_delivery,pickup_charge,first_mile,last_mile,cross_docking,transshipment,express_delivery,same_day_delivery,doc_fee_origin,doc_fee_destination,isps_fee,container_tracking,equipment_handover,gate_in_out,ams_fee,ens_fee,vgm_fee,chassis_fee,customs_clearance_import,customs_clearance_export,export_duty,ppn_import,pph_23,peb_fee,pib_fee,ls_lartas,sni_fee,bpom_fee,health_certificate,phytosanitary,halal_certificate,notul_fee,pnbp_bea_cukai,loading_charge,unloading_charge,crane_charge,reach_stacker,storage_origin,storage_destination,stuffing,unstuffing,strapping,shrink_wrap,crating,repackaging,segregation,sorting,lashing,unlashing,dunnage,tally_service,inventory_management,pick_and_pack,kitting,return_handling,all_risk_insurance,transit_insurance,escort_service,security_seal,gps_tracking,demurrage_detention,reefer_monitoring,genset_rental,pallet_rental,crate_rental,container_deposit,equipment_return,flexi_bag,iso_tank,flat_rack,open_top,airway_bill_fee,seaway_bill,courier_fee,original_doc_fee,amendment_fee,switch_bl,letter_of_credit,banking_charge,translation_fee,notary_fee,hazmat_handling,overlength_surcharge,overheight_surcharge,overwidth_surcharge,roll_on_roll_off,pre_shipment_inspection,temperature_controlled,cold_chain,pharma_handling,special_equipment,waiting_time,overnight_charge,weekend_surcharge,holiday_surcharge,rush_order,project_cargo,breakbulk,heavy_lift,bunker_adjustment_factor,port_congestion,imo_2020,emergency_bunker_surcharge,general_rate_increase,carrier_security_fee,clean_truck_fee,remote_area_surcharge,residential_surcharge,toll_fee,highway_fee,fulfillment_fee,order_processing,value_added_service,gift_wrapping,insert_packing,cod_handling,cod_remittance,reverse_logistics,rts_return_to_sender,address_correction,redelivery,proof_of_delivery,signature_required,miscellaneous} | rate_component_type                    | postgres               |
| public      | rate_structure_type                    | {bundling,breakdown}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | rate_structure_type                    | postgres               |
| public      | response_owner                         | {creator,assignee}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | response_owner                         | postgres               |
| public      | sales_plan_type                        | {maintenance_existing,hunting_new,winback_lost}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | sales_plan_type                        | postgres               |
| public      | service_type                           | {LTL,FTL,AF,LCL,FCL,WAREHOUSING,FULFILLMENT,"LCL Export","FCL Export","Airfreight Export","LCL Import","FCL Import","Airfreight Import","Customs Clearance","LCL DTD","FCL DTD","Airfreight DTD"}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | service_type                           | postgres               |
| public      | ticket_close_outcome                   | {won,lost}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | ticket_close_outcome                   | postgres               |
| public      | ticket_event_type                      | {created,assigned,reassigned,status_changed,priority_changed,comment_added,attachment_added,quote_created,quote_sent,resolved,closed,reopened,quote_sent_to_customer,customer_quotation_created,customer_quotation_sent,customer_quotation_accepted,customer_quotation_rejected,request_adjustment,cost_sent}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              | ticket_event_type                      | postgres               |
| public      | ticket_priority                        | {low,medium,high,urgent}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | ticket_priority                        | postgres               |
| public      | ticket_status                          | {open,need_response,in_progress,waiting_customer,need_adjustment,pending,resolved,closed}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | ticket_status                          | postgres               |
| public      | ticket_type                            | {RFQ,GEN}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | ticket_type                            | postgres               |
| public      | ticketing_department                   | {MKT,SAL,DOM,EXI,DTD,TRF}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | ticketing_department                   | postgres               |
| public      | unit_of_measure                        | {Boxes,Drum,"Wood Package",Pallet,Carton,Bag,Bundle,Roll,Piece,Crate,Container,Sack,Tank,Cylinder,Other}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | unit_of_measure                        | postgres               |
| public      | user_role                              | {Director,"super admin","Marketing Manager",Marcomm,DGO,MACX,VSDO,"sales manager",salesperson,"sales support","EXIM Ops","domestics Ops","Import DTD Ops","traffic & warehous",finance}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | user_role                              | postgres               |
| realtime    | action                                 | {INSERT,UPDATE,DELETE,TRUNCATE,ERROR}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | realtime.action                        | supabase_admin         |
| realtime    | equality_op                            | {eq,neq,lt,lte,gt,gte,in}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | realtime.equality_op                   | supabase_admin         |
| storage     | buckettype                             | {STANDARD,ANALYTICS,VECTOR}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | storage.buckettype                     | supabase_storage_admin |


DATA EXTENSIONS
| extension_name               | description                                                                                                                                                                                                                                               | default_version                                | installed_version |
| ---------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------- | ----------------- |
| address_standardizer         | Used to parse an address into constituent elements. Generally used to support geocoding address normalization step.                                                                                                                                       | 3.3.7                                          | null              |
| address_standardizer_data_us | Address Standardizer US dataset example                                                                                                                                                                                                                   | 3.3.7                                          | null              |
| amcheck                      | functions for verifying relation integrity                                                                                                                                                                                                                | 1.4                                            | null              |
| autoinc                      | functions for autoincrementing fields                                                                                                                                                                                                                     | 1.0                                            | null              |
| bloom                        | bloom access method - signature file based index                                                                                                                                                                                                          | 1.0                                            | null              |
| btree_gin                    | support for indexing common datatypes in GIN                                                                                                                                                                                                              | 1.3                                            | null              |
| btree_gist                   | support for indexing common datatypes in GiST                                                                                                                                                                                                             | 1.7                                            | null              |
| citext                       | data type for case-insensitive character strings                                                                                                                                                                                                          | 1.6                                            | null              |
| cube                         | data type for multidimensional cubes                                                                                                                                                                                                                      | 1.5                                            | null              |
| dblink                       | connect to other PostgreSQL databases from within a database                                                                                                                                                                                              | 1.2                                            | null              |
| dict_int                     | text search dictionary template for integers                                                                                                                                                                                                              | 1.0                                            | null              |
| dict_xsyn                    | text search dictionary template for extended synonym processing                                                                                                                                                                                           | 1.0                                            | null              |
| earthdistance                | calculate great-circle distances on the surface of the Earth                                                                                                                                                                                              | 1.2                                            | null              |
| file_fdw                     | foreign-data wrapper for flat file access                                                                                                                                                                                                                 | 1.0                                            | null              |
| fuzzystrmatch                | determine similarities and distance between strings                                                                                                                                                                                                       | 1.2                                            | null              |
| hstore                       | data type for storing sets of (key, value) pairs                                                                                                                                                                                                          | 1.8                                            | null              |
| http                         | HTTP client for PostgreSQL, allows web page retrieval inside the database.                                                                                                                                                                                | 1.6                                            | null              |
| hypopg                       | Hypothetical indexes for PostgreSQL                                                                                                                                                                                                                       | 1.4.1                                          | null              |
| index_advisor                | Query index advisor                                                                                                                                                                                                                                       | 0.2.0                                          | null              |
| insert_username              | functions for tracking who changed a table                                                                                                                                                                                                                | 1.0                                            | null              |
| intagg                       | integer aggregator and enumerator (obsolete)                                                                                                                                                                                                              | 1.1                                            | null              |
| intarray                     | functions, operators, and index support for 1-D arrays of integers                                                                                                                                                                                        | 1.5                                            | null              |
| isn                          | data types for international product numbering standards                                                                                                                                                                                                  | 1.2                                            | null              |
| lo                           | Large Object maintenance                                                                                                                                                                                                                                  | 1.1                                            | null              |
| ltree                        | data type for hierarchical tree-like structures                                                                                                                                                                                                           | 1.3                                            | null              |
| moddatetime                  | functions for tracking last modification time                                                                                                                                                                                                             | 1.0                                            | null              |
| pageinspect                  | inspect the contents of database pages at a low level                                                                                                                                                                                                     | 1.12                                           | null              |
| pg_buffercache               | examine the shared buffer cache                                                                                                                                                                                                                           | 1.5                                            | null              |
| pg_cron                      | Job scheduler for PostgreSQL                                                                                                                                                                                                                              | 1.6.4                                          | null              |
| pg_freespacemap              | examine the free space map (FSM)                                                                                                                                                                                                                          | 1.2                                            | null              |
| pg_graphql                   | pg_graphql: GraphQL support                                                                                                                                                                                                                               | 1.5.11                                         | 1.5.11            |
| pg_hashids                   | pg_hashids                                                                                                                                                                                                                                                | 1.3.0-cd0e1b31d52b394a0df64079406a14a4f7387cd6 | null              |
| pg_jsonschema                | pg_jsonschema                                                                                                                                                                                                                                             | 0.3.3                                          | null              |
| pg_net                       | Async HTTP                                                                                                                                                                                                                                                | 0.19.5                                         | null              |
| pg_partman                   | Extension to manage partitioned tables by time or ID                                                                                                                                                                                                      | 5.3.1                                          | null              |
| pg_prewarm                   | prewarm relation data                                                                                                                                                                                                                                     | 1.2                                            | null              |
| pg_repack                    | Reorganize tables in PostgreSQL databases with minimal locks                                                                                                                                                                                              | 1.5.2                                          | null              |
| pg_stat_monitor              | The pg_stat_monitor is a PostgreSQL Query Performance Monitoring tool, based on PostgreSQL contrib module pg_stat_statements. pg_stat_monitor provides aggregated statistics, client information, plan details including plan, and histogram information. | 2.1                                            | null              |
| pg_stat_statements           | track planning and execution statistics of all SQL statements executed                                                                                                                                                                                    | 1.11                                           | 1.11              |
| pg_surgery                   | extension to perform surgery on a damaged relation                                                                                                                                                                                                        | 1.0                                            | null              |
| pg_tle                       | Trusted Language Extensions for PostgreSQL                                                                                                                                                                                                                | 1.4.0                                          | null              |
| pg_trgm                      | text similarity measurement and index searching based on trigrams                                                                                                                                                                                         | 1.6                                            | null              |
| pg_visibility                | examine the visibility map (VM) and page-level visibility info                                                                                                                                                                                            | 1.2                                            | null              |
| pg_walinspect                | functions to inspect contents of PostgreSQL Write-Ahead Log                                                                                                                                                                                               | 1.1                                            | null              |
| pgaudit                      | provides auditing functionality                                                                                                                                                                                                                           | 17.1                                           | null              |
| pgcrypto                     | cryptographic functions                                                                                                                                                                                                                                   | 1.3                                            | 1.3               |
| pgjwt                        | JSON Web Token API for Postgresql                                                                                                                                                                                                                         | 0.2.0                                          | null              |
| pgmq                         | A lightweight message queue. Like AWS SQS and RSMQ but on Postgres.                                                                                                                                                                                       | 1.5.1                                          | null              |
| pgroonga                     | Super fast and all languages supported full text search index based on Groonga                                                                                                                                                                            | 3.2.5                                          | null              |
| pgroonga_database            | PGroonga database management module                                                                                                                                                                                                                       | 3.2.5                                          | null              |
| pgrouting                    | pgRouting Extension                                                                                                                                                                                                                                       | 3.4.1                                          | null              |
| pgrowlocks                   | show row-level locking information                                                                                                                                                                                                                        | 1.2                                            | null              |
| pgsodium                     | Postgres extension for libsodium functions                                                                                                                                                                                                                | 3.1.8                                          | null              |
| pgstattuple                  | show tuple-level statistics                                                                                                                                                                                                                               | 1.5                                            | null              |
| pgtap                        | Unit testing for PostgreSQL                                                                                                                                                                                                                               | 1.2.0                                          | null              |
| plpgsql                      | PL/pgSQL procedural language                                                                                                                                                                                                                              | 1.0                                            | 1.0               |
| plpgsql_check                | extended check for plpgsql functions                                                                                                                                                                                                                      | 2.7                                            | null              |
| postgis                      | PostGIS geometry and geography spatial types and functions                                                                                                                                                                                                | 3.3.7                                          | null              |
| postgis_raster               | PostGIS raster types and functions                                                                                                                                                                                                                        | 3.3.7                                          | null              |
| postgis_sfcgal               | PostGIS SFCGAL functions                                                                                                                                                                                                                                  | 3.3.7                                          | null              |
| postgis_tiger_geocoder       | PostGIS tiger geocoder and reverse geocoder                                                                                                                                                                                                               | 3.3.7                                          | null              |
| postgis_topology             | PostGIS topology spatial types and functions                                                                                                                                                                                                              | 3.3.7                                          | null              |
| postgres_fdw                 | foreign-data wrapper for remote PostgreSQL servers                                                                                                                                                                                                        | 1.1                                            | null              |
| refint                       | functions for implementing referential integrity (obsolete)                                                                                                                                                                                               | 1.0                                            | null              |
| rum                          | RUM index access method                                                                                                                                                                                                                                   | 1.3                                            | null              |
| seg                          | data type for representing line segments or floating-point intervals                                                                                                                                                                                      | 1.4                                            | null              |
| sslinfo                      | information about SSL certificates                                                                                                                                                                                                                        | 1.2                                            | null              |
| supabase_vault               | Supabase Vault Extension                                                                                                                                                                                                                                  | 0.3.1                                          | 0.3.1             |
| tablefunc                    | functions that manipulate whole tables, including crosstab                                                                                                                                                                                                | 1.0                                            | null              |
| tcn                          | Triggered change notifications                                                                                                                                                                                                                            | 1.0                                            | null              |
| tsm_system_rows              | TABLESAMPLE method which accepts number of rows as a limit                                                                                                                                                                                                | 1.0                                            | null              |
| tsm_system_time              | TABLESAMPLE method which accepts time in milliseconds as a limit                                                                                                                                                                                          | 1.0                                            | null              |
| unaccent                     | text search dictionary that removes accents                                                                                                                                                                                                               | 1.1                                            | null              |
| uuid-ossp                    | generate universally unique identifiers (UUIDs)                                                                                                                                                                                                           | 1.1                                            | 1.1               |
| vector                       | vector data type and ivfflat and hnsw access methods                                                                                                                                                                                                      | 0.8.0                                          | null              |
| wal2json                     | null                                                                                                                                                                                                                                                      | 2.6                                            | null              |
| wrappers                     | Foreign data wrappers developed by Supabase                                                                                                                                                                                                               | 0.5.7                                          | null              |
| xml2                         | XPath querying and XSLT                                                                                                                                                                                                                                   | 1.1                                            | null              |


DATA INDEXES
| schema_name | table_name               | index_name                                           | is_unique | is_primary | index_method | index_definition                                                                                                                                                          | predicate                                                 | expressions          | indexed_columns                          | index_scans |
| ----------- | ------------------------ | ---------------------------------------------------- | --------- | ---------- | ------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------- | -------------------- | ---------------------------------------- | ----------- |
| auth        | audit_log_entries        | audit_logs_instance_id_idx                           | false     | false      | btree        | CREATE INDEX audit_logs_instance_id_idx ON auth.audit_log_entries USING btree (instance_id)                                                                               | null                                                      | null                 | instance_id                              | 0           |
| auth        | flow_state               | flow_state_created_at_idx                            | false     | false      | btree        | CREATE INDEX flow_state_created_at_idx ON auth.flow_state USING btree (created_at DESC)                                                                                   | null                                                      | null                 | created_at                               | 0           |
| auth        | flow_state               | idx_auth_code                                        | false     | false      | btree        | CREATE INDEX idx_auth_code ON auth.flow_state USING btree (auth_code)                                                                                                     | null                                                      | null                 | auth_code                                | 0           |
| auth        | flow_state               | idx_user_id_auth_method                              | false     | false      | btree        | CREATE INDEX idx_user_id_auth_method ON auth.flow_state USING btree (user_id, authentication_method)                                                                      | null                                                      | null                 | user_id, authentication_method           | 0           |
| auth        | identities               | identities_email_idx                                 | false     | false      | btree        | CREATE INDEX identities_email_idx ON auth.identities USING btree (email text_pattern_ops)                                                                                 | null                                                      | null                 | email                                    | 16          |
| auth        | identities               | identities_provider_id_provider_unique               | true      | false      | btree        | CREATE UNIQUE INDEX identities_provider_id_provider_unique ON auth.identities USING btree (provider_id, provider)                                                         | null                                                      | null                 | provider_id, provider                    | 0           |
| auth        | identities               | identities_user_id_idx                               | false     | false      | btree        | CREATE INDEX identities_user_id_idx ON auth.identities USING btree (user_id)                                                                                              | null                                                      | null                 | user_id                                  | 14214       |
| auth        | mfa_amr_claims           | mfa_amr_claims_session_id_authentication_method_pkey | true      | false      | btree        | CREATE UNIQUE INDEX mfa_amr_claims_session_id_authentication_method_pkey ON auth.mfa_amr_claims USING btree (session_id, authentication_method)                           | null                                                      | null                 | session_id, authentication_method        | 4839        |
| auth        | mfa_challenges           | mfa_challenge_created_at_idx                         | false     | false      | btree        | CREATE INDEX mfa_challenge_created_at_idx ON auth.mfa_challenges USING btree (created_at DESC)                                                                            | null                                                      | null                 | created_at                               | 0           |
| auth        | mfa_factors              | factor_id_created_at_idx                             | false     | false      | btree        | CREATE INDEX factor_id_created_at_idx ON auth.mfa_factors USING btree (user_id, created_at)                                                                               | null                                                      | null                 | user_id, created_at                      | 0           |
| auth        | mfa_factors              | mfa_factors_last_challenged_at_key                   | true      | false      | btree        | CREATE UNIQUE INDEX mfa_factors_last_challenged_at_key ON auth.mfa_factors USING btree (last_challenged_at)                                                               | null                                                      | null                 | last_challenged_at                       | 0           |
| auth        | mfa_factors              | mfa_factors_user_friendly_name_unique                | true      | false      | btree        | CREATE UNIQUE INDEX mfa_factors_user_friendly_name_unique ON auth.mfa_factors USING btree (friendly_name, user_id) WHERE (TRIM(BOTH FROM friendly_name) <> ''::text)      | (TRIM(BOTH FROM friendly_name) <> ''::text)               | null                 | friendly_name, user_id                   | 0           |
| auth        | mfa_factors              | mfa_factors_user_id_idx                              | false     | false      | btree        | CREATE INDEX mfa_factors_user_id_idx ON auth.mfa_factors USING btree (user_id)                                                                                            | null                                                      | null                 | user_id                                  | 0           |
| auth        | mfa_factors              | unique_phone_factor_per_user                         | true      | false      | btree        | CREATE UNIQUE INDEX unique_phone_factor_per_user ON auth.mfa_factors USING btree (user_id, phone)                                                                         | null                                                      | null                 | user_id, phone                           | 14018       |
| auth        | oauth_authorizations     | oauth_auth_pending_exp_idx                           | false     | false      | btree        | CREATE INDEX oauth_auth_pending_exp_idx ON auth.oauth_authorizations USING btree (expires_at) WHERE (status = 'pending'::auth.oauth_authorization_status)                 | (status = 'pending'::auth.oauth_authorization_status)     | null                 | expires_at                               | 0           |
| auth        | oauth_authorizations     | oauth_authorizations_authorization_code_key          | true      | false      | btree        | CREATE UNIQUE INDEX oauth_authorizations_authorization_code_key ON auth.oauth_authorizations USING btree (authorization_code)                                             | null                                                      | null                 | authorization_code                       | 0           |
| auth        | oauth_authorizations     | oauth_authorizations_authorization_id_key            | true      | false      | btree        | CREATE UNIQUE INDEX oauth_authorizations_authorization_id_key ON auth.oauth_authorizations USING btree (authorization_id)                                                 | null                                                      | null                 | authorization_id                         | 0           |
| auth        | oauth_client_states      | idx_oauth_client_states_created_at                   | false     | false      | btree        | CREATE INDEX idx_oauth_client_states_created_at ON auth.oauth_client_states USING btree (created_at)                                                                      | null                                                      | null                 | created_at                               | 0           |
| auth        | oauth_clients            | oauth_clients_deleted_at_idx                         | false     | false      | btree        | CREATE INDEX oauth_clients_deleted_at_idx ON auth.oauth_clients USING btree (deleted_at)                                                                                  | null                                                      | null                 | deleted_at                               | 0           |
| auth        | oauth_consents           | oauth_consents_active_client_idx                     | false     | false      | btree        | CREATE INDEX oauth_consents_active_client_idx ON auth.oauth_consents USING btree (client_id) WHERE (revoked_at IS NULL)                                                   | (revoked_at IS NULL)                                      | null                 | client_id                                | 0           |
| auth        | oauth_consents           | oauth_consents_active_user_client_idx                | false     | false      | btree        | CREATE INDEX oauth_consents_active_user_client_idx ON auth.oauth_consents USING btree (user_id, client_id) WHERE (revoked_at IS NULL)                                     | (revoked_at IS NULL)                                      | null                 | user_id, client_id                       | 0           |
| auth        | oauth_consents           | oauth_consents_user_client_unique                    | true      | false      | btree        | CREATE UNIQUE INDEX oauth_consents_user_client_unique ON auth.oauth_consents USING btree (user_id, client_id)                                                             | null                                                      | null                 | user_id, client_id                       | 0           |
| auth        | oauth_consents           | oauth_consents_user_order_idx                        | false     | false      | btree        | CREATE INDEX oauth_consents_user_order_idx ON auth.oauth_consents USING btree (user_id, granted_at DESC)                                                                  | null                                                      | null                 | user_id, granted_at                      | 0           |
| auth        | one_time_tokens          | one_time_tokens_relates_to_hash_idx                  | false     | false      | hash         | CREATE INDEX one_time_tokens_relates_to_hash_idx ON auth.one_time_tokens USING hash (relates_to)                                                                          | null                                                      | null                 | relates_to                               | 0           |
| auth        | one_time_tokens          | one_time_tokens_token_hash_hash_idx                  | false     | false      | hash         | CREATE INDEX one_time_tokens_token_hash_hash_idx ON auth.one_time_tokens USING hash (token_hash)                                                                          | null                                                      | null                 | token_hash                               | 0           |
| auth        | one_time_tokens          | one_time_tokens_user_id_token_type_key               | true      | false      | btree        | CREATE UNIQUE INDEX one_time_tokens_user_id_token_type_key ON auth.one_time_tokens USING btree (user_id, token_type)                                                      | null                                                      | null                 | user_id, token_type                      | 15          |
| auth        | refresh_tokens           | refresh_tokens_instance_id_idx                       | false     | false      | btree        | CREATE INDEX refresh_tokens_instance_id_idx ON auth.refresh_tokens USING btree (instance_id)                                                                              | null                                                      | null                 | instance_id                              | 0           |
| auth        | refresh_tokens           | refresh_tokens_instance_id_user_id_idx               | false     | false      | btree        | CREATE INDEX refresh_tokens_instance_id_user_id_idx ON auth.refresh_tokens USING btree (instance_id, user_id)                                                             | null                                                      | null                 | instance_id, user_id                     | 0           |
| auth        | refresh_tokens           | refresh_tokens_parent_idx                            | false     | false      | btree        | CREATE INDEX refresh_tokens_parent_idx ON auth.refresh_tokens USING btree (parent)                                                                                        | null                                                      | null                 | parent                                   | 0           |
| auth        | refresh_tokens           | refresh_tokens_session_id_revoked_idx                | false     | false      | btree        | CREATE INDEX refresh_tokens_session_id_revoked_idx ON auth.refresh_tokens USING btree (session_id, revoked)                                                               | null                                                      | null                 | session_id, revoked                      | 13          |
| auth        | refresh_tokens           | refresh_tokens_token_unique                          | true      | false      | btree        | CREATE UNIQUE INDEX refresh_tokens_token_unique ON auth.refresh_tokens USING btree (token)                                                                                | null                                                      | null                 | token                                    | 59          |
| auth        | refresh_tokens           | refresh_tokens_updated_at_idx                        | false     | false      | btree        | CREATE INDEX refresh_tokens_updated_at_idx ON auth.refresh_tokens USING btree (updated_at DESC)                                                                           | null                                                      | null                 | updated_at                               | 0           |
| auth        | saml_providers           | saml_providers_entity_id_key                         | true      | false      | btree        | CREATE UNIQUE INDEX saml_providers_entity_id_key ON auth.saml_providers USING btree (entity_id)                                                                           | null                                                      | null                 | entity_id                                | 0           |
| auth        | saml_providers           | saml_providers_sso_provider_id_idx                   | false     | false      | btree        | CREATE INDEX saml_providers_sso_provider_id_idx ON auth.saml_providers USING btree (sso_provider_id)                                                                      | null                                                      | null                 | sso_provider_id                          | 0           |
| auth        | saml_relay_states        | saml_relay_states_created_at_idx                     | false     | false      | btree        | CREATE INDEX saml_relay_states_created_at_idx ON auth.saml_relay_states USING btree (created_at DESC)                                                                     | null                                                      | null                 | created_at                               | 0           |
| auth        | saml_relay_states        | saml_relay_states_for_email_idx                      | false     | false      | btree        | CREATE INDEX saml_relay_states_for_email_idx ON auth.saml_relay_states USING btree (for_email)                                                                            | null                                                      | null                 | for_email                                | 0           |
| auth        | saml_relay_states        | saml_relay_states_sso_provider_id_idx                | false     | false      | btree        | CREATE INDEX saml_relay_states_sso_provider_id_idx ON auth.saml_relay_states USING btree (sso_provider_id)                                                                | null                                                      | null                 | sso_provider_id                          | 0           |
| auth        | sessions                 | sessions_not_after_idx                               | false     | false      | btree        | CREATE INDEX sessions_not_after_idx ON auth.sessions USING btree (not_after DESC)                                                                                         | null                                                      | null                 | not_after                                | 0           |
| auth        | sessions                 | sessions_oauth_client_id_idx                         | false     | false      | btree        | CREATE INDEX sessions_oauth_client_id_idx ON auth.sessions USING btree (oauth_client_id)                                                                                  | null                                                      | null                 | oauth_client_id                          | 0           |
| auth        | sessions                 | sessions_user_id_idx                                 | false     | false      | btree        | CREATE INDEX sessions_user_id_idx ON auth.sessions USING btree (user_id)                                                                                                  | null                                                      | null                 | user_id                                  | 6           |
| auth        | sessions                 | user_id_created_at_idx                               | false     | false      | btree        | CREATE INDEX user_id_created_at_idx ON auth.sessions USING btree (user_id, created_at)                                                                                    | null                                                      | null                 | user_id, created_at                      | 0           |
| auth        | sso_domains              | sso_domains_domain_idx                               | true      | false      | btree        | CREATE UNIQUE INDEX sso_domains_domain_idx ON auth.sso_domains USING btree (lower(domain))                                                                                | null                                                      | lower(domain)        | lower(domain)                            | 0           |
| auth        | sso_domains              | sso_domains_sso_provider_id_idx                      | false     | false      | btree        | CREATE INDEX sso_domains_sso_provider_id_idx ON auth.sso_domains USING btree (sso_provider_id)                                                                            | null                                                      | null                 | sso_provider_id                          | 0           |
| auth        | sso_providers            | sso_providers_resource_id_idx                        | true      | false      | btree        | CREATE UNIQUE INDEX sso_providers_resource_id_idx ON auth.sso_providers USING btree (lower(resource_id))                                                                  | null                                                      | lower(resource_id)   | lower(resource_id)                       | 0           |
| auth        | sso_providers            | sso_providers_resource_id_pattern_idx                | false     | false      | btree        | CREATE INDEX sso_providers_resource_id_pattern_idx ON auth.sso_providers USING btree (resource_id text_pattern_ops)                                                       | null                                                      | null                 | resource_id                              | 0           |
| auth        | users                    | confirmation_token_idx                               | true      | false      | btree        | CREATE UNIQUE INDEX confirmation_token_idx ON auth.users USING btree (confirmation_token) WHERE ((confirmation_token)::text !~ '^[0-9 ]*$'::text)                         | ((confirmation_token)::text !~ '^[0-9 ]*$'::text)         | null                 | confirmation_token                       | 0           |
| auth        | users                    | email_change_token_current_idx                       | true      | false      | btree        | CREATE UNIQUE INDEX email_change_token_current_idx ON auth.users USING btree (email_change_token_current) WHERE ((email_change_token_current)::text !~ '^[0-9 ]*$'::text) | ((email_change_token_current)::text !~ '^[0-9 ]*$'::text) | null                 | email_change_token_current               | 0           |
| auth        | users                    | email_change_token_new_idx                           | true      | false      | btree        | CREATE UNIQUE INDEX email_change_token_new_idx ON auth.users USING btree (email_change_token_new) WHERE ((email_change_token_new)::text !~ '^[0-9 ]*$'::text)             | ((email_change_token_new)::text !~ '^[0-9 ]*$'::text)     | null                 | email_change_token_new                   | 0           |
| auth        | users                    | reauthentication_token_idx                           | true      | false      | btree        | CREATE UNIQUE INDEX reauthentication_token_idx ON auth.users USING btree (reauthentication_token) WHERE ((reauthentication_token)::text !~ '^[0-9 ]*$'::text)             | ((reauthentication_token)::text !~ '^[0-9 ]*$'::text)     | null                 | reauthentication_token                   | 0           |
| auth        | users                    | recovery_token_idx                                   | true      | false      | btree        | CREATE UNIQUE INDEX recovery_token_idx ON auth.users USING btree (recovery_token) WHERE ((recovery_token)::text !~ '^[0-9 ]*$'::text)                                     | ((recovery_token)::text !~ '^[0-9 ]*$'::text)             | null                 | recovery_token                           | 0           |
| auth        | users                    | users_email_partial_key                              | true      | false      | btree        | CREATE UNIQUE INDEX users_email_partial_key ON auth.users USING btree (email) WHERE (is_sso_user = false)                                                                 | (is_sso_user = false)                                     | null                 | email                                    | 0           |
| auth        | users                    | users_instance_id_email_idx                          | false     | false      | btree        | CREATE INDEX users_instance_id_email_idx ON auth.users USING btree (instance_id, lower((email)::text))                                                                    | null                                                      | lower((email)::text) | instance_id, lower(email::text)          | 33          |
| auth        | users                    | users_instance_id_idx                                | false     | false      | btree        | CREATE INDEX users_instance_id_idx ON auth.users USING btree (instance_id)                                                                                                | null                                                      | null                 | instance_id                              | 0           |
| auth        | users                    | users_is_anonymous_idx                               | false     | false      | btree        | CREATE INDEX users_is_anonymous_idx ON auth.users USING btree (is_anonymous)                                                                                              | null                                                      | null                 | is_anonymous                             | 0           |
| auth        | users                    | users_phone_key                                      | true      | false      | btree        | CREATE UNIQUE INDEX users_phone_key ON auth.users USING btree (phone)                                                                                                     | null                                                      | null                 | phone                                    | 0           |
| public      | accounts                 | accounts_dedupe_key_key                              | true      | false      | btree        | CREATE UNIQUE INDEX accounts_dedupe_key_key ON public.accounts USING btree (dedupe_key)                                                                                   | null                                                      | null                 | dedupe_key                               | 0           |
| public      | accounts                 | idx_accounts_activity                                | false     | false      | btree        | CREATE INDEX idx_accounts_activity ON public.accounts USING btree (activity_status)                                                                                       | null                                                      | null                 | activity_status                          | 0           |
| public      | accounts                 | idx_accounts_company                                 | false     | false      | btree        | CREATE INDEX idx_accounts_company ON public.accounts USING btree (company_name)                                                                                           | null                                                      | null                 | company_name                             | 66          |
| public      | accounts                 | idx_accounts_domain                                  | true      | false      | btree        | CREATE UNIQUE INDEX idx_accounts_domain ON public.accounts USING btree (domain) WHERE (domain IS NOT NULL)                                                                | (domain IS NOT NULL)                                      | null                 | domain                                   | 0           |
| public      | accounts                 | idx_accounts_first_transaction                       | false     | false      | btree        | CREATE INDEX idx_accounts_first_transaction ON public.accounts USING btree (first_transaction_date)                                                                       | null                                                      | null                 | first_transaction_date                   | 0           |
| public      | accounts                 | idx_accounts_last_transaction                        | false     | false      | btree        | CREATE INDEX idx_accounts_last_transaction ON public.accounts USING btree (last_transaction_date)                                                                         | null                                                      | null                 | last_transaction_date                    | 0           |
| public      | accounts                 | idx_accounts_npwp                                    | true      | false      | btree        | CREATE UNIQUE INDEX idx_accounts_npwp ON public.accounts USING btree (npwp) WHERE (npwp IS NOT NULL)                                                                      | (npwp IS NOT NULL)                                        | null                 | npwp                                     | 0           |
| public      | accounts                 | idx_accounts_original_creator                        | false     | false      | btree        | CREATE INDEX idx_accounts_original_creator ON public.accounts USING btree (original_creator_id)                                                                           | null                                                      | null                 | original_creator_id                      | 0           |
| public      | accounts                 | idx_accounts_owner                                   | false     | false      | btree        | CREATE INDEX idx_accounts_owner ON public.accounts USING btree (owner_user_id)                                                                                            | null                                                      | null                 | owner_user_id                            | 28          |
| public      | accounts                 | idx_accounts_retry_count                             | false     | false      | btree        | CREATE INDEX idx_accounts_retry_count ON public.accounts USING btree (retry_count) WHERE (retry_count > 0)                                                                | (retry_count > 0)                                         | null                 | retry_count                              | 0           |
| public      | accounts                 | idx_accounts_status                                  | false     | false      | btree        | CREATE INDEX idx_accounts_status ON public.accounts USING btree (account_status)                                                                                          | null                                                      | null                 | account_status                           | 0           |
| public      | accounts                 | idx_accounts_tenure                                  | false     | false      | btree        | CREATE INDEX idx_accounts_tenure ON public.accounts USING btree (tenure_status)                                                                                           | null                                                      | null                 | tenure_status                            | 0           |
| public      | activities               | idx_activities_account                               | false     | false      | btree        | CREATE INDEX idx_activities_account ON public.activities USING btree (related_account_id)                                                                                 | null                                                      | null                 | related_account_id                       | 10          |
| public      | activities               | idx_activities_cadence                               | false     | false      | btree        | CREATE INDEX idx_activities_cadence ON public.activities USING btree (cadence_enrollment_id)                                                                              | null                                                      | null                 | cadence_enrollment_id                    | 0           |
| public      | activities               | idx_activities_due_date                              | false     | false      | btree        | CREATE INDEX idx_activities_due_date ON public.activities USING btree (due_date)                                                                                          | null                                                      | null                 | due_date                                 | 0           |
| public      | activities               | idx_activities_lead                                  | false     | false      | btree        | CREATE INDEX idx_activities_lead ON public.activities USING btree (related_lead_id)                                                                                       | null                                                      | null                 | related_lead_id                          | 9           |
| public      | activities               | idx_activities_opp                                   | false     | false      | btree        | CREATE INDEX idx_activities_opp ON public.activities USING btree (related_opportunity_id)                                                                                 | null                                                      | null                 | related_opportunity_id                   | 0           |
| public      | activities               | idx_activities_owner                                 | false     | false      | btree        | CREATE INDEX idx_activities_owner ON public.activities USING btree (owner_user_id)                                                                                        | null                                                      | null                 | owner_user_id                            | 0           |
| public      | activities               | idx_activities_owner_due                             | false     | false      | btree        | CREATE INDEX idx_activities_owner_due ON public.activities USING btree (owner_user_id, due_date) WHERE (status = 'Planned'::activity_status)                              | (status = 'Planned'::activity_status)                     | null                 | owner_user_id, due_date                  | 128         |
| public      | activities               | idx_activities_owner_status                          | false     | false      | btree        | CREATE INDEX idx_activities_owner_status ON public.activities USING btree (owner_user_id, status)                                                                         | null                                                      | null                 | owner_user_id, status                    | 34          |
| public      | activities               | idx_activities_status                                | false     | false      | btree        | CREATE INDEX idx_activities_status ON public.activities USING btree (status)                                                                                              | null                                                      | null                 | status                                   | 5           |
| public      | audit_logs               | idx_audit_correlation                                | false     | false      | btree        | CREATE INDEX idx_audit_correlation ON public.audit_logs USING btree (correlation_id)                                                                                      | null                                                      | null                 | correlation_id                           | 0           |
| public      | audit_logs               | idx_audit_created                                    | false     | false      | btree        | CREATE INDEX idx_audit_created ON public.audit_logs USING btree (created_at DESC)                                                                                         | null                                                      | null                 | created_at                               | 0           |
| public      | audit_logs               | idx_audit_module                                     | false     | false      | btree        | CREATE INDEX idx_audit_module ON public.audit_logs USING btree (module)                                                                                                   | null                                                      | null                 | module                                   | 0           |
| public      | audit_logs               | idx_audit_record                                     | false     | false      | btree        | CREATE INDEX idx_audit_record ON public.audit_logs USING btree (record_type, record_id)                                                                                   | null                                                      | null                 | record_type, record_id                   | 0           |
| public      | audit_logs               | idx_audit_user                                       | false     | false      | btree        | CREATE INDEX idx_audit_user ON public.audit_logs USING btree (user_id)                                                                                                    | null                                                      | null                 | user_id                                  | 0           |
| public      | cadence_enrollments      | idx_enrollments_account                              | false     | false      | btree        | CREATE INDEX idx_enrollments_account ON public.cadence_enrollments USING btree (account_id)                                                                               | null                                                      | null                 | account_id                               | 0           |
| public      | cadence_enrollments      | idx_enrollments_cadence                              | false     | false      | btree        | CREATE INDEX idx_enrollments_cadence ON public.cadence_enrollments USING btree (cadence_id)                                                                               | null                                                      | null                 | cadence_id                               | 0           |
| public      | cadence_enrollments      | idx_enrollments_opp                                  | false     | false      | btree        | CREATE INDEX idx_enrollments_opp ON public.cadence_enrollments USING btree (opportunity_id)                                                                               | null                                                      | null                 | opportunity_id                           | 0           |
| public      | cadence_enrollments      | idx_enrollments_status                               | false     | false      | btree        | CREATE INDEX idx_enrollments_status ON public.cadence_enrollments USING btree (status)                                                                                    | null                                                      | null                 | status                                   | 0           |
| public      | cadence_steps            | idx_cadence_step_unique                              | true      | false      | btree        | CREATE UNIQUE INDEX idx_cadence_step_unique ON public.cadence_steps USING btree (cadence_id, step_number)                                                                 | null                                                      | null                 | cadence_id, step_number                  | 8           |
| public      | cadence_steps            | idx_cadence_steps_cadence                            | false     | false      | btree        | CREATE INDEX idx_cadence_steps_cadence ON public.cadence_steps USING btree (cadence_id)                                                                                   | null                                                      | null                 | cadence_id                               | 0           |
| public      | contacts                 | idx_contacts_account                                 | false     | false      | btree        | CREATE INDEX idx_contacts_account ON public.contacts USING btree (account_id)                                                                                             | null                                                      | null                 | account_id                               | 50          |
| public      | contacts                 | idx_contacts_account_email                           | true      | false      | btree        | CREATE UNIQUE INDEX idx_contacts_account_email ON public.contacts USING btree (account_id, email) WHERE (email IS NOT NULL)                                               | (email IS NOT NULL)                                       | null                 | account_id, email                        | 0           |
| public      | contacts                 | idx_contacts_account_phone                           | true      | false      | btree        | CREATE UNIQUE INDEX idx_contacts_account_phone ON public.contacts USING btree (account_id, phone) WHERE (phone IS NOT NULL)                                               | (phone IS NOT NULL)                                       | null                 | account_id, phone                        | 0           |
| public      | crm_idempotency          | idx_idempotency_expires                              | false     | false      | btree        | CREATE INDEX idx_idempotency_expires ON public.crm_idempotency USING btree (expires_at)                                                                                   | null                                                      | null                 | expires_at                               | 0           |
| public      | crm_notification_logs    | crm_notification_unique_key                          | true      | false      | btree        | CREATE UNIQUE INDEX crm_notification_unique_key ON public.crm_notification_logs USING btree (entity_type, entity_id, event, threshold)                                    | null                                                      | null                 | entity_type, entity_id, event, threshold | 8           |
| public      | crm_notification_logs    | idx_crm_notification_logs_entity                     | false     | false      | btree        | CREATE INDEX idx_crm_notification_logs_entity ON public.crm_notification_logs USING btree (entity_type, entity_id)                                                        | null                                                      | null                 | entity_type, entity_id                   | 0           |
| public      | crm_notification_logs    | idx_crm_notification_logs_event                      | false     | false      | btree        | CREATE INDEX idx_crm_notification_logs_event ON public.crm_notification_logs USING btree (event)                                                                          | null                                                      | null                 | event                                    | 0           |
| public      | crm_notification_logs    | idx_crm_notification_logs_sent_at                    | false     | false      | btree        | CREATE INDEX idx_crm_notification_logs_sent_at ON public.crm_notification_logs USING btree (sent_at DESC)                                                                 | null                                                      | null                 | sent_at                                  | 0           |
| public      | crm_notification_logs    | idx_crm_notification_logs_status                     | false     | false      | btree        | CREATE INDEX idx_crm_notification_logs_status ON public.crm_notification_logs USING btree (status)                                                                        | null                                                      | null                 | status                                   | 9           |
| public      | crm_notification_logs    | idx_crm_notification_logs_weekly                     | false     | false      | btree        | CREATE INDEX idx_crm_notification_logs_weekly ON public.crm_notification_logs USING btree (event, sent_at) WHERE (event = 'weekly_summary'::text)                         | (event = 'weekly_summary'::text)                          | null                 | event, sent_at                           | 0           |
| public      | customer_quotation_items | idx_quotation_items_quotation                        | false     | false      | btree        | CREATE INDEX idx_quotation_items_quotation ON public.customer_quotation_items USING btree (quotation_id)                                                                  | null                                                      | null                 | quotation_id                             | 219         |
| public      | customer_quotations      | customer_quotations_quotation_number_key             | true      | false      | btree        | CREATE UNIQUE INDEX customer_quotations_quotation_number_key ON public.customer_quotations USING btree (quotation_number)                                                 | null                                                      | null                 | quotation_number                         | 0           |
| public      | customer_quotations      | idx_customer_quotations_created_at                   | false     | false      | btree        | CREATE INDEX idx_customer_quotations_created_at ON public.customer_quotations USING btree (created_at DESC)                                                               | null                                                      | null                 | created_at                               | 0           |


RINGKASAN POLICIES
| schema_name | table_name                         | policy_name                                                   | for_command | roles   | using_expression                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | with_check_expression                                                                                                                                                                                                                                                                                                                                                                   | table_owner            |
| ----------- | ---------------------------------- | ------------------------------------------------------------- | ----------- | ------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------- |
| public      | accounts                           | Allow authenticated users to insert accounts                  | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | true                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | accounts                           | Allow authenticated users to read accounts                    | S           | {16481} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | accounts                           | Allow authenticated users to update accounts                  | U           | {16481} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | accounts                           | accounts_insert                                               | I           | {0}     | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (is_admin() OR is_sales())                                                                                                                                                                                                                                                                                                                                                              | postgres               |
| public      | accounts                           | accounts_select                                               | S           | {0}     | (is_admin() OR is_sales() OR (is_marketing_manager_or_macx() AND ((original_creator_id = auth.uid()) OR is_lead_from_marketing_department(original_creator_id))) OR (is_marketing() AND (original_creator_id = auth.uid())))                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | accounts                           | accounts_update                                               | U           | {0}     | (is_admin() OR (owner_user_id = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | activities                         | activities_insert                                             | I           | {0}     | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (is_admin() OR is_sales() OR is_marketing())                                                                                                                                                                                                                                                                                                                                            | postgres               |
| public      | activities                         | activities_select                                             | S           | {0}     | (is_admin() OR (owner_user_id = auth.uid()) OR is_marketing())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | activities                         | activities_update                                             | U           | {0}     | (is_admin() OR (owner_user_id = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | audit_logs                         | audit_insert                                                  | I           | {0}     | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | true                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | audit_logs                         | audit_select                                                  | S           | {0}     | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | cadence_enrollments                | enrollments_insert                                            | I           | {0}     | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (is_admin() OR is_sales())                                                                                                                                                                                                                                                                                                                                                              | postgres               |
| public      | cadence_enrollments                | enrollments_select                                            | S           | {0}     | (is_admin() OR (enrolled_by = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | cadence_enrollments                | enrollments_update                                            | U           | {0}     | (is_admin() OR (enrolled_by = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | cadence_steps                      | steps_insert                                                  | I           | {0}     | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | is_admin()                                                                                                                                                                                                                                                                                                                                                                              | postgres               |
| public      | cadence_steps                      | steps_select                                                  | S           | {0}     | (is_admin() OR is_sales() OR is_marketing())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | cadences                           | cadences_insert                                               | I           | {0}     | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | is_admin()                                                                                                                                                                                                                                                                                                                                                                              | postgres               |
| public      | cadences                           | cadences_select                                               | S           | {0}     | (is_admin() OR is_sales() OR is_marketing())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | cadences                           | cadences_update                                               | U           | {0}     | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | contacts                           | contacts_insert                                               | I           | {0}     | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (is_admin() OR is_sales())                                                                                                                                                                                                                                                                                                                                                              | postgres               |
| public      | contacts                           | contacts_select                                               | S           | {0}     | (is_admin() OR is_sales() OR is_marketing())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | contacts                           | contacts_update                                               | U           | {0}     | (is_admin() OR is_sales())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | customer_quotation_items           | quotation_items_delete                                        | D           | {16481} | (EXISTS ( SELECT 1
   FROM customer_quotations q
  WHERE ((q.id = customer_quotation_items.quotation_id) AND ((q.created_by = auth.uid()) OR is_ticketing_admin(auth.uid())))))                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | customer_quotation_items           | quotation_items_insert                                        | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (EXISTS ( SELECT 1
   FROM customer_quotations q
  WHERE ((q.id = customer_quotation_items.quotation_id) AND ((q.created_by = auth.uid()) OR is_ticketing_admin(auth.uid())))))                                                                                                                                                                                                         | postgres               |
| public      | customer_quotation_items           | quotation_items_select                                        | S           | {16481} | (EXISTS ( SELECT 1
   FROM customer_quotations q
  WHERE ((q.id = customer_quotation_items.quotation_id) AND ((q.created_by = auth.uid()) OR is_ticketing_admin(auth.uid())))))                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | customer_quotation_items           | quotation_items_update                                        | U           | {16481} | (EXISTS ( SELECT 1
   FROM customer_quotations q
  WHERE ((q.id = customer_quotation_items.quotation_id) AND ((q.created_by = auth.uid()) OR is_ticketing_admin(auth.uid())))))                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | customer_quotation_sequences       | quotation_sequences_all                                       | *           | {16481} | can_access_ticketing(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | customer_quotations                | customer_quotations_delete                                    | D           | {16481} | (can_access_ticketing(auth.uid()) AND ((created_by = auth.uid()) OR is_ticketing_admin(auth.uid())) AND (status = 'draft'::customer_quotation_status))                                                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | customer_quotations                | customer_quotations_insert                                    | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND (created_by = auth.uid()))                                                                                                                                                                                                                                                                                                                        | postgres               |
| public      | customer_quotations                | customer_quotations_select                                    | S           | {16481} | (can_access_ticketing(auth.uid()) AND ((created_by = auth.uid()) OR is_ticketing_admin(auth.uid()) OR (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = customer_quotations.ticket_id) AND ((t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))) OR (EXISTS ( SELECT 1
   FROM opportunities o
  WHERE ((o.opportunity_id = customer_quotations.opportunity_id) AND (o.owner_user_id = auth.uid())))) OR (EXISTS ( SELECT 1
   FROM leads l
  WHERE ((l.lead_id = customer_quotations.lead_id) AND ((l.created_by = auth.uid()) OR (l.sales_owner_user_id = auth.uid()))))))) | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | customer_quotations                | customer_quotations_update                                    | U           | {16481} | (can_access_ticketing(auth.uid()) AND ((created_by = auth.uid()) OR is_ticketing_admin(auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | import_batches                     | imports_insert                                                | I           | {0}     | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (is_admin() OR (get_user_role() = ANY (ARRAY['Marketing Manager'::user_role, 'sales manager'::user_role])))                                                                                                                                                                                                                                                                             | postgres               |
| public      | import_batches                     | imports_select                                                | S           | {0}     | (is_admin() OR (imported_by = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | insights_growth                    | Admins can view all insights                                  | S           | {0}     | (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.user_id = auth.uid()) AND (profiles.role = ANY (ARRAY['Director'::user_role, 'super admin'::user_role])))))                                                                                                                                                                                                                                                                                                                                                                                                                           | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | insights_growth                    | Marketing managers can view marketing insights                | S           | {0}     | ((EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.user_id = auth.uid()) AND (profiles.role = ANY (ARRAY['Marketing Manager'::user_role, 'MACX'::user_role]))))) AND (scope_key ~~ 'ORG:%'::text))                                                                                                                                                                                                                                                                                                                                                                                      | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | insights_growth                    | Sales managers can view team insights                         | S           | {0}     | ((EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.user_id = auth.uid()) AND (profiles.role = 'sales manager'::user_role)))) AND ((scope_key ~~ 'TEAM:%'::text) OR (scope_key ~~ 'SELF:%'::text)))                                                                                                                                                                                                                                                                                                                                                                                      | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | insights_growth                    | Users can insert insights                                     | I           | {0}     | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (auth.uid() = generated_by_user_id)                                                                                                                                                                                                                                                                                                                                                     | postgres               |
| public      | insights_growth                    | Users can update own insights                                 | U           | {0}     | (auth.uid() = generated_by_user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | insights_growth                    | Users can view own insights                                   | S           | {0}     | (auth.uid() = generated_by_user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | insights_growth                    | Users can view self scope insights                            | S           | {0}     | (scope_key = ('SELF:'::text || (auth.uid())::text))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | lead_handover_pool                 | pool_insert                                                   | I           | {0}     | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (is_admin() OR is_marketing())                                                                                                                                                                                                                                                                                                                                                          | postgres               |
| public      | lead_handover_pool                 | pool_select                                                   | S           | {0}     | (is_admin() OR is_sales() OR (handed_over_by = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | lead_handover_pool                 | pool_update                                                   | U           | {0}     | (is_admin() OR is_sales())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | leads                              | leads_insert                                                  | I           | {0}     | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (is_admin() OR is_marketing() OR is_sales())                                                                                                                                                                                                                                                                                                                                            | postgres               |
| public      | leads                              | leads_select                                                  | S           | {0}     | (is_admin() OR (is_marketing_manager_or_macx() AND is_lead_from_marketing_department(created_by)) OR (is_marketing() AND ((created_by = auth.uid()) OR (marketing_owner_user_id = auth.uid()))) OR (is_sales_manager() AND ((sales_owner_user_id IS NOT NULL) OR (handover_eligible = true))) OR (is_sales() AND (NOT is_sales_manager()) AND ((sales_owner_user_id = auth.uid()) OR (handover_eligible = true))))                                                                                                                                                                           | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | leads                              | leads_update                                                  | U           | {0}     | (is_admin() OR (is_marketing_manager() AND is_lead_from_marketing_department(created_by) AND (sales_owner_user_id IS NULL)) OR (is_macx() AND is_lead_from_marketing_department(created_by) AND (sales_owner_user_id IS NULL)) OR (is_marketing() AND ((created_by = auth.uid()) OR (marketing_owner_user_id = auth.uid())) AND (sales_owner_user_id IS NULL)) OR (is_sales() AND (sales_owner_user_id = auth.uid())))                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | operational_cost_rejection_reasons | Users can insert cost rejection reasons                       | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | ((created_by = auth.uid()) AND (EXISTS ( SELECT 1
   FROM (ticket_rate_quotes trq
     JOIN tickets t ON ((t.id = trq.ticket_id)))
  WHERE ((trq.id = operational_cost_rejection_reasons.operational_cost_id) AND (is_ticketing_admin(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))                                                                   | postgres               |
| public      | operational_cost_rejection_reasons | Users can view cost rejection reasons for their tickets       | S           | {16481} | (EXISTS ( SELECT 1
   FROM (ticket_rate_quotes trq
     JOIN tickets t ON ((t.id = trq.ticket_id)))
  WHERE ((trq.id = operational_cost_rejection_reasons.operational_cost_id) AND (is_ticketing_admin(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()) OR (trq.created_by = auth.uid())))))                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | opportunities                      | Allow authenticated users to delete opportunities             | D           | {16481} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | opportunities                      | Allow authenticated users to insert opportunities             | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | true                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | opportunities                      | Allow authenticated users to read opportunities               | S           | {16481} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | opportunities                      | Allow authenticated users to update opportunities             | U           | {16481} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | opportunities                      | opp_insert                                                    | I           | {0}     | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (is_admin() OR is_sales())                                                                                                                                                                                                                                                                                                                                                              | postgres               |
| public      | opportunities                      | opp_select                                                    | S           | {0}     | (is_admin() OR is_sales_manager() OR (is_sales() AND (NOT is_sales_manager()) AND (owner_user_id = auth.uid())) OR (is_marketing_manager_or_macx() AND ((original_creator_id = auth.uid()) OR is_lead_from_marketing_department(original_creator_id))) OR (is_marketing() AND (NOT is_marketing_manager_or_macx()) AND (original_creator_id = auth.uid())))                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | opportunities                      | opp_update                                                    | U           | {0}     | (is_admin() OR (owner_user_id = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | opportunity_stage_history          | Allow authenticated users to insert opportunity_stage_history | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | true                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | opportunity_stage_history          | Allow authenticated users to read opportunity_stage_history   | S           | {16481} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | opportunity_stage_history          | stage_history_insert                                          | I           | {0}     | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (is_admin() OR is_sales())                                                                                                                                                                                                                                                                                                                                                              | postgres               |
| public      | opportunity_stage_history          | stage_history_select                                          | S           | {0}     | (is_admin() OR is_sales() OR is_marketing())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | pipeline_updates                   | Users can insert own pipeline updates                         | I           | {0}     | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (updated_by = auth.uid())                                                                                                                                                                                                                                                                                                                                                               | postgres               |
| public      | pipeline_updates                   | Users can update own pipeline updates                         | U           | {0}     | (updated_by = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | pipeline_updates                   | Users can view own pipeline updates                           | S           | {0}     | ((updated_by = auth.uid()) OR (EXISTS ( SELECT 1
   FROM opportunities o
  WHERE ((o.opportunity_id = pipeline_updates.opportunity_id) AND (o.owner_user_id = auth.uid())))))                                                                                                                                                                                                                                                                                                                                                                                                                | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | profiles                           | Allow authenticated users to read profiles                    | S           | {16481} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | profiles                           | profiles_select                                               | S           | {0}     | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | profiles                           | profiles_update                                               | U           | {0}     | ((user_id = auth.uid()) OR is_admin())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | quotation_rejection_reasons        | Users can insert rejection reasons                            | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | ((created_by = auth.uid()) AND (EXISTS ( SELECT 1
   FROM customer_quotations cq
  WHERE ((cq.id = quotation_rejection_reasons.quotation_id) AND (is_ticketing_admin(auth.uid()) OR (cq.created_by = auth.uid()) OR (EXISTS ( SELECT 1
           FROM tickets t
          WHERE ((t.id = cq.ticket_id) AND ((t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))))))       | postgres               |
| public      | quotation_rejection_reasons        | Users can view rejection reasons for their quotations         | S           | {16481} | (EXISTS ( SELECT 1
   FROM customer_quotations cq
  WHERE ((cq.id = quotation_rejection_reasons.quotation_id) AND (is_ticketing_admin(auth.uid()) OR (cq.created_by = auth.uid()) OR (EXISTS ( SELECT 1
           FROM tickets t
          WHERE ((t.id = cq.ticket_id) AND ((t.created_by = auth.uid()) OR (t.assigned_to = auth.uid())))))))))                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | quotation_term_templates           | term_templates_select                                         | S           | {16481} | (can_access_ticketing(auth.uid()) AND (is_active = true))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | sales_plans                        | sales_plans_delete_policy                                     | D           | {0}     | (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.user_id = auth.uid()) AND (profiles.role = ANY (ARRAY['super admin'::user_role, 'sales manager'::user_role, 'sales support'::user_role])))))                                                                                                                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | sales_plans                        | sales_plans_insert_policy                                     | I           | {0}     | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.user_id = auth.uid()) AND (profiles.role = ANY (ARRAY['super admin'::user_role, 'salesperson'::user_role])))))                                                                                                                                                                                                                   | postgres               |
| public      | sales_plans                        | sales_plans_select_policy                                     | S           | {0}     | ((owner_user_id = auth.uid()) OR (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.user_id = auth.uid()) AND (profiles.role = ANY (ARRAY['super admin'::user_role, 'Director'::user_role, 'sales manager'::user_role, 'sales support'::user_role, 'Marketing Manager'::user_role, 'MACX'::user_role]))))))                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | sales_plans                        | sales_plans_update_policy                                     | U           | {0}     | ((owner_user_id = auth.uid()) OR (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.user_id = auth.uid()) AND (profiles.role = 'super admin'::user_role)))))                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | sla_business_hours                 | Authenticated users can view business hours                   | S           | {16481} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | sla_business_hours                 | Superadmin can manage business hours                          | *           | {16481} | is_ticketing_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | is_ticketing_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                          | postgres               |
| public      | sla_holidays                       | Authenticated users can view holidays                         | S           | {16481} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | sla_holidays                       | Superadmin can manage holidays                                | *           | {16481} | is_ticketing_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | is_ticketing_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                          | postgres               |
| public      | ticket_assignments                 | ticket_assignments_insert_policy                              | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid())) AND (assigned_by = auth.uid()))                                                                                                                                                                                                                                                  | postgres               |
| public      | ticket_assignments                 | ticket_assignments_select_policy                              | S           | {16481} | (can_access_ticketing(auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_assignments.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | ticket_attachments                 | ticket_attachments_delete_policy                              | D           | {16481} | (can_access_ticketing(auth.uid()) AND ((uploaded_by = auth.uid()) OR is_ticketing_admin(auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | ticket_attachments                 | ticket_attachments_insert_policy                              | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND (uploaded_by = auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_attachments.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))                                                                                        | postgres               |
| public      | ticket_attachments                 | ticket_attachments_select_policy                              | S           | {16481} | (can_access_ticketing(auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_attachments.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | ticket_comments                    | ticket_comments_delete_policy                                 | D           | {16481} | (can_access_ticketing(auth.uid()) AND ((user_id = auth.uid()) OR is_ticketing_admin(auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | ticket_comments                    | ticket_comments_insert_policy                                 | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND (user_id = auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_comments.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))) AND ((is_internal = false) OR is_ticketing_ops(auth.uid()) OR is_ticketing_admin(auth.uid()))) | postgres               |
| public      | ticket_comments                    | ticket_comments_select_policy                                 | S           | {16481} | (can_access_ticketing(auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_comments.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))) AND ((is_internal = false) OR is_ticketing_ops(auth.uid()) OR is_ticketing_admin(auth.uid())))                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | ticket_comments                    | ticket_comments_update_policy                                 | U           | {16481} | (can_access_ticketing(auth.uid()) AND ((user_id = auth.uid()) OR is_ticketing_admin(auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | (can_access_ticketing(auth.uid()) AND ((user_id = auth.uid()) OR is_ticketing_admin(auth.uid())))                                                                                                                                                                                                                                                                                       | postgres               |
| public      | ticket_events                      | ticket_events_insert_policy                                   | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND (actor_user_id = auth.uid()))                                                                                                                                                                                                                                                                                                                     | postgres               |
| public      | ticket_events                      | ticket_events_select_policy                                   | S           | {16481} | (can_access_ticketing(auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_events.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | ticket_rate_quote_items            | ticket_rate_quote_items_ops_all                               | *           | {16481} | (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | ticket_rate_quote_items            | ticket_rate_quote_items_view                                  | S           | {16481} | (EXISTS ( SELECT 1
   FROM (ticket_rate_quotes q
     JOIN tickets t ON ((t.id = q.ticket_id)))
  WHERE ((q.id = ticket_rate_quote_items.quote_id) AND ((t.created_by = auth.uid()) OR (t.assigned_to = auth.uid())))))                                                                                                                                                                                                                                                                                                                                                                      | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | ticket_rate_quotes                 | ticket_rate_quotes_delete_policy                              | D           | {16481} | (can_access_ticketing(auth.uid()) AND ((created_by = auth.uid()) OR is_ticketing_admin(auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | ticket_rate_quotes                 | ticket_rate_quotes_insert_policy                              | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid())) AND (created_by = auth.uid()))                                                                                                                                                                                                                                                   | postgres               |
| public      | ticket_rate_quotes                 | ticket_rate_quotes_select_policy                              | S           | {16481} | (can_access_ticketing(auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_rate_quotes.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | ticket_rate_quotes                 | ticket_rate_quotes_update_policy                              | U           | {16481} | (can_access_ticketing(auth.uid()) AND ((created_by = auth.uid()) OR is_ticketing_admin(auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND ((created_by = auth.uid()) OR is_ticketing_admin(auth.uid())))                                                                                                                                                                                                                                                                                    | postgres               |
| public      | ticket_response_exchanges          | Users can view response exchanges for their tickets           | S           | {16481} | (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_response_exchanges.ticket_id) AND (is_ticketing_admin(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid())))))                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | ticket_response_metrics            | Users can view response metrics for their tickets             | S           | {16481} | (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_response_metrics.ticket_id) AND (is_ticketing_admin(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid())))))                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | ticket_responses                   | ticket_responses_insert_policy                                | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND (user_id = auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_responses.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))                                                                                              | postgres               |
| public      | ticket_responses                   | ticket_responses_select_policy                                | S           | {16481} | (can_access_ticketing(auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_responses.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | ticket_sequences                   | ticket_sequences_insert_policy                                | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | can_access_ticketing(auth.uid())                                                                                                                                                                                                                                                                                                                                                        | postgres               |
| public      | ticket_sequences                   | ticket_sequences_select_policy                                | S           | {16481} | can_access_ticketing(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | ticket_sequences                   | ticket_sequences_update_policy                                | U           | {16481} | can_access_ticketing(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | can_access_ticketing(auth.uid())                                                                                                                                                                                                                                                                                                                                                        | postgres               |
| public      | ticket_sla_tracking                | ticket_sla_tracking_insert_policy                             | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid())))                                                                                                                                                                                                                                                                                 | postgres               |
| public      | ticket_sla_tracking                | ticket_sla_tracking_select_policy                             | S           | {16481} | (can_access_ticketing(auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_sla_tracking.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))                                                                                                                                                                                                                                                                                                                           | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | ticket_sla_tracking                | ticket_sla_tracking_update_policy                             | U           | {16481} | (can_access_ticketing(auth.uid()) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | (can_access_ticketing(auth.uid()) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid())))                                                                                                                                                                                                                                                                                 | postgres               |
| public      | ticketing_sla_config               | ticketing_sla_config_insert                                   | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | is_ticketing_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                          | postgres               |
| public      | ticketing_sla_config               | ticketing_sla_config_select                                   | S           | {16481} | can_access_ticketing(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | ticketing_sla_config               | ticketing_sla_config_update                                   | U           | {16481} | is_ticketing_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | is_ticketing_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                          | postgres               |
| public      | tickets                            | tickets_delete_policy                                         | D           | {16481} | is_ticketing_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | tickets                            | tickets_insert_policy                                         | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND (created_by = auth.uid()))                                                                                                                                                                                                                                                                                                                        | postgres               |
| public      | tickets                            | tickets_select_policy                                         | S           | {16481} | (can_access_ticketing(auth.uid()) AND (is_ticketing_admin(auth.uid()) OR (is_ticketing_ops(auth.uid()) AND ((origin_dept = get_user_ticketing_department(auth.uid())) OR (target_dept = get_user_ticketing_department(auth.uid())) OR (department = get_user_ticketing_department(auth.uid())))) OR (created_by = auth.uid()) OR (assigned_to = auth.uid())))                                                                                                                                                                                                                                | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               |
| public      | tickets                            | tickets_update_policy                                         | U           | {16481} | (can_access_ticketing(auth.uid()) AND (is_ticketing_admin(auth.uid()) OR (is_ticketing_ops(auth.uid()) AND (department = get_user_ticketing_department(auth.uid()))) OR (created_by = auth.uid()) OR (assigned_to = auth.uid())))                                                                                                                                                                                                                                                                                                                                                            | (can_access_ticketing(auth.uid()) AND (is_ticketing_admin(auth.uid()) OR (is_ticketing_ops(auth.uid()) AND (department = get_user_ticketing_department(auth.uid()))) OR (created_by = auth.uid()) OR (assigned_to = auth.uid())))                                                                                                                                                       | postgres               |
| storage     | objects                            | Authenticated users can delete attachments                    | D           | {16481} | (bucket_id = 'attachments'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin |
| storage     | objects                            | Authenticated users can delete ticketing attachments          | D           | {16481} | (bucket_id = 'ticketing-attachments'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin |
| storage     | objects                            | Authenticated users can update attachments                    | U           | {16481} | (bucket_id = 'attachments'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin |
| storage     | objects                            | Authenticated users can update ticketing attachments          | U           | {16481} | (bucket_id = 'ticketing-attachments'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin |
| storage     | objects                            | Authenticated users can upload attachments                    | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (bucket_id = 'attachments'::text)                                                                                                                                                                                                                                                                                                                                                       | supabase_storage_admin |
| storage     | objects                            | Authenticated users can upload ticketing attachments          | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (bucket_id = 'ticketing-attachments'::text)                                                                                                                                                                                                                                                                                                                                             | supabase_storage_admin |
| storage     | objects                            | Authenticated users can view attachments                      | S           | {16481} | (bucket_id = 'attachments'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin |
| storage     | objects                            | Authenticated users can view ticketing attachments            | S           | {16481} | (bucket_id = 'ticketing-attachments'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin |
| storage     | objects                            | Public read access for ticketing attachments                  | S           | {0}     | (bucket_id = 'ticketing-attachments'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin |
| storage     | objects                            | avatars_delete_policy                                         | D           | {16481} | ((bucket_id = 'avatars'::text) AND ((storage.foldername(name))[1] = (auth.uid())::text))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin |
| storage     | objects                            | avatars_insert_policy                                         | I           | {16481} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | ((bucket_id = 'avatars'::text) AND ((storage.foldername(name))[1] = (auth.uid())::text))                                                                                                                                                                                                                                                                                                | supabase_storage_admin |
| storage     | objects                            | avatars_select_policy                                         | S           | {16481} | (bucket_id = 'avatars'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin |
| storage     | objects                            | avatars_update_policy                                         | U           | {16481} | ((bucket_id = 'avatars'::text) AND ((storage.foldername(name))[1] = (auth.uid())::text))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin |

DATA DETAIL POLCIES
| policy_oid | schema_name | table_name                         | policy_name                                                   | polcmd_code | polroles_oids | polrole_names   | using_expression                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | with_check_expression                                                                                                                                                                                                                                                                                                                                                                   | table_owner            | permissive |
| ---------- | ----------- | ---------------------------------- | ------------------------------------------------------------- | ----------- | ------------- | --------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------- | ---------- |
| 19107      | public      | accounts                           | Allow authenticated users to insert accounts                  | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | true                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 19106      | public      | accounts                           | Allow authenticated users to read accounts                    | r           | [16481]       | {authenticated} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 19108      | public      | accounts                           | Allow authenticated users to update accounts                  | w           | [16481]       | {authenticated} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18311      | public      | accounts                           | accounts_insert                                               | a           | [0]           | {}              | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (is_admin() OR is_sales())                                                                                                                                                                                                                                                                                                                                                              | postgres               | true       |
| 34321      | public      | accounts                           | accounts_select                                               | r           | [0]           | {}              | (is_admin() OR is_sales() OR (is_marketing_manager_or_macx() AND ((original_creator_id = auth.uid()) OR is_lead_from_marketing_department(original_creator_id))) OR (is_marketing() AND (original_creator_id = auth.uid())))                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18312      | public      | accounts                           | accounts_update                                               | w           | [0]           | {}              | (is_admin() OR (owner_user_id = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18328      | public      | activities                         | activities_insert                                             | a           | [0]           | {}              | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (is_admin() OR is_sales() OR is_marketing())                                                                                                                                                                                                                                                                                                                                            | postgres               | true       |
| 18327      | public      | activities                         | activities_select                                             | r           | [0]           | {}              | (is_admin() OR (owner_user_id = auth.uid()) OR is_marketing())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18329      | public      | activities                         | activities_update                                             | w           | [0]           | {}              | (is_admin() OR (owner_user_id = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18344      | public      | audit_logs                         | audit_insert                                                  | a           | [0]           | {}              | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | true                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18343      | public      | audit_logs                         | audit_select                                                  | r           | [0]           | {}              | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18336      | public      | cadence_enrollments                | enrollments_insert                                            | a           | [0]           | {}              | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (is_admin() OR is_sales())                                                                                                                                                                                                                                                                                                                                                              | postgres               | true       |
| 18335      | public      | cadence_enrollments                | enrollments_select                                            | r           | [0]           | {}              | (is_admin() OR (enrolled_by = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18337      | public      | cadence_enrollments                | enrollments_update                                            | w           | [0]           | {}              | (is_admin() OR (enrolled_by = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18334      | public      | cadence_steps                      | steps_insert                                                  | a           | [0]           | {}              | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | is_admin()                                                                                                                                                                                                                                                                                                                                                                              | postgres               | true       |
| 18333      | public      | cadence_steps                      | steps_select                                                  | r           | [0]           | {}              | (is_admin() OR is_sales() OR is_marketing())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18331      | public      | cadences                           | cadences_insert                                               | a           | [0]           | {}              | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | is_admin()                                                                                                                                                                                                                                                                                                                                                                              | postgres               | true       |
| 18330      | public      | cadences                           | cadences_select                                               | r           | [0]           | {}              | (is_admin() OR is_sales() OR is_marketing())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18332      | public      | cadences                           | cadences_update                                               | w           | [0]           | {}              | is_admin()                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18314      | public      | contacts                           | contacts_insert                                               | a           | [0]           | {}              | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (is_admin() OR is_sales())                                                                                                                                                                                                                                                                                                                                                              | postgres               | true       |
| 18313      | public      | contacts                           | contacts_select                                               | r           | [0]           | {}              | (is_admin() OR is_sales() OR is_marketing())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18315      | public      | contacts                           | contacts_update                                               | w           | [0]           | {}              | (is_admin() OR is_sales())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 27796      | public      | customer_quotation_items           | quotation_items_delete                                        | d           | [16481]       | {authenticated} | (EXISTS ( SELECT 1
   FROM customer_quotations q
  WHERE ((q.id = customer_quotation_items.quotation_id) AND ((q.created_by = auth.uid()) OR is_ticketing_admin(auth.uid())))))                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 27794      | public      | customer_quotation_items           | quotation_items_insert                                        | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (EXISTS ( SELECT 1
   FROM customer_quotations q
  WHERE ((q.id = customer_quotation_items.quotation_id) AND ((q.created_by = auth.uid()) OR is_ticketing_admin(auth.uid())))))                                                                                                                                                                                                         | postgres               | true       |
| 27793      | public      | customer_quotation_items           | quotation_items_select                                        | r           | [16481]       | {authenticated} | (EXISTS ( SELECT 1
   FROM customer_quotations q
  WHERE ((q.id = customer_quotation_items.quotation_id) AND ((q.created_by = auth.uid()) OR is_ticketing_admin(auth.uid())))))                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 27795      | public      | customer_quotation_items           | quotation_items_update                                        | w           | [16481]       | {authenticated} | (EXISTS ( SELECT 1
   FROM customer_quotations q
  WHERE ((q.id = customer_quotation_items.quotation_id) AND ((q.created_by = auth.uid()) OR is_ticketing_admin(auth.uid())))))                                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 27798      | public      | customer_quotation_sequences       | quotation_sequences_all                                       | *           | [16481]       | {authenticated} | can_access_ticketing(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 27792      | public      | customer_quotations                | customer_quotations_delete                                    | d           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND ((created_by = auth.uid()) OR is_ticketing_admin(auth.uid())) AND (status = 'draft'::customer_quotation_status))                                                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 27790      | public      | customer_quotations                | customer_quotations_insert                                    | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND (created_by = auth.uid()))                                                                                                                                                                                                                                                                                                                        | postgres               | true       |
| 31978      | public      | customer_quotations                | customer_quotations_select                                    | r           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND ((created_by = auth.uid()) OR is_ticketing_admin(auth.uid()) OR (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = customer_quotations.ticket_id) AND ((t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))) OR (EXISTS ( SELECT 1
   FROM opportunities o
  WHERE ((o.opportunity_id = customer_quotations.opportunity_id) AND (o.owner_user_id = auth.uid())))) OR (EXISTS ( SELECT 1
   FROM leads l
  WHERE ((l.lead_id = customer_quotations.lead_id) AND ((l.created_by = auth.uid()) OR (l.sales_owner_user_id = auth.uid()))))))) | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 27791      | public      | customer_quotations                | customer_quotations_update                                    | w           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND ((created_by = auth.uid()) OR is_ticketing_admin(auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18342      | public      | import_batches                     | imports_insert                                                | a           | [0]           | {}              | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (is_admin() OR (get_user_role() = ANY (ARRAY['Marketing Manager'::user_role, 'sales manager'::user_role])))                                                                                                                                                                                                                                                                             | postgres               | true       |
| 18341      | public      | import_batches                     | imports_select                                                | r           | [0]           | {}              | (is_admin() OR (imported_by = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 25698      | public      | insights_growth                    | Admins can view all insights                                  | r           | [0]           | {}              | (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.user_id = auth.uid()) AND (profiles.role = ANY (ARRAY['Director'::user_role, 'super admin'::user_role])))))                                                                                                                                                                                                                                                                                                                                                                                                                           | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 25700      | public      | insights_growth                    | Marketing managers can view marketing insights                | r           | [0]           | {}              | ((EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.user_id = auth.uid()) AND (profiles.role = ANY (ARRAY['Marketing Manager'::user_role, 'MACX'::user_role]))))) AND (scope_key ~~ 'ORG:%'::text))                                                                                                                                                                                                                                                                                                                                                                                      | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 25699      | public      | insights_growth                    | Sales managers can view team insights                         | r           | [0]           | {}              | ((EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.user_id = auth.uid()) AND (profiles.role = 'sales manager'::user_role)))) AND ((scope_key ~~ 'TEAM:%'::text) OR (scope_key ~~ 'SELF:%'::text)))                                                                                                                                                                                                                                                                                                                                                                                      | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 25701      | public      | insights_growth                    | Users can insert insights                                     | a           | [0]           | {}              | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (auth.uid() = generated_by_user_id)                                                                                                                                                                                                                                                                                                                                                     | postgres               | true       |
| 25702      | public      | insights_growth                    | Users can update own insights                                 | w           | [0]           | {}              | (auth.uid() = generated_by_user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 25696      | public      | insights_growth                    | Users can view own insights                                   | r           | [0]           | {}              | (auth.uid() = generated_by_user_id)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 25697      | public      | insights_growth                    | Users can view self scope insights                            | r           | [0]           | {}              | (scope_key = ('SELF:'::text || (auth.uid())::text))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18320      | public      | lead_handover_pool                 | pool_insert                                                   | a           | [0]           | {}              | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (is_admin() OR is_marketing())                                                                                                                                                                                                                                                                                                                                                          | postgres               | true       |
| 18319      | public      | lead_handover_pool                 | pool_select                                                   | r           | [0]           | {}              | (is_admin() OR is_sales() OR (handed_over_by = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18321      | public      | lead_handover_pool                 | pool_update                                                   | w           | [0]           | {}              | (is_admin() OR is_sales())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 23048      | public      | leads                              | leads_insert                                                  | a           | [0]           | {}              | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (is_admin() OR is_marketing() OR is_sales())                                                                                                                                                                                                                                                                                                                                            | postgres               | true       |
| 34310      | public      | leads                              | leads_select                                                  | r           | [0]           | {}              | (is_admin() OR (is_marketing_manager_or_macx() AND is_lead_from_marketing_department(created_by)) OR (is_marketing() AND ((created_by = auth.uid()) OR (marketing_owner_user_id = auth.uid()))) OR (is_sales_manager() AND ((sales_owner_user_id IS NOT NULL) OR (handover_eligible = true))) OR (is_sales() AND (NOT is_sales_manager()) AND ((sales_owner_user_id = auth.uid()) OR (handover_eligible = true))))                                                                                                                                                                           | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 19033      | public      | leads                              | leads_update                                                  | w           | [0]           | {}              | (is_admin() OR (is_marketing_manager() AND is_lead_from_marketing_department(created_by) AND (sales_owner_user_id IS NULL)) OR (is_macx() AND is_lead_from_marketing_department(created_by) AND (sales_owner_user_id IS NULL)) OR (is_marketing() AND ((created_by = auth.uid()) OR (marketing_owner_user_id = auth.uid())) AND (sales_owner_user_id IS NULL)) OR (is_sales() AND (sales_owner_user_id = auth.uid())))                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 34533      | public      | operational_cost_rejection_reasons | Users can insert cost rejection reasons                       | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | ((created_by = auth.uid()) AND (EXISTS ( SELECT 1
   FROM (ticket_rate_quotes trq
     JOIN tickets t ON ((t.id = trq.ticket_id)))
  WHERE ((trq.id = operational_cost_rejection_reasons.operational_cost_id) AND (is_ticketing_admin(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))                                                                   | postgres               | true       |
| 34531      | public      | operational_cost_rejection_reasons | Users can view cost rejection reasons for their tickets       | r           | [16481]       | {authenticated} | (EXISTS ( SELECT 1
   FROM (ticket_rate_quotes trq
     JOIN tickets t ON ((t.id = trq.ticket_id)))
  WHERE ((trq.id = operational_cost_rejection_reasons.operational_cost_id) AND (is_ticketing_admin(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()) OR (trq.created_by = auth.uid())))))                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 19103      | public      | opportunities                      | Allow authenticated users to delete opportunities             | d           | [16481]       | {authenticated} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 19101      | public      | opportunities                      | Allow authenticated users to insert opportunities             | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | true                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 19100      | public      | opportunities                      | Allow authenticated users to read opportunities               | r           | [16481]       | {authenticated} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 19102      | public      | opportunities                      | Allow authenticated users to update opportunities             | w           | [16481]       | {authenticated} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18323      | public      | opportunities                      | opp_insert                                                    | a           | [0]           | {}              | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (is_admin() OR is_sales())                                                                                                                                                                                                                                                                                                                                                              | postgres               | true       |
| 34311      | public      | opportunities                      | opp_select                                                    | r           | [0]           | {}              | (is_admin() OR is_sales_manager() OR (is_sales() AND (NOT is_sales_manager()) AND (owner_user_id = auth.uid())) OR (is_marketing_manager_or_macx() AND ((original_creator_id = auth.uid()) OR is_lead_from_marketing_department(original_creator_id))) OR (is_marketing() AND (NOT is_marketing_manager_or_macx()) AND (original_creator_id = auth.uid())))                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18324      | public      | opportunities                      | opp_update                                                    | w           | [0]           | {}              | (is_admin() OR (owner_user_id = auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 19105      | public      | opportunity_stage_history          | Allow authenticated users to insert opportunity_stage_history | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | true                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 19104      | public      | opportunity_stage_history          | Allow authenticated users to read opportunity_stage_history   | r           | [16481]       | {authenticated} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18326      | public      | opportunity_stage_history          | stage_history_insert                                          | a           | [0]           | {}              | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (is_admin() OR is_sales())                                                                                                                                                                                                                                                                                                                                                              | postgres               | true       |
| 18325      | public      | opportunity_stage_history          | stage_history_select                                          | r           | [0]           | {}              | (is_admin() OR is_sales() OR is_marketing())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 19699      | public      | pipeline_updates                   | Users can insert own pipeline updates                         | a           | [0]           | {}              | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (updated_by = auth.uid())                                                                                                                                                                                                                                                                                                                                                               | postgres               | true       |
| 19700      | public      | pipeline_updates                   | Users can update own pipeline updates                         | w           | [0]           | {}              | (updated_by = auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 19698      | public      | pipeline_updates                   | Users can view own pipeline updates                           | r           | [0]           | {}              | ((updated_by = auth.uid()) OR (EXISTS ( SELECT 1
   FROM opportunities o
  WHERE ((o.opportunity_id = pipeline_updates.opportunity_id) AND (o.owner_user_id = auth.uid())))))                                                                                                                                                                                                                                                                                                                                                                                                                | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 19109      | public      | profiles                           | Allow authenticated users to read profiles                    | r           | [16481]       | {authenticated} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18308      | public      | profiles                           | profiles_select                                               | r           | [0]           | {}              | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 18309      | public      | profiles                           | profiles_update                                               | w           | [0]           | {}              | ((user_id = auth.uid()) OR is_admin())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 34529      | public      | quotation_rejection_reasons        | Users can insert rejection reasons                            | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | ((created_by = auth.uid()) AND (EXISTS ( SELECT 1
   FROM customer_quotations cq
  WHERE ((cq.id = quotation_rejection_reasons.quotation_id) AND (is_ticketing_admin(auth.uid()) OR (cq.created_by = auth.uid()) OR (EXISTS ( SELECT 1
           FROM tickets t
          WHERE ((t.id = cq.ticket_id) AND ((t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))))))       | postgres               | true       |
| 34527      | public      | quotation_rejection_reasons        | Users can view rejection reasons for their quotations         | r           | [16481]       | {authenticated} | (EXISTS ( SELECT 1
   FROM customer_quotations cq
  WHERE ((cq.id = quotation_rejection_reasons.quotation_id) AND (is_ticketing_admin(auth.uid()) OR (cq.created_by = auth.uid()) OR (EXISTS ( SELECT 1
           FROM tickets t
          WHERE ((t.id = cq.ticket_id) AND ((t.created_by = auth.uid()) OR (t.assigned_to = auth.uid())))))))))                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 27797      | public      | quotation_term_templates           | term_templates_select                                         | r           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND (is_active = true))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 25658      | public      | sales_plans                        | sales_plans_delete_policy                                     | d           | [0]           | {}              | (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.user_id = auth.uid()) AND (profiles.role = ANY (ARRAY['super admin'::user_role, 'sales manager'::user_role, 'sales support'::user_role])))))                                                                                                                                                                                                                                                                                                                                                                                          | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 25656      | public      | sales_plans                        | sales_plans_insert_policy                                     | a           | [0]           | {}              | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.user_id = auth.uid()) AND (profiles.role = ANY (ARRAY['super admin'::user_role, 'salesperson'::user_role])))))                                                                                                                                                                                                                   | postgres               | true       |
| 25655      | public      | sales_plans                        | sales_plans_select_policy                                     | r           | [0]           | {}              | ((owner_user_id = auth.uid()) OR (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.user_id = auth.uid()) AND (profiles.role = ANY (ARRAY['super admin'::user_role, 'Director'::user_role, 'sales manager'::user_role, 'sales support'::user_role, 'Marketing Manager'::user_role, 'MACX'::user_role]))))))                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 25657      | public      | sales_plans                        | sales_plans_update_policy                                     | w           | [0]           | {}              | ((owner_user_id = auth.uid()) OR (EXISTS ( SELECT 1
   FROM profiles
  WHERE ((profiles.user_id = auth.uid()) AND (profiles.role = 'super admin'::user_role)))))                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 26332      | public      | sla_business_hours                 | Authenticated users can view business hours                   | r           | [16481]       | {authenticated} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 26333      | public      | sla_business_hours                 | Superadmin can manage business hours                          | *           | [16481]       | {authenticated} | is_ticketing_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | is_ticketing_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                          | postgres               | true       |
| 26334      | public      | sla_holidays                       | Authenticated users can view holidays                         | r           | [16481]       | {authenticated} | true                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 26335      | public      | sla_holidays                       | Superadmin can manage holidays                                | *           | [16481]       | {authenticated} | is_ticketing_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | is_ticketing_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                          | postgres               | true       |
| 26086      | public      | ticket_assignments                 | ticket_assignments_insert_policy                              | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid())) AND (assigned_by = auth.uid()))                                                                                                                                                                                                                                                  | postgres               | true       |
| 26085      | public      | ticket_assignments                 | ticket_assignments_select_policy                              | r           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_assignments.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 26093      | public      | ticket_attachments                 | ticket_attachments_delete_policy                              | d           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND ((uploaded_by = auth.uid()) OR is_ticketing_admin(auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 26092      | public      | ticket_attachments                 | ticket_attachments_insert_policy                              | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND (uploaded_by = auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_attachments.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))                                                                                        | postgres               | true       |
| 26091      | public      | ticket_attachments                 | ticket_attachments_select_policy                              | r           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_attachments.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 26090      | public      | ticket_comments                    | ticket_comments_delete_policy                                 | d           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND ((user_id = auth.uid()) OR is_ticketing_admin(auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 26088      | public      | ticket_comments                    | ticket_comments_insert_policy                                 | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND (user_id = auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_comments.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))) AND ((is_internal = false) OR is_ticketing_ops(auth.uid()) OR is_ticketing_admin(auth.uid()))) | postgres               | true       |
| 26087      | public      | ticket_comments                    | ticket_comments_select_policy                                 | r           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_comments.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))) AND ((is_internal = false) OR is_ticketing_ops(auth.uid()) OR is_ticketing_admin(auth.uid())))                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 26089      | public      | ticket_comments                    | ticket_comments_update_policy                                 | w           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND ((user_id = auth.uid()) OR is_ticketing_admin(auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | (can_access_ticketing(auth.uid()) AND ((user_id = auth.uid()) OR is_ticketing_admin(auth.uid())))                                                                                                                                                                                                                                                                                       | postgres               | true       |
| 26084      | public      | ticket_events                      | ticket_events_insert_policy                                   | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND (actor_user_id = auth.uid()))                                                                                                                                                                                                                                                                                                                     | postgres               | true       |
| 26083      | public      | ticket_events                      | ticket_events_select_policy                                   | r           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_events.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))                                                                                                                                                                                                                                                                                                                                 | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 27999      | public      | ticket_rate_quote_items            | ticket_rate_quote_items_ops_all                               | *           | [16481]       | {authenticated} | (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 28000      | public      | ticket_rate_quote_items            | ticket_rate_quote_items_view                                  | r           | [16481]       | {authenticated} | (EXISTS ( SELECT 1
   FROM (ticket_rate_quotes q
     JOIN tickets t ON ((t.id = q.ticket_id)))
  WHERE ((q.id = ticket_rate_quote_items.quote_id) AND ((t.created_by = auth.uid()) OR (t.assigned_to = auth.uid())))))                                                                                                                                                                                                                                                                                                                                                                      | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 26097      | public      | ticket_rate_quotes                 | ticket_rate_quotes_delete_policy                              | d           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND ((created_by = auth.uid()) OR is_ticketing_admin(auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 26095      | public      | ticket_rate_quotes                 | ticket_rate_quotes_insert_policy                              | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid())) AND (created_by = auth.uid()))                                                                                                                                                                                                                                                   | postgres               | true       |
| 26094      | public      | ticket_rate_quotes                 | ticket_rate_quotes_select_policy                              | r           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_rate_quotes.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 26096      | public      | ticket_rate_quotes                 | ticket_rate_quotes_update_policy                              | w           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND ((created_by = auth.uid()) OR is_ticketing_admin(auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND ((created_by = auth.uid()) OR is_ticketing_admin(auth.uid())))                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 26336      | public      | ticket_response_exchanges          | Users can view response exchanges for their tickets           | r           | [16481]       | {authenticated} | (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_response_exchanges.ticket_id) AND (is_ticketing_admin(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid())))))                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 26337      | public      | ticket_response_metrics            | Users can view response metrics for their tickets             | r           | [16481]       | {authenticated} | (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_response_metrics.ticket_id) AND (is_ticketing_admin(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid())))))                                                                                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 34437      | public      | ticket_responses                   | ticket_responses_insert_policy                                | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND (user_id = auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_responses.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))                                                                                              | postgres               | true       |
| 34436      | public      | ticket_responses                   | ticket_responses_select_policy                                | r           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_responses.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))                                                                                                                                                                                                                                                                                                                              | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 26102      | public      | ticket_sequences                   | ticket_sequences_insert_policy                                | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | can_access_ticketing(auth.uid())                                                                                                                                                                                                                                                                                                                                                        | postgres               | true       |
| 26101      | public      | ticket_sequences                   | ticket_sequences_select_policy                                | r           | [16481]       | {authenticated} | can_access_ticketing(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 26103      | public      | ticket_sequences                   | ticket_sequences_update_policy                                | w           | [16481]       | {authenticated} | can_access_ticketing(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | can_access_ticketing(auth.uid())                                                                                                                                                                                                                                                                                                                                                        | postgres               | true       |
| 26099      | public      | ticket_sla_tracking                | ticket_sla_tracking_insert_policy                             | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid())))                                                                                                                                                                                                                                                                                 | postgres               | true       |
| 26098      | public      | ticket_sla_tracking                | ticket_sla_tracking_select_policy                             | r           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND (EXISTS ( SELECT 1
   FROM tickets t
  WHERE ((t.id = ticket_sla_tracking.ticket_id) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid()) OR (t.created_by = auth.uid()) OR (t.assigned_to = auth.uid()))))))                                                                                                                                                                                                                                                                                                                           | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 26100      | public      | ticket_sla_tracking                | ticket_sla_tracking_update_policy                             | w           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid())))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      | (can_access_ticketing(auth.uid()) AND (is_ticketing_admin(auth.uid()) OR is_ticketing_ops(auth.uid())))                                                                                                                                                                                                                                                                                 | postgres               | true       |
| 26077      | public      | ticketing_sla_config               | ticketing_sla_config_insert                                   | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | is_ticketing_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                          | postgres               | true       |
| 26076      | public      | ticketing_sla_config               | ticketing_sla_config_select                                   | r           | [16481]       | {authenticated} | can_access_ticketing(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 26078      | public      | ticketing_sla_config               | ticketing_sla_config_update                                   | w           | [16481]       | {authenticated} | is_ticketing_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | is_ticketing_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                          | postgres               | true       |
| 26082      | public      | tickets                            | tickets_delete_policy                                         | d           | [16481]       | {authenticated} | is_ticketing_admin(auth.uid())                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 26080      | public      | tickets                            | tickets_insert_policy                                         | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (can_access_ticketing(auth.uid()) AND (created_by = auth.uid()))                                                                                                                                                                                                                                                                                                                        | postgres               | true       |
| 34438      | public      | tickets                            | tickets_select_policy                                         | r           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND (is_ticketing_admin(auth.uid()) OR (is_ticketing_ops(auth.uid()) AND ((origin_dept = get_user_ticketing_department(auth.uid())) OR (target_dept = get_user_ticketing_department(auth.uid())) OR (department = get_user_ticketing_department(auth.uid())))) OR (created_by = auth.uid()) OR (assigned_to = auth.uid())))                                                                                                                                                                                                                                | null                                                                                                                                                                                                                                                                                                                                                                                    | postgres               | true       |
| 34314      | public      | tickets                            | tickets_update_policy                                         | w           | [16481]       | {authenticated} | (can_access_ticketing(auth.uid()) AND (is_ticketing_admin(auth.uid()) OR (is_ticketing_ops(auth.uid()) AND (department = get_user_ticketing_department(auth.uid()))) OR (created_by = auth.uid()) OR (assigned_to = auth.uid())))                                                                                                                                                                                                                                                                                                                                                            | (can_access_ticketing(auth.uid()) AND (is_ticketing_admin(auth.uid()) OR (is_ticketing_ops(auth.uid()) AND (department = get_user_ticketing_department(auth.uid()))) OR (created_by = auth.uid()) OR (assigned_to = auth.uid())))                                                                                                                                                       | postgres               | true       |
| 18791      | storage     | objects                            | Authenticated users can delete attachments                    | d           | [16481]       | {authenticated} | (bucket_id = 'attachments'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin | true       |
| 26233      | storage     | objects                            | Authenticated users can delete ticketing attachments          | d           | [16481]       | {authenticated} | (bucket_id = 'ticketing-attachments'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin | true       |
| 18790      | storage     | objects                            | Authenticated users can update attachments                    | w           | [16481]       | {authenticated} | (bucket_id = 'attachments'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin | true       |
| 26232      | storage     | objects                            | Authenticated users can update ticketing attachments          | w           | [16481]       | {authenticated} | (bucket_id = 'ticketing-attachments'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin | true       |
| 18788      | storage     | objects                            | Authenticated users can upload attachments                    | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (bucket_id = 'attachments'::text)                                                                                                                                                                                                                                                                                                                                                       | supabase_storage_admin | true       |
| 26230      | storage     | objects                            | Authenticated users can upload ticketing attachments          | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | (bucket_id = 'ticketing-attachments'::text)                                                                                                                                                                                                                                                                                                                                             | supabase_storage_admin | true       |
| 18789      | storage     | objects                            | Authenticated users can view attachments                      | r           | [16481]       | {authenticated} | (bucket_id = 'attachments'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin | true       |
| 26231      | storage     | objects                            | Authenticated users can view ticketing attachments            | r           | [16481]       | {authenticated} | (bucket_id = 'ticketing-attachments'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin | true       |
| 26234      | storage     | objects                            | Public read access for ticketing attachments                  | r           | [0]           | {}              | (bucket_id = 'ticketing-attachments'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin | true       |
| 28017      | storage     | objects                            | avatars_delete_policy                                         | d           | [16481]       | {authenticated} | ((bucket_id = 'avatars'::text) AND ((storage.foldername(name))[1] = (auth.uid())::text))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin | true       |
| 28015      | storage     | objects                            | avatars_insert_policy                                         | a           | [16481]       | {authenticated} | null                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | ((bucket_id = 'avatars'::text) AND ((storage.foldername(name))[1] = (auth.uid())::text))                                                                                                                                                                                                                                                                                                | supabase_storage_admin | true       |
| 28014      | storage     | objects                            | avatars_select_policy                                         | r           | [16481]       | {authenticated} | (bucket_id = 'avatars'::text)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin | true       |
| 28016      | storage     | objects                            | avatars_update_policy                                         | w           | [16481]       | {authenticated} | ((bucket_id = 'avatars'::text) AND ((storage.foldername(name))[1] = (auth.uid())::text))                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | null                                                                                                                                                                                                                                                                                                                                                                                    | supabase_storage_admin | true       |


DATA TRIGGERS
| trigger_schema | table_name              | trigger_name                              | action_timing | event_manipulation | action_orientation | trigger_definition                                                                                                                                                                                                                                                                                                                                                                                                                                                    | function_schema | function_name                               |
| -------------- | ----------------------- | ----------------------------------------- | ------------- | ------------------ | ------------------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------- | ------------------------------------------- |
| public         | accounts                | trg_account_id                            | BEFORE        | INSERT             | ROW                | CREATE TRIGGER trg_account_id BEFORE INSERT ON public.accounts FOR EACH ROW EXECUTE FUNCTION generate_account_id()                                                                                                                                                                                                                                                                                                                                                    | public          | generate_account_id                         |
| public         | accounts                | trg_sync_account_pic_to_contact           | AFTER         | UPDATE             | ROW                | CREATE TRIGGER trg_sync_account_pic_to_contact AFTER INSERT OR UPDATE OF pic_name, pic_email, pic_phone ON public.accounts FOR EACH ROW EXECUTE FUNCTION sync_account_pic_to_contact()                                                                                                                                                                                                                                                                                | public          | sync_account_pic_to_contact                 |
| public         | accounts                | trg_sync_account_pic_to_contact           | AFTER         | INSERT             | ROW                | CREATE TRIGGER trg_sync_account_pic_to_contact AFTER INSERT OR UPDATE OF pic_name, pic_email, pic_phone ON public.accounts FOR EACH ROW EXECUTE FUNCTION sync_account_pic_to_contact()                                                                                                                                                                                                                                                                                | public          | sync_account_pic_to_contact                 |
| public         | activities              | trg_activity_id                           | BEFORE        | INSERT             | ROW                | CREATE TRIGGER trg_activity_id BEFORE INSERT ON public.activities FOR EACH ROW EXECUTE FUNCTION generate_activity_id()                                                                                                                                                                                                                                                                                                                                                | public          | generate_activity_id                        |
| public         | contacts                | trg_contact_id                            | BEFORE        | INSERT             | ROW                | CREATE TRIGGER trg_contact_id BEFORE INSERT ON public.contacts FOR EACH ROW EXECUTE FUNCTION generate_contact_id()                                                                                                                                                                                                                                                                                                                                                    | public          | generate_contact_id                         |
| public         | customer_quotations     | trg_quotation_status_sync                 | AFTER         | UPDATE             | ROW                | CREATE TRIGGER trg_quotation_status_sync AFTER UPDATE OF status ON public.customer_quotations FOR EACH ROW WHEN (((old.status IS DISTINCT FROM new.status) AND (new.status = ANY (ARRAY['sent'::customer_quotation_status, 'accepted'::customer_quotation_status, 'rejected'::customer_quotation_status])))) EXECUTE FUNCTION trigger_sync_quotation_on_status_change()                                                                                               | public          | trigger_sync_quotation_on_status_change     |
| public         | customer_quotations     | trg_validate_quotation_source             | BEFORE        | INSERT             | ROW                | CREATE TRIGGER trg_validate_quotation_source BEFORE INSERT OR UPDATE ON public.customer_quotations FOR EACH ROW EXECUTE FUNCTION validate_quotation_source()                                                                                                                                                                                                                                                                                                          | public          | validate_quotation_source                   |
| public         | customer_quotations     | trg_validate_quotation_source             | BEFORE        | UPDATE             | ROW                | CREATE TRIGGER trg_validate_quotation_source BEFORE INSERT OR UPDATE ON public.customer_quotations FOR EACH ROW EXECUTE FUNCTION validate_quotation_source()                                                                                                                                                                                                                                                                                                          | public          | validate_quotation_source                   |
| public         | customer_quotations     | trigger_link_quotation_to_cost            | AFTER         | INSERT             | ROW                | CREATE TRIGGER trigger_link_quotation_to_cost AFTER INSERT ON public.customer_quotations FOR EACH ROW EXECUTE FUNCTION link_quotation_to_operational_cost()                                                                                                                                                                                                                                                                                                           | public          | link_quotation_to_operational_cost          |
| public         | customer_quotations     | trigger_propagate_ids_on_quotation_insert | BEFORE        | INSERT             | ROW                | CREATE TRIGGER trigger_propagate_ids_on_quotation_insert BEFORE INSERT ON public.customer_quotations FOR EACH ROW EXECUTE FUNCTION propagate_ids_on_quotation_insert()                                                                                                                                                                                                                                                                                                | public          | propagate_ids_on_quotation_insert           |
| public         | customer_quotations     | trigger_update_quotation_count            | AFTER         | INSERT             | ROW                | CREATE TRIGGER trigger_update_quotation_count AFTER INSERT ON public.customer_quotations FOR EACH ROW EXECUTE FUNCTION update_entity_quotation_count()                                                                                                                                                                                                                                                                                                                | public          | update_entity_quotation_count               |
| public         | insights_growth         | trg_insights_growth_latest                | AFTER         | INSERT             | ROW                | CREATE TRIGGER trg_insights_growth_latest AFTER INSERT ON public.insights_growth FOR EACH ROW EXECUTE FUNCTION update_insights_growth_latest()                                                                                                                                                                                                                                                                                                                        | public          | update_insights_growth_latest               |
| public         | insights_growth         | trg_insights_growth_updated_at            | BEFORE        | UPDATE             | ROW                | CREATE TRIGGER trg_insights_growth_updated_at BEFORE UPDATE ON public.insights_growth FOR EACH ROW EXECUTE FUNCTION update_insights_growth_updated_at()                                                                                                                                                                                                                                                                                                               | public          | update_insights_growth_updated_at           |
| public         | leads                   | trg_lead_id                               | BEFORE        | INSERT             | ROW                | CREATE TRIGGER trg_lead_id BEFORE INSERT ON public.leads FOR EACH ROW EXECUTE FUNCTION generate_lead_id()                                                                                                                                                                                                                                                                                                                                                             | public          | generate_lead_id                            |
| public         | leads                   | trg_sync_quotation_on_lead_disqualify     | AFTER         | UPDATE             | ROW                | CREATE TRIGGER trg_sync_quotation_on_lead_disqualify AFTER UPDATE OF triage_status ON public.leads FOR EACH ROW WHEN (((old.triage_status IS DISTINCT FROM new.triage_status) AND (new.triage_status = 'Disqualified'::lead_triage_status))) EXECUTE FUNCTION trigger_sync_quotation_on_lead_disqualify()                                                                                                                                                             | public          | trigger_sync_quotation_on_lead_disqualify   |
| public         | opportunities           | trg_log_stage_change                      | AFTER         | UPDATE             | ROW                | CREATE TRIGGER trg_log_stage_change AFTER UPDATE OF stage ON public.opportunities FOR EACH ROW EXECUTE FUNCTION log_stage_change()                                                                                                                                                                                                                                                                                                                                    | public          | log_stage_change                            |
| public         | opportunities           | trg_opportunity_id                        | BEFORE        | INSERT             | ROW                | CREATE TRIGGER trg_opportunity_id BEFORE INSERT ON public.opportunities FOR EACH ROW EXECUTE FUNCTION generate_opportunity_id()                                                                                                                                                                                                                                                                                                                                       | public          | generate_opportunity_id                     |
| public         | opportunities           | trg_sync_quotation_on_opportunity_close   | AFTER         | UPDATE             | ROW                | CREATE TRIGGER trg_sync_quotation_on_opportunity_close AFTER UPDATE ON public.opportunities FOR EACH ROW WHEN (((old.stage IS DISTINCT FROM new.stage) AND (new.stage = ANY (ARRAY['Closed Won'::opportunity_stage, 'Closed Lost'::opportunity_stage])))) EXECUTE FUNCTION trigger_sync_quotation_on_opportunity_close()                                                                                                                                              | public          | trigger_sync_quotation_on_opportunity_close |
| public         | pipeline_updates        | trg_pipeline_update_id                    | BEFORE        | INSERT             | ROW                | CREATE TRIGGER trg_pipeline_update_id BEFORE INSERT ON public.pipeline_updates FOR EACH ROW EXECUTE FUNCTION generate_pipeline_update_id()                                                                                                                                                                                                                                                                                                                            | public          | generate_pipeline_update_id                 |
| public         | profiles                | profiles_updated_at                       | BEFORE        | UPDATE             | ROW                | CREATE TRIGGER profiles_updated_at BEFORE UPDATE ON public.profiles FOR EACH ROW EXECUTE FUNCTION update_profiles_updated_at()                                                                                                                                                                                                                                                                                                                                        | public          | update_profiles_updated_at                  |
| public         | sales_plans             | trg_sales_plan_id                         | BEFORE        | INSERT             | ROW                | CREATE TRIGGER trg_sales_plan_id BEFORE INSERT ON public.sales_plans FOR EACH ROW EXECUTE FUNCTION generate_sales_plan_id()                                                                                                                                                                                                                                                                                                                                           | public          | generate_sales_plan_id                      |
| public         | shipment_attachments    | trg_attachment_id                         | BEFORE        | INSERT             | ROW                | CREATE TRIGGER trg_attachment_id BEFORE INSERT ON public.shipment_attachments FOR EACH ROW EXECUTE FUNCTION generate_attachment_id()                                                                                                                                                                                                                                                                                                                                  | public          | generate_attachment_id                      |
| public         | shipment_details        | trg_shipment_detail_id                    | BEFORE        | INSERT             | ROW                | CREATE TRIGGER trg_shipment_detail_id BEFORE INSERT ON public.shipment_details FOR EACH ROW EXECUTE FUNCTION generate_shipment_detail_id()                                                                                                                                                                                                                                                                                                                            | public          | generate_shipment_detail_id                 |
| public         | shipment_details        | trg_shipment_update                       | BEFORE        | UPDATE             | ROW                | CREATE TRIGGER trg_shipment_update BEFORE UPDATE ON public.shipment_details FOR EACH ROW EXECUTE FUNCTION update_shipment_calculations()                                                                                                                                                                                                                                                                                                                              | public          | update_shipment_calculations                |
| public         | sla_business_hours      | set_sla_business_hours_updated_at         | BEFORE        | UPDATE             | ROW                | CREATE TRIGGER set_sla_business_hours_updated_at BEFORE UPDATE ON public.sla_business_hours FOR EACH ROW EXECUTE FUNCTION handle_ticketing_updated_at()                                                                                                                                                                                                                                                                                                               | public          | handle_ticketing_updated_at                 |
| public         | sla_holidays            | set_sla_holidays_updated_at               | BEFORE        | UPDATE             | ROW                | CREATE TRIGGER set_sla_holidays_updated_at BEFORE UPDATE ON public.sla_holidays FOR EACH ROW EXECUTE FUNCTION handle_ticketing_updated_at()                                                                                                                                                                                                                                                                                                                           | public          | handle_ticketing_updated_at                 |
| public         | ticket_comments         | set_ticketing_updated_at                  | BEFORE        | UPDATE             | ROW                | CREATE TRIGGER set_ticketing_updated_at BEFORE UPDATE ON public.ticket_comments FOR EACH ROW EXECUTE FUNCTION handle_ticketing_updated_at()                                                                                                                                                                                                                                                                                                                           | public          | handle_ticketing_updated_at                 |
| public         | ticket_comments         | trigger_auto_record_response              | AFTER         | INSERT             | ROW                | CREATE TRIGGER trigger_auto_record_response AFTER INSERT ON public.ticket_comments FOR EACH ROW EXECUTE FUNCTION auto_record_response_on_comment()                                                                                                                                                                                                                                                                                                                    | public          | auto_record_response_on_comment             |
| public         | ticket_rate_quotes      | set_ticketing_updated_at                  | BEFORE        | UPDATE             | ROW                | CREATE TRIGGER set_ticketing_updated_at BEFORE UPDATE ON public.ticket_rate_quotes FOR EACH ROW EXECUTE FUNCTION handle_ticketing_updated_at()                                                                                                                                                                                                                                                                                                                        | public          | handle_ticketing_updated_at                 |
| public         | ticket_rate_quotes      | trg_sync_operational_cost_status_change   | AFTER         | UPDATE             | ROW                | CREATE TRIGGER trg_sync_operational_cost_status_change AFTER UPDATE ON public.ticket_rate_quotes FOR EACH ROW WHEN (((old.status IS DISTINCT FROM new.status) AND (new.status = ANY (ARRAY['sent_to_customer'::quote_status, 'accepted'::quote_status, 'rejected'::quote_status])))) EXECUTE FUNCTION trigger_sync_operational_cost_status_change()                                                                                                                   | public          | trigger_sync_operational_cost_status_change |
| public         | ticket_rate_quotes      | trigger_propagate_ids_on_cost_insert      | BEFORE        | INSERT             | ROW                | CREATE TRIGGER trigger_propagate_ids_on_cost_insert BEFORE INSERT ON public.ticket_rate_quotes FOR EACH ROW EXECUTE FUNCTION propagate_ids_on_operational_cost_insert()                                                                                                                                                                                                                                                                                               | public          | propagate_ids_on_operational_cost_insert    |
| public         | ticket_rate_quotes      | trigger_update_quote_metrics_on_quote     | AFTER         | INSERT             | ROW                | CREATE TRIGGER trigger_update_quote_metrics_on_quote AFTER INSERT OR UPDATE OF status ON public.ticket_rate_quotes FOR EACH ROW WHEN ((new.ticket_id IS NOT NULL)) EXECUTE FUNCTION trigger_update_quote_metrics_on_quote()                                                                                                                                                                                                                                           | public          | trigger_update_quote_metrics_on_quote       |
| public         | ticket_rate_quotes      | trigger_update_quote_metrics_on_quote     | AFTER         | UPDATE             | ROW                | CREATE TRIGGER trigger_update_quote_metrics_on_quote AFTER INSERT OR UPDATE OF status ON public.ticket_rate_quotes FOR EACH ROW WHEN ((new.ticket_id IS NOT NULL)) EXECUTE FUNCTION trigger_update_quote_metrics_on_quote()                                                                                                                                                                                                                                           | public          | trigger_update_quote_metrics_on_quote       |
| public         | ticket_response_metrics | set_ticket_response_metrics_updated_at    | BEFORE        | UPDATE             | ROW                | CREATE TRIGGER set_ticket_response_metrics_updated_at BEFORE UPDATE ON public.ticket_response_metrics FOR EACH ROW EXECUTE FUNCTION handle_ticketing_updated_at()                                                                                                                                                                                                                                                                                                     | public          | handle_ticketing_updated_at                 |
| public         | ticket_sequences        | set_ticketing_updated_at                  | BEFORE        | UPDATE             | ROW                | CREATE TRIGGER set_ticketing_updated_at BEFORE UPDATE ON public.ticket_sequences FOR EACH ROW EXECUTE FUNCTION handle_ticketing_updated_at()                                                                                                                                                                                                                                                                                                                          | public          | handle_ticketing_updated_at                 |
| public         | ticket_sla_tracking     | set_ticketing_updated_at                  | BEFORE        | UPDATE             | ROW                | CREATE TRIGGER set_ticketing_updated_at BEFORE UPDATE ON public.ticket_sla_tracking FOR EACH ROW EXECUTE FUNCTION handle_ticketing_updated_at()                                                                                                                                                                                                                                                                                                                       | public          | handle_ticketing_updated_at                 |
| public         | ticketing_sla_config    | set_ticketing_updated_at                  | BEFORE        | UPDATE             | ROW                | CREATE TRIGGER set_ticketing_updated_at BEFORE UPDATE ON public.ticketing_sla_config FOR EACH ROW EXECUTE FUNCTION handle_ticketing_updated_at()                                                                                                                                                                                                                                                                                                                      | public          | handle_ticketing_updated_at                 |
| public         | tickets                 | set_ticketing_updated_at                  | BEFORE        | UPDATE             | ROW                | CREATE TRIGGER set_ticketing_updated_at BEFORE UPDATE ON public.tickets FOR EACH ROW EXECUTE FUNCTION handle_ticketing_updated_at()                                                                                                                                                                                                                                                                                                                                   | public          | handle_ticketing_updated_at                 |
| public         | tickets                 | trg_set_ticket_origin_department          | BEFORE        | INSERT             | ROW                | CREATE TRIGGER trg_set_ticket_origin_department BEFORE INSERT ON public.tickets FOR EACH ROW EXECUTE FUNCTION set_ticket_origin_department()                                                                                                                                                                                                                                                                                                                          | public          | set_ticket_origin_department                |
| public         | tickets                 | trg_sync_ticket_status_to_quotation       | AFTER         | UPDATE             | ROW                | CREATE TRIGGER trg_sync_ticket_status_to_quotation AFTER UPDATE ON public.tickets FOR EACH ROW WHEN (((old.status IS DISTINCT FROM new.status) AND (((new.status = 'closed'::ticket_status) AND (new.close_outcome = ANY (ARRAY['won'::ticket_close_outcome, 'lost'::ticket_close_outcome]))) OR ((new.status = 'need_adjustment'::ticket_status) AND (old.status <> 'need_adjustment'::ticket_status))))) EXECUTE FUNCTION trigger_sync_ticket_status_to_quotation() | public          | trigger_sync_ticket_status_to_quotation     |
| public         | tickets                 | trigger_propagate_lead_on_ticket_insert   | BEFORE        | INSERT             | ROW                | CREATE TRIGGER trigger_propagate_lead_on_ticket_insert BEFORE INSERT ON public.tickets FOR EACH ROW EXECUTE FUNCTION propagate_lead_id_on_ticket_insert()                                                                                                                                                                                                                                                                                                             | public          | propagate_lead_id_on_ticket_insert          |
| public         | tickets                 | trigger_set_ticket_departments            | BEFORE        | INSERT             | ROW                | CREATE TRIGGER trigger_set_ticket_departments BEFORE INSERT ON public.tickets FOR EACH ROW EXECUTE FUNCTION set_ticket_departments()                                                                                                                                                                                                                                                                                                                                  | public          | set_ticket_departments                      |
| realtime       | subscription            | tr_check_filters                          | BEFORE        | INSERT             | ROW                | CREATE TRIGGER tr_check_filters BEFORE INSERT OR UPDATE ON realtime.subscription FOR EACH ROW EXECUTE FUNCTION realtime.subscription_check_filters()                                                                                                                                                                                                                                                                                                                  | realtime        | subscription_check_filters                  |
| realtime       | subscription            | tr_check_filters                          | BEFORE        | UPDATE             | ROW                | CREATE TRIGGER tr_check_filters BEFORE INSERT OR UPDATE ON realtime.subscription FOR EACH ROW EXECUTE FUNCTION realtime.subscription_check_filters()                                                                                                                                                                                                                                                                                                                  | realtime        | subscription_check_filters                  |
| storage        | buckets                 | enforce_bucket_name_length_trigger        | BEFORE        | INSERT             | ROW                | CREATE TRIGGER enforce_bucket_name_length_trigger BEFORE INSERT OR UPDATE OF name ON storage.buckets FOR EACH ROW EXECUTE FUNCTION storage.enforce_bucket_name_length()                                                                                                                                                                                                                                                                                               | storage         | enforce_bucket_name_length                  |
| storage        | buckets                 | enforce_bucket_name_length_trigger        | BEFORE        | UPDATE             | ROW                | CREATE TRIGGER enforce_bucket_name_length_trigger BEFORE INSERT OR UPDATE OF name ON storage.buckets FOR EACH ROW EXECUTE FUNCTION storage.enforce_bucket_name_length()                                                                                                                                                                                                                                                                                               | storage         | enforce_bucket_name_length                  |
| storage        | objects                 | objects_delete_delete_prefix              | AFTER         | DELETE             | ROW                | CREATE TRIGGER objects_delete_delete_prefix AFTER DELETE ON storage.objects FOR EACH ROW EXECUTE FUNCTION storage.delete_prefix_hierarchy_trigger()                                                                                                                                                                                                                                                                                                                   | storage         | delete_prefix_hierarchy_trigger             |
| storage        | objects                 | objects_insert_create_prefix              | BEFORE        | INSERT             | ROW                | CREATE TRIGGER objects_insert_create_prefix BEFORE INSERT ON storage.objects FOR EACH ROW EXECUTE FUNCTION storage.objects_insert_prefix_trigger()                                                                                                                                                                                                                                                                                                                    | storage         | objects_insert_prefix_trigger               |
| storage        | objects                 | objects_update_create_prefix              | BEFORE        | UPDATE             | ROW                | CREATE TRIGGER objects_update_create_prefix BEFORE UPDATE ON storage.objects FOR EACH ROW WHEN (((new.name <> old.name) OR (new.bucket_id <> old.bucket_id))) EXECUTE FUNCTION storage.objects_update_prefix_trigger()                                                                                                                                                                                                                                                | storage         | objects_update_prefix_trigger               |
| storage        | objects                 | update_objects_updated_at                 | BEFORE        | UPDATE             | ROW                | CREATE TRIGGER update_objects_updated_at BEFORE UPDATE ON storage.objects FOR EACH ROW EXECUTE FUNCTION storage.update_updated_at_column()                                                                                                                                                                                                                                                                                                                            | storage         | update_updated_at_column                    |
| storage        | prefixes                | prefixes_create_hierarchy                 | BEFORE        | INSERT             | ROW                | CREATE TRIGGER prefixes_create_hierarchy BEFORE INSERT ON storage.prefixes FOR EACH ROW WHEN ((pg_trigger_depth() < 1)) EXECUTE FUNCTION storage.prefixes_insert_trigger()                                                                                                                                                                                                                                                                                            | storage         | prefixes_insert_trigger                     |
| storage        | prefixes                | prefixes_delete_hierarchy                 | AFTER         | DELETE             | ROW                | CREATE TRIGGER prefixes_delete_hierarchy AFTER DELETE ON storage.prefixes FOR EACH ROW EXECUTE FUNCTION storage.delete_prefix_hierarchy_trigger()                                                                                                                                                                                                                                                                                                                     | storage         | delete_prefix_hierarchy_trigger             |

DATA FUNCTION PG CATALOG
| trigger_schema | table_name              | trigger_name                              | action_orientation | timing_hint | events        | trigger_definition                                                                                                                                                                                                                                                                                                                                                                                                                                                    | function_name                               | function_schema | enabled |
| -------------- | ----------------------- | ----------------------------------------- | ------------------ | ----------- | ------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------- | --------------- | ------- |
| public         | accounts                | trg_account_id                            | ROW                | OTHER       | INSERT        | CREATE TRIGGER trg_account_id BEFORE INSERT ON public.accounts FOR EACH ROW EXECUTE FUNCTION generate_account_id()                                                                                                                                                                                                                                                                                                                                                    | generate_account_id                         | public          | O       |
| public         | accounts                | trg_sync_account_pic_to_contact           | ROW                | OTHER       | INSERT/UPDATE | CREATE TRIGGER trg_sync_account_pic_to_contact AFTER INSERT OR UPDATE OF pic_name, pic_email, pic_phone ON public.accounts FOR EACH ROW EXECUTE FUNCTION sync_account_pic_to_contact()                                                                                                                                                                                                                                                                                | sync_account_pic_to_contact                 | public          | O       |
| public         | activities              | trg_activity_id                           | ROW                | OTHER       | INSERT        | CREATE TRIGGER trg_activity_id BEFORE INSERT ON public.activities FOR EACH ROW EXECUTE FUNCTION generate_activity_id()                                                                                                                                                                                                                                                                                                                                                | generate_activity_id                        | public          | O       |
| public         | contacts                | trg_contact_id                            | ROW                | OTHER       | INSERT        | CREATE TRIGGER trg_contact_id BEFORE INSERT ON public.contacts FOR EACH ROW EXECUTE FUNCTION generate_contact_id()                                                                                                                                                                                                                                                                                                                                                    | generate_contact_id                         | public          | O       |
| public         | customer_quotations     | trg_quotation_status_sync                 | ROW                | OTHER       | UPDATE        | CREATE TRIGGER trg_quotation_status_sync AFTER UPDATE OF status ON public.customer_quotations FOR EACH ROW WHEN (((old.status IS DISTINCT FROM new.status) AND (new.status = ANY (ARRAY['sent'::customer_quotation_status, 'accepted'::customer_quotation_status, 'rejected'::customer_quotation_status])))) EXECUTE FUNCTION trigger_sync_quotation_on_status_change()                                                                                               | trigger_sync_quotation_on_status_change     | public          | O       |
| public         | customer_quotations     | trg_validate_quotation_source             | ROW                | OTHER       | INSERT/UPDATE | CREATE TRIGGER trg_validate_quotation_source BEFORE INSERT OR UPDATE ON public.customer_quotations FOR EACH ROW EXECUTE FUNCTION validate_quotation_source()                                                                                                                                                                                                                                                                                                          | validate_quotation_source                   | public          | O       |
| public         | customer_quotations     | trigger_link_quotation_to_cost            | ROW                | OTHER       | INSERT        | CREATE TRIGGER trigger_link_quotation_to_cost AFTER INSERT ON public.customer_quotations FOR EACH ROW EXECUTE FUNCTION link_quotation_to_operational_cost()                                                                                                                                                                                                                                                                                                           | link_quotation_to_operational_cost          | public          | O       |
| public         | customer_quotations     | trigger_propagate_ids_on_quotation_insert | ROW                | OTHER       | INSERT        | CREATE TRIGGER trigger_propagate_ids_on_quotation_insert BEFORE INSERT ON public.customer_quotations FOR EACH ROW EXECUTE FUNCTION propagate_ids_on_quotation_insert()                                                                                                                                                                                                                                                                                                | propagate_ids_on_quotation_insert           | public          | O       |
| public         | customer_quotations     | trigger_update_quotation_count            | ROW                | OTHER       | INSERT        | CREATE TRIGGER trigger_update_quotation_count AFTER INSERT ON public.customer_quotations FOR EACH ROW EXECUTE FUNCTION update_entity_quotation_count()                                                                                                                                                                                                                                                                                                                | update_entity_quotation_count               | public          | O       |
| public         | insights_growth         | trg_insights_growth_latest                | ROW                | OTHER       | INSERT        | CREATE TRIGGER trg_insights_growth_latest AFTER INSERT ON public.insights_growth FOR EACH ROW EXECUTE FUNCTION update_insights_growth_latest()                                                                                                                                                                                                                                                                                                                        | update_insights_growth_latest               | public          | O       |
| public         | insights_growth         | trg_insights_growth_updated_at            | ROW                | OTHER       | UPDATE        | CREATE TRIGGER trg_insights_growth_updated_at BEFORE UPDATE ON public.insights_growth FOR EACH ROW EXECUTE FUNCTION update_insights_growth_updated_at()                                                                                                                                                                                                                                                                                                               | update_insights_growth_updated_at           | public          | O       |
| public         | leads                   | trg_lead_id                               | ROW                | OTHER       | INSERT        | CREATE TRIGGER trg_lead_id BEFORE INSERT ON public.leads FOR EACH ROW EXECUTE FUNCTION generate_lead_id()                                                                                                                                                                                                                                                                                                                                                             | generate_lead_id                            | public          | O       |
| public         | leads                   | trg_sync_quotation_on_lead_disqualify     | ROW                | OTHER       | UPDATE        | CREATE TRIGGER trg_sync_quotation_on_lead_disqualify AFTER UPDATE OF triage_status ON public.leads FOR EACH ROW WHEN (((old.triage_status IS DISTINCT FROM new.triage_status) AND (new.triage_status = 'Disqualified'::lead_triage_status))) EXECUTE FUNCTION trigger_sync_quotation_on_lead_disqualify()                                                                                                                                                             | trigger_sync_quotation_on_lead_disqualify   | public          | O       |
| public         | opportunities           | trg_log_stage_change                      | ROW                | OTHER       | UPDATE        | CREATE TRIGGER trg_log_stage_change AFTER UPDATE OF stage ON public.opportunities FOR EACH ROW EXECUTE FUNCTION log_stage_change()                                                                                                                                                                                                                                                                                                                                    | log_stage_change                            | public          | O       |
| public         | opportunities           | trg_opportunity_id                        | ROW                | OTHER       | INSERT        | CREATE TRIGGER trg_opportunity_id BEFORE INSERT ON public.opportunities FOR EACH ROW EXECUTE FUNCTION generate_opportunity_id()                                                                                                                                                                                                                                                                                                                                       | generate_opportunity_id                     | public          | O       |
| public         | opportunities           | trg_sync_quotation_on_opportunity_close   | ROW                | OTHER       | UPDATE        | CREATE TRIGGER trg_sync_quotation_on_opportunity_close AFTER UPDATE ON public.opportunities FOR EACH ROW WHEN (((old.stage IS DISTINCT FROM new.stage) AND (new.stage = ANY (ARRAY['Closed Won'::opportunity_stage, 'Closed Lost'::opportunity_stage])))) EXECUTE FUNCTION trigger_sync_quotation_on_opportunity_close()                                                                                                                                              | trigger_sync_quotation_on_opportunity_close | public          | O       |
| public         | pipeline_updates        | trg_pipeline_update_id                    | ROW                | OTHER       | INSERT        | CREATE TRIGGER trg_pipeline_update_id BEFORE INSERT ON public.pipeline_updates FOR EACH ROW EXECUTE FUNCTION generate_pipeline_update_id()                                                                                                                                                                                                                                                                                                                            | generate_pipeline_update_id                 | public          | O       |
| public         | profiles                | profiles_updated_at                       | ROW                | OTHER       | UPDATE        | CREATE TRIGGER profiles_updated_at BEFORE UPDATE ON public.profiles FOR EACH ROW EXECUTE FUNCTION update_profiles_updated_at()                                                                                                                                                                                                                                                                                                                                        | update_profiles_updated_at                  | public          | O       |
| public         | sales_plans             | trg_sales_plan_id                         | ROW                | OTHER       | INSERT        | CREATE TRIGGER trg_sales_plan_id BEFORE INSERT ON public.sales_plans FOR EACH ROW EXECUTE FUNCTION generate_sales_plan_id()                                                                                                                                                                                                                                                                                                                                           | generate_sales_plan_id                      | public          | O       |
| public         | shipment_attachments    | trg_attachment_id                         | ROW                | OTHER       | INSERT        | CREATE TRIGGER trg_attachment_id BEFORE INSERT ON public.shipment_attachments FOR EACH ROW EXECUTE FUNCTION generate_attachment_id()                                                                                                                                                                                                                                                                                                                                  | generate_attachment_id                      | public          | O       |
| public         | shipment_details        | trg_shipment_detail_id                    | ROW                | OTHER       | INSERT        | CREATE TRIGGER trg_shipment_detail_id BEFORE INSERT ON public.shipment_details FOR EACH ROW EXECUTE FUNCTION generate_shipment_detail_id()                                                                                                                                                                                                                                                                                                                            | generate_shipment_detail_id                 | public          | O       |
| public         | shipment_details        | trg_shipment_update                       | ROW                | OTHER       | UPDATE        | CREATE TRIGGER trg_shipment_update BEFORE UPDATE ON public.shipment_details FOR EACH ROW EXECUTE FUNCTION update_shipment_calculations()                                                                                                                                                                                                                                                                                                                              | update_shipment_calculations                | public          | O       |
| public         | sla_business_hours      | set_sla_business_hours_updated_at         | ROW                | OTHER       | UPDATE        | CREATE TRIGGER set_sla_business_hours_updated_at BEFORE UPDATE ON public.sla_business_hours FOR EACH ROW EXECUTE FUNCTION handle_ticketing_updated_at()                                                                                                                                                                                                                                                                                                               | handle_ticketing_updated_at                 | public          | O       |
| public         | sla_holidays            | set_sla_holidays_updated_at               | ROW                | OTHER       | UPDATE        | CREATE TRIGGER set_sla_holidays_updated_at BEFORE UPDATE ON public.sla_holidays FOR EACH ROW EXECUTE FUNCTION handle_ticketing_updated_at()                                                                                                                                                                                                                                                                                                                           | handle_ticketing_updated_at                 | public          | O       |
| public         | ticket_comments         | set_ticketing_updated_at                  | ROW                | OTHER       | UPDATE        | CREATE TRIGGER set_ticketing_updated_at BEFORE UPDATE ON public.ticket_comments FOR EACH ROW EXECUTE FUNCTION handle_ticketing_updated_at()                                                                                                                                                                                                                                                                                                                           | handle_ticketing_updated_at                 | public          | O       |
| public         | ticket_comments         | trigger_auto_record_response              | ROW                | OTHER       | INSERT        | CREATE TRIGGER trigger_auto_record_response AFTER INSERT ON public.ticket_comments FOR EACH ROW EXECUTE FUNCTION auto_record_response_on_comment()                                                                                                                                                                                                                                                                                                                    | auto_record_response_on_comment             | public          | O       |
| public         | ticket_rate_quotes      | set_ticketing_updated_at                  | ROW                | OTHER       | UPDATE        | CREATE TRIGGER set_ticketing_updated_at BEFORE UPDATE ON public.ticket_rate_quotes FOR EACH ROW EXECUTE FUNCTION handle_ticketing_updated_at()                                                                                                                                                                                                                                                                                                                        | handle_ticketing_updated_at                 | public          | O       |
| public         | ticket_rate_quotes      | trg_sync_operational_cost_status_change   | ROW                | OTHER       | UPDATE        | CREATE TRIGGER trg_sync_operational_cost_status_change AFTER UPDATE ON public.ticket_rate_quotes FOR EACH ROW WHEN (((old.status IS DISTINCT FROM new.status) AND (new.status = ANY (ARRAY['sent_to_customer'::quote_status, 'accepted'::quote_status, 'rejected'::quote_status])))) EXECUTE FUNCTION trigger_sync_operational_cost_status_change()                                                                                                                   | trigger_sync_operational_cost_status_change | public          | O       |
| public         | ticket_rate_quotes      | trigger_propagate_ids_on_cost_insert      | ROW                | OTHER       | INSERT        | CREATE TRIGGER trigger_propagate_ids_on_cost_insert BEFORE INSERT ON public.ticket_rate_quotes FOR EACH ROW EXECUTE FUNCTION propagate_ids_on_operational_cost_insert()                                                                                                                                                                                                                                                                                               | propagate_ids_on_operational_cost_insert    | public          | O       |
| public         | ticket_rate_quotes      | trigger_update_quote_metrics_on_quote     | ROW                | OTHER       | INSERT/UPDATE | CREATE TRIGGER trigger_update_quote_metrics_on_quote AFTER INSERT OR UPDATE OF status ON public.ticket_rate_quotes FOR EACH ROW WHEN ((new.ticket_id IS NOT NULL)) EXECUTE FUNCTION trigger_update_quote_metrics_on_quote()                                                                                                                                                                                                                                           | trigger_update_quote_metrics_on_quote       | public          | O       |
| public         | ticket_response_metrics | set_ticket_response_metrics_updated_at    | ROW                | OTHER       | UPDATE        | CREATE TRIGGER set_ticket_response_metrics_updated_at BEFORE UPDATE ON public.ticket_response_metrics FOR EACH ROW EXECUTE FUNCTION handle_ticketing_updated_at()                                                                                                                                                                                                                                                                                                     | handle_ticketing_updated_at                 | public          | O       |
| public         | ticket_sequences        | set_ticketing_updated_at                  | ROW                | OTHER       | UPDATE        | CREATE TRIGGER set_ticketing_updated_at BEFORE UPDATE ON public.ticket_sequences FOR EACH ROW EXECUTE FUNCTION handle_ticketing_updated_at()                                                                                                                                                                                                                                                                                                                          | handle_ticketing_updated_at                 | public          | O       |
| public         | ticket_sla_tracking     | set_ticketing_updated_at                  | ROW                | OTHER       | UPDATE        | CREATE TRIGGER set_ticketing_updated_at BEFORE UPDATE ON public.ticket_sla_tracking FOR EACH ROW EXECUTE FUNCTION handle_ticketing_updated_at()                                                                                                                                                                                                                                                                                                                       | handle_ticketing_updated_at                 | public          | O       |
| public         | ticketing_sla_config    | set_ticketing_updated_at                  | ROW                | OTHER       | UPDATE        | CREATE TRIGGER set_ticketing_updated_at BEFORE UPDATE ON public.ticketing_sla_config FOR EACH ROW EXECUTE FUNCTION handle_ticketing_updated_at()                                                                                                                                                                                                                                                                                                                      | handle_ticketing_updated_at                 | public          | O       |
| public         | tickets                 | set_ticketing_updated_at                  | ROW                | OTHER       | UPDATE        | CREATE TRIGGER set_ticketing_updated_at BEFORE UPDATE ON public.tickets FOR EACH ROW EXECUTE FUNCTION handle_ticketing_updated_at()                                                                                                                                                                                                                                                                                                                                   | handle_ticketing_updated_at                 | public          | O       |
| public         | tickets                 | trg_set_ticket_origin_department          | ROW                | OTHER       | INSERT        | CREATE TRIGGER trg_set_ticket_origin_department BEFORE INSERT ON public.tickets FOR EACH ROW EXECUTE FUNCTION set_ticket_origin_department()                                                                                                                                                                                                                                                                                                                          | set_ticket_origin_department                | public          | O       |
| public         | tickets                 | trg_sync_ticket_status_to_quotation       | ROW                | OTHER       | UPDATE        | CREATE TRIGGER trg_sync_ticket_status_to_quotation AFTER UPDATE ON public.tickets FOR EACH ROW WHEN (((old.status IS DISTINCT FROM new.status) AND (((new.status = 'closed'::ticket_status) AND (new.close_outcome = ANY (ARRAY['won'::ticket_close_outcome, 'lost'::ticket_close_outcome]))) OR ((new.status = 'need_adjustment'::ticket_status) AND (old.status <> 'need_adjustment'::ticket_status))))) EXECUTE FUNCTION trigger_sync_ticket_status_to_quotation() | trigger_sync_ticket_status_to_quotation     | public          | O       |
| public         | tickets                 | trigger_propagate_lead_on_ticket_insert   | ROW                | OTHER       | INSERT        | CREATE TRIGGER trigger_propagate_lead_on_ticket_insert BEFORE INSERT ON public.tickets FOR EACH ROW EXECUTE FUNCTION propagate_lead_id_on_ticket_insert()                                                                                                                                                                                                                                                                                                             | propagate_lead_id_on_ticket_insert          | public          | O       |
| public         | tickets                 | trigger_set_ticket_departments            | ROW                | OTHER       | INSERT        | CREATE TRIGGER trigger_set_ticket_departments BEFORE INSERT ON public.tickets FOR EACH ROW EXECUTE FUNCTION set_ticket_departments()                                                                                                                                                                                                                                                                                                                                  | set_ticket_departments                      | public          | O       |
| realtime       | subscription            | tr_check_filters                          | ROW                | OTHER       | INSERT/UPDATE | CREATE TRIGGER tr_check_filters BEFORE INSERT OR UPDATE ON realtime.subscription FOR EACH ROW EXECUTE FUNCTION realtime.subscription_check_filters()                                                                                                                                                                                                                                                                                                                  | subscription_check_filters                  | realtime        | O       |
| storage        | buckets                 | enforce_bucket_name_length_trigger        | ROW                | OTHER       | INSERT/UPDATE | CREATE TRIGGER enforce_bucket_name_length_trigger BEFORE INSERT OR UPDATE OF name ON storage.buckets FOR EACH ROW EXECUTE FUNCTION storage.enforce_bucket_name_length()                                                                                                                                                                                                                                                                                               | enforce_bucket_name_length                  | storage         | O       |
| storage        | objects                 | objects_delete_delete_prefix              | ROW                | OTHER       | DELETE        | CREATE TRIGGER objects_delete_delete_prefix AFTER DELETE ON storage.objects FOR EACH ROW EXECUTE FUNCTION storage.delete_prefix_hierarchy_trigger()                                                                                                                                                                                                                                                                                                                   | delete_prefix_hierarchy_trigger             | storage         | O       |
| storage        | objects                 | objects_insert_create_prefix              | ROW                | OTHER       | INSERT        | CREATE TRIGGER objects_insert_create_prefix BEFORE INSERT ON storage.objects FOR EACH ROW EXECUTE FUNCTION storage.objects_insert_prefix_trigger()                                                                                                                                                                                                                                                                                                                    | objects_insert_prefix_trigger               | storage         | O       |
| storage        | objects                 | objects_update_create_prefix              | ROW                | OTHER       | UPDATE        | CREATE TRIGGER objects_update_create_prefix BEFORE UPDATE ON storage.objects FOR EACH ROW WHEN (((new.name <> old.name) OR (new.bucket_id <> old.bucket_id))) EXECUTE FUNCTION storage.objects_update_prefix_trigger()                                                                                                                                                                                                                                                | objects_update_prefix_trigger               | storage         | O       |
| storage        | objects                 | update_objects_updated_at                 | ROW                | OTHER       | UPDATE        | CREATE TRIGGER update_objects_updated_at BEFORE UPDATE ON storage.objects FOR EACH ROW EXECUTE FUNCTION storage.update_updated_at_column()                                                                                                                                                                                                                                                                                                                            | update_updated_at_column                    | storage         | O       |
| storage        | prefixes                | prefixes_create_hierarchy                 | ROW                | OTHER       | INSERT        | CREATE TRIGGER prefixes_create_hierarchy BEFORE INSERT ON storage.prefixes FOR EACH ROW WHEN ((pg_trigger_depth() < 1)) EXECUTE FUNCTION storage.prefixes_insert_trigger()                                                                                                                                                                                                                                                                                            | prefixes_insert_trigger                     | storage         | O       |
| storage        | prefixes                | prefixes_delete_hierarchy                 | ROW                | OTHER       | DELETE        | CREATE TRIGGER prefixes_delete_hierarchy AFTER DELETE ON storage.prefixes FOR EACH ROW EXECUTE FUNCTION storage.delete_prefix_hierarchy_trigger()                                                                                                                                                                                                                                                                                                                     | delete_prefix_hierarchy_trigger             | storage         | O       |

